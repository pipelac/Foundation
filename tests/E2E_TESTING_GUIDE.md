# üß™ E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ RSS2TLG - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
- [–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤](#–∑–∞–ø—É—Å–∫-—Ç–µ—Å—Ç–æ–≤)
- [–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](#—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- [–ü—Ä–æ–≤–µ—Ä–∫–∞ Unicode Fix](#–ø—Ä–æ–≤–µ—Ä–∫–∞-unicode-fix)
- [–û—Ç—á–µ—Ç—ã –∏ –¥–∞–º–ø—ã](#–æ—Ç—á–µ—Ç—ã-–∏-–¥–∞–º–ø—ã)

---

## üöÄ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 1. –ó–∞–ø—É—Å–∫ MariaDB 11.3

```bash
# –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
cat > /tmp/mariadb_start.sh << 'EOF'
#!/bin/bash
set -e

echo "üöÄ –ó–∞–ø—É—Å–∫ MariaDB –¥–ª—è E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è..."

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker stop rss2tlg_mariadb 2>/dev/null || true
docker rm rss2tlg_mariadb 2>/dev/null || true

# –ó–∞–ø—É—Å–∫–∞–µ–º MariaDB
docker run -d \
  --name rss2tlg_mariadb \
  -e MYSQL_ROOT_PASSWORD=test_root_password \
  -e MYSQL_DATABASE=rss2tlg_test \
  -e MYSQL_USER=rss2tlg_user \
  -e MYSQL_PASSWORD=test_password \
  -p 3306:3306 \
  mariadb:11.3 \
  --character-set-server=utf8mb4 \
  --collation-server=utf8mb4_unicode_ci

echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ MariaDB..."
sleep 10

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
for i in {1..30}; do
  if docker exec rss2tlg_mariadb mariadb -uroot -ptest_root_password -e "SELECT 1" >/dev/null 2>&1; then
    echo "‚úÖ MariaDB –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!"
    docker exec rss2tlg_mariadb mariadb -uroot -ptest_root_password -e "SELECT VERSION()"
    exit 0
  fi
  echo "   –ü–æ–ø—ã—Ç–∫–∞ $i/30..."
  sleep 2
done

echo "‚ùå MariaDB –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –∑–∞ 60 —Å–µ–∫—É–Ω–¥"
exit 1
EOF

chmod +x /tmp/mariadb_start.sh
/tmp/mariadb_start.sh
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏
docker exec rss2tlg_mariadb mariadb -urss2tlg_user -ptest_password -D rss2tlg_test -e "SELECT VERSION();"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü
docker exec rss2tlg_mariadb mariadb -urss2tlg_user -ptest_password -D rss2tlg_test -e "SHOW TABLES;"
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–§–∞–π–ª: `Config/rss2tlg_e2e_test.json`

```json
{
  "database": {
    "host": "127.0.0.1",
    "port": 3306,
    "database": "rss2tlg_test",
    "username": "rss2tlg_user",
    "password": "test_password",
    "charset": "utf8mb4"
  },
  "telegram": {
    "bot_token": "YOUR_BOT_TOKEN",
    "chat_id": "YOUR_CHAT_ID",
    "channel_id": "@YOUR_CHANNEL"
  },
  "openrouter": {
    "api_key": "YOUR_API_KEY",
    "models": [
      "qwen/qwen3-30b-a3b-thinking-2507",
      "qwen/qwen3-235b-a22b-thinking-2507",
      "deepseek/deepseek-v3.2-exp"
    ]
  },
  "feeds": [ /* 5 RSS –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ */ ]
}
```

---

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –¢–µ—Å—Ç 1: –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–±–µ–∑ AI)

**–°–∫—Ä–∏–ø—Ç:** `tests_rss2tlg_e2e_quick.php`  
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ~4 —Å–µ–∫—É–Ω–¥—ã  
**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MariaDB
- –ü–æ–ª—É—á–µ–Ω–∏–µ RSS (3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞, 1 –Ω–æ–≤–æ—Å—Ç—å –∫–∞–∂–¥—ã–π)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å Unicode Fix
- –û—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram
- –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞–º–ø–æ–≤

```bash
cd /home/engine/project
php tests_rss2tlg_e2e_quick.php
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üöÄ –ë—ã—Å—Ç—Ä—ã–π E2E —Ç–µ—Å—Ç RSS2TLG (–±–µ–∑ AI)

‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
‚úÖ MariaDB: 11.3.2-MariaDB-1:11.3.2+maria~ubu2204

...

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø        
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚è±Ô∏è  –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 3.64 —Å–µ–∫
üì° –ò—Å—Ç–æ—á–Ω–∏–∫–æ–≤: 3
üì∞ –ü–æ–ª—É—á–µ–Ω–æ: 3
üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: 3

‚úÖ –¢–ï–°–¢ –ó–ê–í–ï–†–®–ï–ù –£–°–ü–ï–®–ù–û!
```

### –¢–µ—Å—Ç 2: –ü–æ–ª–Ω—ã–π E2E —Ç–µ—Å—Ç (—Å AI)

**–°–∫—Ä–∏–ø—Ç:** `tests_rss2tlg_e2e_FULL.php`  
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ~100 —Å–µ–∫—É–Ω–¥ (1.7 –º–∏–Ω)  
**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- MariaDB 11.3.2
- 5 RSS –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (1 –Ω–æ–≤–æ—Å—Ç—å –∫–∞–∂–¥—ã–π)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å Unicode Fix
- AI –∞–Ω–∞–ª–∏–∑ (3 –Ω–æ–≤–æ—Å—Ç–∏)
- Fallback –º–µ–∂–¥—É AI –º–æ–¥–µ–ª—è–º–∏
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram (–±–æ—Ç + –∫–∞–Ω–∞–ª)
- –î–∞–º–ø—ã –∏ –æ—Ç—á–µ—Ç—ã

```bash
cd /home/engine/project
php tests_rss2tlg_e2e_FULL.php
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë         E2E –¢–µ—Å—Ç RSS2TLG - MariaDB + AI + Telegram       ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

‚ïê‚ïê‚ïê –≠–¢–ê–ü 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚ïê‚ïê‚ïê
‚úÖ MariaDB: 11.3.2-MariaDB-1:11.3.2+maria~ubu2204
‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã

...

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                  –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø                  ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

‚è±Ô∏è  –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 101.16 —Å–µ–∫
üì° RSS –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤: 5
üì∞ –ù–æ–≤–æ—Å—Ç–µ–π: 5
ü§ñ AI –∞–Ω–∞–ª–∏–∑–æ–≤: 3
üì± –ü—É–±–ª–∏–∫–∞—Ü–∏–π: 3
‚ùå –û—à–∏–±–æ–∫: 0

‚úÖ –¢–ï–°–¢ PASSED! –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ø–µ—à–Ω—ã!
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ Unicode Fix

### –ü—Ä–æ–±–ª–µ–º–∞ (–î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

–í CSV –¥–∞–º–ø–∞—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –∫–∞–∫:
```json
["\u041b\u0435\u043d\u0442\u0430 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439"]
```

### –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–ª–∞–≥–∏ `JSON_UNESCAPED_UNICODE | JSON_UNESCAPED_SLASHES` –≤ `ItemRepository::save()`:

**–§–∞–π–ª:** `src/Rss2Tlg/ItemRepository.php`, —Å—Ç—Ä–æ–∫–∏ 67-68

```php
'categories' => !empty($item->categories) ? json_encode($item->categories, JSON_UNESCAPED_UNICODE | JSON_UNESCAPED_SLASHES) : null,
'enclosures' => $item->enclosure !== null ? json_encode($item->enclosure, JSON_UNESCAPED_UNICODE | JSON_UNESCAPED_SLASHES) : null,
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç (–ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

–í CSV –¥–∞–º–ø–∞—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫:
```json
["–õ–µ–Ω—Ç–∞ –Ω–æ–≤–æ—Å—Ç–µ–π"]
["–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ / –¢–µ–ª–µ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏"]
["–†–æ—Å—Å–∏—è"]
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î

```bash
docker exec rss2tlg_mariadb mariadb -urss2tlg_user -ptest_password -D rss2tlg_test -e "SELECT id, title, categories FROM rss2tlg_items LIMIT 5;"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
id | title                                | categories
---|--------------------------------------|----------------------------------
26 | –ü–∞—Ä–æ–º –∏–∑ –¢—Ä–∞–±–∑–æ–Ω–∞ –≤—Å–µ –µ—â–µ –Ω–µ –ø–æ–ª... | ["–õ–µ–Ω—Ç–∞ –Ω–æ–≤–æ—Å—Ç–µ–π"]
27 | IAG –ø–æ–¥–∫–ª—é—á–∏—Ç —Å–∞–º–æ–ª–µ—Ç—ã –∫ —Å–ø—É—Ç–Ω–∏... | ["–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ / –¢–µ–ª–µ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏"]
28 | –ù–∞–ª–æ–≥–æ–≤–∞—è –≤ –ú–æ—Å–∫–≤–µ –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ... | ["–†–æ—Å—Å–∏—è"]
```

‚úÖ **–ö–∏—Ä–∏–ª–ª–∏—Ü–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!**

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ CSV –¥–∞–º–ø–µ

```bash
cd /home/engine/project

php -r '
$fp = fopen("tests/sql/rss2tlg_items_full_20251106_193032.csv", "r");
$header = fgetcsv($fp);
$catIdx = array_search("categories", $header);

echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ categories –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã:\n\n";

$rowNum = 1;
while (($row = fgetcsv($fp)) !== false) {
    $cats = $row[$catIdx] ?? "";
    echo "$rowNum. Categories: $cats\n";
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Unicode escape
    if (strpos($cats, "\\u") !== false) {
        echo "   ‚ùå –û–®–ò–ë–ö–ê: –æ–±–Ω–∞—Ä—É–∂–µ–Ω Unicode escape!\n";
    } else {
        echo "   ‚úÖ OK: –∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –±–µ–∑ escape\n";
    }
    
    $rowNum++;
}

fclose($fp);
'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ü—Ä–æ–≤–µ—Ä–∫–∞ categories –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã:

1. Categories: ["–õ–µ–Ω—Ç–∞ –Ω–æ–≤–æ—Å—Ç–µ–π"]
   ‚úÖ OK: –∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –±–µ–∑ escape
2. Categories: ["–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ / –¢–µ–ª–µ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏"]
   ‚úÖ OK: –∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –±–µ–∑ escape
3. Categories: ["–†–æ—Å—Å–∏—è"]
   ‚úÖ OK: –∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –±–µ–∑ escape
```

---

## üìÅ –û—Ç—á–µ—Ç—ã –∏ –¥–∞–º–ø—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ tests/

```
tests/
‚îú‚îÄ‚îÄ E2E_TEST_FULL_REPORT_20251106_193032.md    # –û—Ç—á–µ—Ç –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
‚îú‚îÄ‚îÄ E2E_TEST_SUMMARY_FINAL.md                  # –§–∏–Ω–∞–ª—å–Ω—ã–π —Å–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç
‚îú‚îÄ‚îÄ E2E_TESTING_GUIDE.md                       # –î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
‚îî‚îÄ‚îÄ sql/
    ‚îú‚îÄ‚îÄ rss2tlg_items_full_20251106_193032.csv
    ‚îú‚îÄ‚îÄ rss2tlg_ai_analysis_full_20251106_193032.csv
    ‚îú‚îÄ‚îÄ rss2tlg_publications_full_20251106_193032.csv
    ‚îú‚îÄ‚îÄ rss2tlg_feed_state_full_20251106_193032.csv
    ‚îú‚îÄ‚îÄ rss2tlg_items_quick_20251106_192646.csv
    ‚îî‚îÄ‚îÄ ...
```

### CSV –¥–∞–º–ø—ã

| –§–∞–π–ª | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ | –ó–∞–ø–∏—Å–µ–π |
|------|-----------|---------|
| `rss2tlg_items_*.csv` | –ù–æ–≤–æ—Å—Ç–∏ –∏–∑ RSS | 3-5 |
| `rss2tlg_ai_analysis_*.csv` | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã AI –∞–Ω–∞–ª–∏–∑–∞ | 3 |
| `rss2tlg_publications_*.csv` | –ü—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Telegram | 6 |
| `rss2tlg_feed_state_*.csv` | –°–æ—Å—Ç–æ—è–Ω–∏–µ RSS –ª–µ–Ω—Ç | 3-5 |

### –û—Ç—á–µ—Ç—ã

1. **E2E_TEST_SUMMARY_FINAL.md** - –ü–æ–¥—Ä–æ–±–Ω—ã–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç —Å:
   - –†–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–æ–π Unicode Fix
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π AI –∞–Ω–∞–ª–∏–∑–∞
   - –ü—É–±–ª–∏–∫–∞—Ü–∏—è–º–∏ –≤ Telegram
   - –í—ã–≤–æ–¥–∞–º–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏

2. **E2E_TEST_FULL_REPORT_20251106_193032.md** - –û—Ç—á–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–∞

---

## üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

### ‚úÖ –¢–µ—Å—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω—ã–º –µ—Å–ª–∏:

1. ‚úÖ MariaDB –∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ
2. ‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. ‚úÖ RSS –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –æ–ø—Ä–æ—à–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
4. ‚úÖ –ù–æ–≤–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ë–î
5. ‚úÖ **Unicode escape –∏—Å–ø—Ä–∞–≤–ª–µ–Ω** - –∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –≤ categories –±–µ–∑ `\uXXXX`
6. ‚úÖ AI –∞–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
7. ‚úÖ –ü—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ Telegram
8. ‚úÖ –î–∞–º–ø—ã CSV —Å–æ–∑–¥–∞–Ω—ã
9. ‚úÖ –õ–æ–≥–∏ –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

### ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ):

- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ AI –º–æ–¥–µ–ª–∏ (`:free`) –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ RSS –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
- Timeout AI –∑–∞–ø—Ä–æ—Å–æ–≤ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏—è

---

## üîß Troubleshooting

### MariaDB –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker logs rss2tlg_mariadb

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker stop rss2tlg_mariadb
docker rm rss2tlg_mariadb
/tmp/mariadb_start.sh
```

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
docker ps | grep mariadb

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
netstat -tuln | grep 3306

# –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
docker exec rss2tlg_mariadb mariadb -urss2tlg_user -ptest_password -D rss2tlg_test -e "SELECT 1"
```

### AI –∑–∞–ø—Ä–æ—Å—ã timeout

–£–≤–µ–ª–∏—á—å—Ç–µ timeout –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```php
$openRouter = new OpenRouter([
    'timeout' => 180,  // 3 –º–∏–Ω—É—Ç—ã
    'max_retries' => 3
], $logger);
```

### Telegram API –æ—à–∏–±–∫–∏

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. Bot token –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
2. Chat ID –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
3. –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–∞–Ω–∞–ª –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
4. –ù–µ—Ç rate limit –æ—Ç Telegram

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ü–æ–ª–Ω—ã–π E2E —Ç–µ—Å—Ç (FINAL):

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | 101.16 —Å–µ–∫ |
| RSS –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ | 5 |
| –ù–æ–≤–æ—Å—Ç–µ–π –ø–æ–ª—É—á–µ–Ω–æ | 5 |
| –ù–æ–≤–æ—Å—Ç–µ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ | 5 |
| AI –∞–Ω–∞–ª–∏–∑–æ–≤ | 3 |
| –ü—É–±–ª–∏–∫–∞—Ü–∏–π | 6 (3 –±–æ—Ç + 3 –∫–∞–Ω–∞–ª) |
| –î–∞–º–ø–æ–≤ | 4 —Ñ–∞–π–ª–∞ |
| –û—à–∏–±–æ–∫ | 0 |

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **PASSED**

---

## üìù –í—ã–≤–æ–¥—ã

### ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ:

1. **Unicode Fix —Ä–∞–±–æ—Ç–∞–µ—Ç** - –∫–∏—Ä–∏–ª–ª–∏—Ü–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –±–µ–∑ escape
2. **MariaDB 11.3.2** - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü** - —Ä–∞–±–æ—Ç–∞–µ—Ç
4. **RSS –æ–ø—Ä–æ—Å** - –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –æ–ø—Ä–æ—à–µ–Ω—ã
5. **AI –∞–Ω–∞–ª–∏–∑** - –Ω–æ–≤–æ—Å—Ç–∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
6. **Fallback** - –º–µ—Ö–∞–Ω–∏–∑–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
7. **Telegram** - –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
8. **–î–∞–º–ø—ã** - CSV —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã

### üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production:

1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞—Ç–Ω—ã–µ AI –º–æ–¥–µ–ª–∏ –±–µ–∑ `:free`
2. Timeout –¥–ª—è AI –∑–∞–ø—Ä–æ—Å–æ–≤: –º–∏–Ω–∏–º—É–º 120 —Å–µ–∫
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ AI –∞–Ω–∞–ª–∏–∑–∞
4. –†–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ fallback
5. Backup –¥–∞–º–ø–æ–≤ –≤ –æ–±–ª–∞–∫–æ

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: 06 –Ω–æ—è–±—Ä—è 2025*
