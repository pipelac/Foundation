# üìö RSS2TLG E2E Testing - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-07 18:20  
**–¢–µ—Å—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è:** v5 (–§–ò–ù–ê–õ–¨–ù–ê–Ø)

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ tests/

```
tests/
‚îú‚îÄ‚îÄ INDEX.md                              # –≠—Ç–æ—Ç —Ñ–∞–π–ª - –Ω–∞–≤–∏–≥–∞—Ü–∏—è
‚îú‚îÄ‚îÄ QUICK_START_E2E.md                   # üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞
‚îú‚îÄ‚îÄ E2E_TEST_v5_FINAL_REPORT.md          # üìä –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç v5
‚îú‚îÄ‚îÄ tests_rss2tlg_e2e_v5.php             # üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç (–∞–∫—Ç–∏–≤–Ω—ã–π)
‚îú‚îÄ‚îÄ reports/
‚îÇ   ‚îî‚îÄ‚îÄ e2e_test_v5_20251107_181921.md   # –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –∑–∞–ø—É—Å–∫–∞
‚îî‚îÄ‚îÄ sql/
    ‚îú‚îÄ‚îÄ rss2tlg_feed_state_20251107_181921.csv      # –î–∞–º–ø —Å–æ—Å—Ç–æ—è–Ω–∏—è –ª–µ–Ω—Ç (5)
    ‚îú‚îÄ‚îÄ rss2tlg_items_20251107_181921.csv           # –î–∞–º–ø –≤—Å–µ—Ö –Ω–æ–≤–æ—Å—Ç–µ–π (316)
    ‚îú‚îÄ‚îÄ rss2tlg_ai_analysis_20251107_181921.csv     # –î–∞–º–ø AI –∞–Ω–∞–ª–∏–∑–∞ (5)
    ‚îî‚îÄ‚îÄ rss2tlg_publications_20251107_181921.csv    # –î–∞–º–ø –ø—É–±–ª–∏–∫–∞—Ü–∏–π (5)
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –î–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
üëâ **–ù–∞—á–Ω–∏—Ç–µ –∑–¥–µ—Å—å:** [QUICK_START_E2E.md](./QUICK_START_E2E.md)

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –ü–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–∞ (–æ—Ç 0 –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞)
- –ö–æ–º–∞–Ω–¥—ã –¥–ª—è MariaDB –≤ Docker
- –ü—Ä–æ–≤–µ—Ä–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~3 –º–∏–Ω—É—Ç—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ + 1.5 –º–∏–Ω—É—Ç—ã —Ç–µ—Å—Ç

---

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### üìä –ì–ª–∞–≤–Ω—ã–π –æ—Ç—á–µ—Ç

#### 1. [E2E_TEST_v5_FINAL_REPORT.md](./E2E_TEST_v5_FINAL_REPORT.md)
**–†–∞–∑–º–µ—Ä:** 16 KB  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç —Å –∞–Ω–∞–ª–∏–∑–æ–º  
**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –ò—Ç–æ–≥–æ–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (RSS, AI, –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)
- –î–µ—Ç–∞–ª—å–Ω—ã–µ AI –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ—Å—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (28 –ø—É–Ω–∫—Ç–æ–≤)
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –°—Ç—Ä—É–∫—Ç—É—Ä—É –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –ë–î
- –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

**–ö–ª—é—á–µ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** PASSED (100% —É—Å–ø–µ—Ö)
- ‚è±Ô∏è **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 86.31 —Å–µ–∫
- üì∞ **–ù–æ–≤–æ—Å—Ç–∏:** 316 –ø–æ–ª—É—á–µ–Ω–æ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ
- ü§ñ **AI –∞–Ω–∞–ª–∏–∑:** 5/5 –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
- üì¢ **–ü—É–±–ª–∏–∫–∞—Ü–∏–∏:** 5/5 –≤ –∫–∞–Ω–∞–ª @kompasDaily
- üîß **MariaDB 11.3.2:** —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

#### 2. [reports/e2e_test_v5_20251107_181921.md](./reports/e2e_test_v5_20251107_181921.md)
**–†–∞–∑–º–µ—Ä:** 1.3 KB  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö—Ä–∞—Ç–∫–∏–π –æ—Ç—á–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞  
**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ (–Ω–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —ç—Ç–∞–ø–∞–º
- AI –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ç–∞–±–ª–∏—á–Ω–æ–º –≤–∏–¥–µ
- –°–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ (–≤ –¥–∞–Ω–Ω–æ–º –∑–∞–ø—É—Å–∫–µ: 0)

---

### üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç

#### 3. [tests_rss2tlg_e2e_v5.php](./tests_rss2tlg_e2e_v5.php)
**–†–∞–∑–º–µ—Ä:** 28 KB  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Å–Ω–æ–≤–Ω–æ–π E2E —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç  

**–≠—Ç–∞–ø—ã —Ç–µ—Å—Ç–∞:**
0. **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –¥–∞–º–ø–æ–≤ –∏ –æ—Ç—á–µ—Ç–æ–≤** ‚öôÔ∏è
1. **–û—á–∏—Å—Ç–∫–∞ —Ç–∞–±–ª–∏—Ü –ë–î** üóëÔ∏è
2. **–û–ø—Ä–æ—Å 5 RSS –ª–µ–Ω—Ç** üì°
3. **AI –∞–Ω–∞–ª–∏–∑ 5 —Å–ª—É—á–∞–π–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π** ü§ñ
4. **–ü—É–±–ª–∏–∫–∞—Ü–∏—è 5 –Ω–æ–≤–æ—Å—Ç–µ–π –≤ Telegram –∫–∞–Ω–∞–ª** üì¢
5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤** üíæ
6. **–°–æ–∑–¥–∞–Ω–∏–µ –¥–∞–º–ø–æ–≤ —Ç–∞–±–ª–∏—Ü** üì¶
7. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤** üìÑ

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- Graceful error handling

**–ó–∞–ø—É—Å–∫:**
```bash
cd /home/engine/project
php src/Rss2Tlg/tests/tests_rss2tlg_e2e_v5.php
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- MariaDB 11.3.2 –Ω–∞ –ø–æ—Ä—Ç—É 3307
- OpenRouter API key: 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
- Telegram Bot Token: 8327641497:AAFTHb3xSTpP3Q6Peg8-OK4nTWTfF7iMWfI
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `src/Rss2Tlg/config/rss2tlg_e2e_test.json`

---

### üì¶ –î–∞–º–ø—ã –¥–∞–Ω–Ω—ã—Ö (sql/)

#### 4. rss2tlg_feed_state_*.csv
**–†–∞–∑–º–µ—Ä:** 942 bytes  
**–ó–∞–ø–∏—Å–µ–π:** 5  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ—Å—Ç–æ—è–Ω–∏–µ RSS –ª–µ–Ω—Ç –ø–æ—Å–ª–µ –æ–ø—Ä–æ—Å–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- feed_id, etag, last_modified, last_status
- last_error, error_count, backoff_until
- fetched_at, created_at, updated_at

**RSS –ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
1. **–†–ò–ê –ù–æ–≤–æ—Å—Ç–∏** - https://ria.ru/export/rss2/
2. **–í–µ–¥–æ–º–æ—Å—Ç–∏ (–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)** - https://www.vedomosti.ru/rss/rubric/technology.xml
3. **–õ–µ–Ω—Ç–∞.—Ä—É (Top 7)** - http://lenta.ru/rss/top7
4. **Ars Technica (AI)** - https://arstechnica.com/ai/feed
5. **TechCrunch (Startups)** - https://techcrunch.com/startups/feed

---

#### 5. rss2tlg_items_*.csv
**–†–∞–∑–º–µ—Ä:** 363 KB  
**–ó–∞–ø–∏—Å–µ–π:** 316  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—Å–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- id, feed_id, guid, link, title
- description, content, authors, categories
- enclosures, pub_date, content_hash
- created_at, updated_at

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ JSON_UNESCAPED_UNICODE –¥–ª—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
- ‚úÖ –ö–∏—Ä–∏–ª–ª–∏—Ü–∞ —á–∏—Ç–∞–µ–º–∞ –±–µ–∑ escape `\u` –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
- ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ guid –∏ content_hash
- ‚úÖ –í—Å–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (authors, categories, enclosures) –≤ JSON

**–ü—Ä–æ–≤–µ—Ä–∫–∞ Unicode:**
```bash
grep -o '\\u[0-9a-fA-F]\{4\}' tests/sql/rss2tlg_items_*.csv
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø—É—Å—Ç–æ (Unicode Fix —Ä–∞–±–æ—Ç–∞–µ—Ç!)
```

---

#### 6. rss2tlg_ai_analysis_*.csv
**–†–∞–∑–º–µ—Ä:** 21 KB  
**–ó–∞–ø–∏—Å–µ–π:** 5  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–µ–∑—É–ª—å—Ç–∞—Ç—ã AI –∞–Ω–∞–ª–∏–∑–∞ –Ω–æ–≤–æ—Å—Ç–µ–π

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- id, item_id, feed_id, prompt_id
- analysis_status, analysis_data (JSON)
- article_language, translation_status
- category_primary, category_secondary
- content_headline, content_summary
- content_keywords, importance_rating
- model_used, tokens_used, processing_time_ms
- cache_hit, analyzed_at

**AI –º–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞:**
- qwen/qwen-2.5-72b-instruct (–≤—Å–µ 5 –Ω–æ–≤–æ—Å—Ç–µ–π)

**–°—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
- –¢–æ–∫–µ–Ω—ã: ~4,274 (prompt: 3,743 + completion: 531)
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: ~12,900 –º—Å (~13 —Å–µ–∫ –Ω–∞ –Ω–æ–≤–æ—Å—Ç—å)
- Cache hit rate: 0% (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫, –∫–µ—à –ø—É—Å—Ç)

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π:**
- Business (2 –Ω–æ–≤–æ—Å—Ç–∏)
- Government (1 –Ω–æ–≤–æ—Å—Ç—å)
- Technology (–≤–æ–∑–º–æ–∂–Ω—ã –µ—â–µ)

---

#### 7. rss2tlg_publications_*.csv
**–†–∞–∑–º–µ—Ä:** 468 bytes  
**–ó–∞–ø–∏—Å–µ–π:** 5  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£—á–µ—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–π –≤ Telegram

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- id, item_id, feed_id
- destination_type, destination_id
- message_id, published_at, created_at

**–ü—É–±–ª–∏–∫–∞—Ü–∏–∏:**
- Destination: @kompasDaily (Telegram Channel)
- Type: channel
- Message IDs: 465, 466, 467, 468, 469

---

## üîß –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### MariaDB 11.3.2
**–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä:** rss2tlg_mariadb  
**–ü–æ—Ä—Ç:** 3307 (—Ö–æ—Å—Ç) ‚Üí 3306 (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)  
**–ë–î:** rss2tlg_test  
**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** rss2tlg_user / testpass123  
**–ö–æ–¥–∏—Ä–æ–≤–∫–∞:** utf8mb4 (collation: utf8mb4_unicode_ci)

**–ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
```bash
docker run -d --name rss2tlg_mariadb \
  -e MYSQL_ROOT_PASSWORD=testpass123 \
  -e MYSQL_DATABASE=rss2tlg_test \
  -e MYSQL_USER=rss2tlg_user \
  -e MYSQL_PASSWORD=testpass123 \
  -p 3307:3306 \
  mariadb:11.3.2 \
  --character-set-server=utf8mb4 \
  --collation-server=utf8mb4_unicode_ci
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
```bash
docker exec rss2tlg_mariadb mariadb -urss2tlg_user -ptestpass123 \
  -e "SELECT VERSION(), DATABASE();"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü:**
```bash
docker exec rss2tlg_mariadb mariadb -urss2tlg_user -ptestpass123 rss2tlg_test \
  -e "SELECT 'rss2tlg_items' as table_name, COUNT(*) FROM rss2tlg_items
      UNION SELECT 'rss2tlg_ai_analysis', COUNT(*) FROM rss2tlg_ai_analysis
      UNION SELECT 'rss2tlg_publications', COUNT(*) FROM rss2tlg_publications
      UNION SELECT 'rss2tlg_feed_state', COUNT(*) FROM rss2tlg_feed_state;"
```

---

### Telegram

**Bot:** @KompasAiBot  
**Bot ID:** 8327641497  
**Token:** 8327641497:AAFTHb3xSTpP3Q6Peg8-OK4nTWTfF7iMWfI  
**Chat ID (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è):** 366442475  
**Channel (–ø—É–±–ª–∏–∫–∞—Ü–∏–∏):** @kompasDaily

**–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞:**
- /start - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã
- /info - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
- /stat - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- /edit - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–†–æ–ª—å –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª–µ:** –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–π)

---

### OpenRouter API

**API Key:** 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  
**Endpoint:** https://openrouter.ai/api/v1

**–ú–æ–¥–µ–ª–∏ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç fallback):**
1. qwen/qwen3-235b:free ‚≠ê (–æ—Å–Ω–æ–≤–Ω–∞—è)
2. qwen/qwen3-30b:free
3. deepseek/deepseek-v3.2-exp
4. qwen/qwen-2.5-72b-instruct ‚úÖ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –≤ —Ç–µ—Å—Ç–µ)

**–§–∞–∫—Ç:** –í —Ç–µ—Å—Ç–µ v5 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ qwen-2.5-72b-instruct –¥–ª—è –≤—Å–µ—Ö 5 –∞–Ω–∞–ª–∏–∑–æ–≤ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ fallback.

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è v5

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 100%

#### 1. RSS Fetching
- ‚úÖ –û–ø—Ä–æ—Å –≤—Å–µ—Ö 5 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (100% —É—Å–ø–µ—Ö)
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ RSS 2.0 –∏ Atom —Ñ–æ—Ä–º–∞—Ç–æ–≤
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (authors, categories, enclosures)
- ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ guid –∏ content_hash
- ‚úÖ 316 –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ–ª—É—á–µ–Ω–æ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ

#### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ 4 —Ç–∞–±–ª–∏—Ü
- ‚úÖ Unicode (utf8mb4) –±–µ–∑ escape –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
- ‚úÖ JSON_UNESCAPED_UNICODE | JSON_UNESCAPED_SLASHES
- ‚úÖ Prepared statements (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection)
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

#### 3. AI Analysis
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ (INoT_v1.xml)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ OpenRouter API
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ JSON —Å reasoning —Ç–µ–≥–∞–º–∏
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ (tokens, model, timing)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ë–î
- ‚úÖ 5/5 –Ω–æ–≤–æ—Å—Ç–µ–π –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

#### 4. Telegram
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ 7 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –±–æ—Ç (–æ —Ö–æ–¥–µ —Ç–µ—Å—Ç–∞)
- ‚úÖ –ü—É–±–ª–∏–∫–∞—Ü–∏—è 5 –Ω–æ–≤–æ—Å—Ç–µ–π –≤ –∫–∞–Ω–∞–ª @kompasDaily
- ‚úÖ HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –≤ –∫–∞–∂–¥–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ message_id

#### 5. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –£—Ä–æ–≤–µ–Ω—å DEBUG
- ‚úÖ JSON —Ñ–æ—Ä–º–∞—Ç –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ SQL –∫–æ–º–∞–Ω–¥—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- ‚úÖ –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤

---

### ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è

#### 1. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ OpenRouter
**–°—Ç–∞—Ç—É—Å:** 0% cache hit (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫)  
**–ü—Ä–∏—á–∏–Ω–∞:** –ö–µ—à –ø—É—Å—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ  
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

#### 2. –°–∫–æ—Ä–æ—Å—Ç—å AI –∞–Ω–∞–ª–∏–∑–∞
**–°—Ç–∞—Ç—É—Å:** ~13 —Å–µ–∫ –Ω–∞ –∞–Ω–∞–ª–∏–∑ –æ–¥–Ω–æ–π –Ω–æ–≤–æ—Å—Ç–∏  
**–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–æ–π –º–æ–¥–µ–ª–∏ qwen-2.5-72b-instruct  
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
- –í–Ω–µ–¥—Ä–∏—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (async)
- –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑—ã –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π

#### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
**–°—Ç–∞—Ç—É—Å:** –ù–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Å –æ—à–∏–±–∫–∞–º–∏  
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã —Å:
- –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ RSS –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ (404, 500)
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º XML
- Timeout'–∞–º–∏
- API errors (OpenRouter rate limits)

---

## üö¶ –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü–æ–∫—Ä—ã—Ç–∏–µ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|----------|-------------|
| FetchRunner | ‚úÖ PASS | 100% | 5/5 –ª–µ–Ω—Ç –æ–ø—Ä–æ—à–µ–Ω—ã |
| ItemRepository | ‚úÖ PASS | 100% | 316 –Ω–æ–≤–æ—Å—Ç–µ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ |
| FeedStateRepository | ‚úÖ PASS | 100% | –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã |
| AIAnalysisService | ‚úÖ PASS | 100% | 5/5 –∞–Ω–∞–ª–∏–∑–æ–≤ —É—Å–ø–µ—à–Ω–æ |
| AIAnalysisRepository | ‚úÖ PASS | 100% | –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã |
| PublicationRepository | ‚úÖ PASS | 100% | 5/5 –ø—É–±–ª–∏–∫–∞—Ü–∏–π |
| TelegramAPI | ‚úÖ PASS | 100% | –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã |
| PromptManager | ‚úÖ PASS | 100% | –ü—Ä–æ–º–ø—Ç INoT_v1 –∑–∞–≥—Ä—É–∂–µ–Ω |
| ConfigLoader | ‚úÖ PASS | 100% | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ |
| Logger | ‚úÖ PASS | 100% | –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| MySQL | ‚úÖ PASS | 100% | MariaDB 11.3.2 —Ä–∞–±–æ—Ç–∞–µ—Ç |
| Http | ‚úÖ PASS | 100% | HTTP –∫–ª–∏–µ–Ω—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ |
| OpenRouter | ‚úÖ PASS | 100% | API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ |

**–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å:** ‚úÖ **100% PASS** (13/13 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

### v5 (2025-11-07 18:17:54) - ‚úÖ –§–ò–ù–ê–õ–¨–ù–ê–Ø
- ‚úÖ –ü–æ–ª–Ω–æ–µ E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å 0 –æ—à–∏–±–æ–∫
- ‚úÖ 5 RSS –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (—Ä—É—Å—Å–∫–∏–µ + –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ)
- ‚úÖ 316 –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ–ª—É—á–µ–Ω–æ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ
- ‚úÖ AI –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ OpenRouter (qwen-2.5-72b-instruct)
- ‚úÖ 5 –ø—É–±–ª–∏–∫–∞—Ü–∏–π –≤ Telegram –∫–∞–Ω–∞–ª —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- ‚úÖ 7 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram –±–æ—Ç
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–º–ø–æ–≤
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –∏ –¥–∞–º–ø—ã —Ç–∞–±–ª–∏—Ü
- ‚úÖ Unicode Fix –ø—Ä–æ–≤–µ—Ä–µ–Ω (–∫–∏—Ä–∏–ª–ª–∏—Ü–∞ —á–∏—Ç–∞–µ–º–∞)
- ‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 86.31 —Å–µ–∫

### v4 (–ø—Ä–µ–¥—ã–¥—É—â–∞—è)
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å AI Failover
- –ù–µ –≤–∫–ª—é—á–∞–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—á–∏—Å—Ç–∫—É

### v3 –∏ —Ä–∞–Ω–µ–µ
- –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –≤–µ—Ä—Å–∏–∏ (–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω—ã)

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

### –í –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ Rss2Tlg/
- [README.md](../README.md) - –ì–ª–∞–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è
- [INDEX.md](../INDEX.md) - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- [docs/API.md](../docs/API.md) - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [../config/rss2tlg_e2e_test.json](../config/rss2tlg_e2e_test.json) - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∞

### –ü—Ä–æ–º–ø—Ç—ã
- [../prompts/INoT_v1.xml](../prompts/INoT_v1.xml) - AI –ø—Ä–æ–º–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –Ω–æ–≤–æ—Å—Ç–µ–π
- [../prompts/README.md](../prompts/README.md) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞
```bash
cd /home/engine/project
php src/Rss2Tlg/tests/tests_rss2tlg_e2e_v5.php
```

### –ó–∞–ø—É—Å–∫ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤—ã–≤–æ–¥–∞
```bash
php src/Rss2Tlg/tests/tests_rss2tlg_e2e_v5.php 2>&1 | tee /tmp/test_output.log
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
tail -50 /home/engine/project/logs/rss2tlg_e2e_test.log

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f /home/engine/project/logs/rss2tlg_e2e_test.log
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
docker exec -it rss2tlg_mariadb mariadb -urss2tlg_user -ptestpass123 rss2tlg_test

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
docker exec rss2tlg_mariadb mariadb -urss2tlg_user -ptestpass123 rss2tlg_test \
  -e "SELECT COUNT(*) FROM rss2tlg_items;"
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–º–ø–æ–≤
```bash
cd /home/engine/project/src/Rss2Tlg/tests/sql

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫
wc -l *.csv

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Unicode
grep -o '\\u[0-9a-fA-F]\{4\}' *.csv

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–≤—ã—Ö 3 —Å—Ç—Ä–æ–∫
head -3 rss2tlg_items_*.csv
```

### –û—á–∏—Å—Ç–∫–∞
```bash
# –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker stop rss2tlg_mariadb && docker rm rss2tlg_mariadb

# –£–¥–∞–ª–µ–Ω–∏–µ –ª–æ–≥–æ–≤
rm -f /home/engine/project/logs/rss2tlg_e2e_test.log*

# –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–º–ø–æ–≤ (–±—É–¥—É—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–∞)
rm -f src/Rss2Tlg/tests/sql/*.csv
rm -f src/Rss2Tlg/tests/reports/*.md
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**Telegram Bot (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è):** @KompasAiBot (chat_id: 366442475)  
**Telegram Channel (–ø—É–±–ª–∏–∫–∞—Ü–∏–∏):** @kompasDaily

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- MariaDB: localhost:3307, rss2tlg_test, rss2tlg_user
- OpenRouter: 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
- Telegram: 8327641497:AAFTHb3xSTpP3Q6Peg8-OK4nTWTfF7iMWfI

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–û–±—â–µ–µ –≤—Ä–µ–º—è:** 86.31 —Å–µ–∫
- **–û–ø—Ä–æ—Å RSS:** ~8 —Å–µ–∫ (5 –ª–µ–Ω—Ç)
- **AI –∞–Ω–∞–ª–∏–∑:** ~63 —Å–µ–∫ (5 –Ω–æ–≤–æ—Å—Ç–µ–π, 12.6 —Å–µ–∫/–Ω–æ–≤–æ—Å—Ç—å)
- **–ü—É–±–ª–∏–∫–∞—Ü–∏–∏:** ~10 —Å–µ–∫ (5 –Ω–æ–≤–æ—Å—Ç–µ–π, 2 —Å–µ–∫/–Ω–æ–≤–æ—Å—Ç—å)

### –î–∞–Ω–Ω—ã–µ
- **RSS –ª–µ–Ω—Ç—ã:** 5/5 (100%)
- **–ù–æ–≤–æ—Å—Ç–∏:** 316 –ø–æ–ª—É—á–µ–Ω–æ, 316 —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ (100%)
- **AI –∞–Ω–∞–ª–∏–∑:** 5/5 (100%)
- **–ü—É–±–ª–∏–∫–∞—Ü–∏–∏:** 5/5 (100%)
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** 7/7 (100%)

### –ö–∞—á–µ—Å—Ç–≤–æ
- **–û—à–∏–±–∫–∏:** 0
- **Unicode:** ‚úÖ –ö–∏—Ä–∏–ª–ª–∏—Ü–∞ —á–∏—Ç–∞–µ–º–∞
- **–ë–î:** ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ
- **–û—Ç—á–µ—Ç—ã:** ‚úÖ –ü–æ–ª–Ω—ã–µ

---

**–ü–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è:** v5 (–§–ò–ù–ê–õ–¨–ù–ê–Ø)  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-11-07 18:20  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **Production Ready (100% PASS)**

**üéâ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**
