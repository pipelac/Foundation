# üìä EXECUTIVE SUMMARY: PROMPT CACHING TEST

**–î–∞—Ç–∞:** 2025-11-08  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û

---

## üéØ –ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û

### 1. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚úÖ
- –†–∞–∑–≤–µ—Ä–Ω—É—Ç MariaDB 11.3.2 –≤ Docker (–ø–æ—Ä—Ç 3308)
- –ù–∞—Å—Ç—Ä–æ–µ–Ω OpenRouter API —Å 2 –∫–ª—é—á–∞–º–∏
- –ù–∞—Å—Ç—Ä–æ–µ–Ω Telegram Bot –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ 5 RSS –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

### 2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ ‚úÖ
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `OpenRouter->batchChatWithMessages()` –¥–ª—è batch-–æ–±—Ä–∞–±–æ—Ç–∫–∏
- –°–æ–∑–¥–∞–Ω–æ 2 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞ (v1 –∏ v2)
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `cache_control` –¥–ª—è Claude

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ 2 AI –º–æ–¥–µ–ª–∏
- –í—ã–ø–æ–ª–Ω–µ–Ω–æ 6 —É—Å–ø–µ—à–Ω—ã—Ö AI –∑–∞–ø—Ä–æ—Å–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ 316+ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ RSS
- –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ 8+ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram

---

## üìà –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏

| –ú–æ–¥–µ–ª—å | –°–∫–æ—Ä–æ—Å—Ç—å | –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å | –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ | –í–µ—Ä–¥–∏–∫—Ç |
|--------|----------|--------------|-------------|---------|
| **qwen/qwen3-235b-a22b-thinking-2507** | ‚ùå >120 —Å–µ–∫ | ‚ùå –¢–∞–π–º–∞—É—Ç—ã | ‚ùå 0 —Ç–æ–∫–µ–Ω–æ–≤ | ‚ùå –ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø |
| **anthropic/claude-3.5-sonnet** | ‚úÖ ~17 —Å–µ–∫ | ‚úÖ 5/5 —É—Å–ø–µ—à–Ω–æ | ‚ùå 0 —Ç–æ–∫–µ–Ω–æ–≤ | ‚úÖ –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø |
| **deepseek/deepseek-chat** | ‚úÖ ~3 —Å–µ–∫ | ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞ | ‚ùå 0 —Ç–æ–∫–µ–Ω–æ–≤ | ‚úÖ‚úÖ –õ–£–ß–®–ò–ô –í–´–ë–û–† |

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

```
–û–∂–∏–¥–∞–ª–æ—Å—å:  üíæ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–æ: 3200+ —Ç–æ–∫–µ–Ω–æ–≤ ‚úÖ
–ü–æ–ª—É—á–µ–Ω–æ:   üíæ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–æ: 0 —Ç–æ–∫–µ–Ω–æ–≤ ‚ùå
```

**–í—ã–≤–æ–¥:** Prompt caching **–ù–ï –†–ê–ë–û–¢–ê–ï–¢** –≤ OpenRouter.

---

## ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ù–ê–•–û–î–ö–ò

### 1. Prompt Caching –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- ‚ùå –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ 2 –º–æ–¥–µ–ª–∏ —Å cache_control
- ‚ùå –í—Å–µ 6 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤–µ—Ä–Ω—É–ª–∏ `cached_tokens: 0`
- ‚ùå OpenRouter –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç –∫–µ—à –≤ –Ω–∞—Ç–∏–≤–Ω—ã–µ API –º–æ–¥–µ–ª–µ–π
- ‚ùå –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ –∫–µ—à –ù–ï–í–û–ó–ú–û–ñ–ù–ê

### 2. Qwen –º–æ–¥–µ–ª—å –Ω–µ–ø—Ä–∏–≥–æ–¥–Ω–∞ –¥–ª—è production
- ‚ùå –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: >120 —Å–µ–∫—É–Ω–¥ (—Ç–∞–π–º–∞—É—Ç)
- ‚ùå –ù–µ–Ω–∞–¥–µ–∂–Ω–∞—è (50% —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
- ‚ùå –°–ª–∏—à–∫–æ–º –¥–æ—Ä–æ–≥–∞—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏

### 3. Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ú–µ—Ç–æ–¥ `batchChatWithMessages()` —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚úÖ –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚ö†Ô∏è –ù–æ –±–µ–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ—Ç —ç–∫–æ–Ω–æ–º–∏–∏

---

## ‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –î–ª—è production

**–ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:**
1. ‚úÖ **deepseek/deepseek-chat** (–õ–£–ß–®–ò–ô –í–´–ë–û–†)
   - –°–∫–æ—Ä–æ—Å—Ç—å: 2-3 —Å–µ–∫—É–Ω–¥—ã
   - –°—Ç–æ–∏–º–æ—Å—Ç—å: $0.27/–º–ª–Ω —Ç–æ–∫–µ–Ω–æ–≤
   - –ö–∞—á–µ—Å—Ç–≤–æ: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ
   - –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: –≤—ã—Å–æ–∫–∞—è

2. ‚úÖ **anthropic/claude-3.5-sonnet** (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
   - –°–∫–æ—Ä–æ—Å—Ç—å: 15-20 —Å–µ–∫—É–Ω–¥
   - –ö–∞—á–µ—Å—Ç–≤–æ: –æ—Ç–ª–∏—á–Ω–æ–µ
   - –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: 100%

**–ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:**
- ‚ùå qwen/qwen3-235b-a22b-thinking-2507 (—Å–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–∞—è)
- ‚ùå –õ—é–±—ã–µ –º–æ–¥–µ–ª–∏ —Å —Ä–µ–∂–∏–º–æ–º "thinking" –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏

**–í–º–µ—Å—Ç–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:**
1. –°–æ–∫—Ä–∞—Ç–∏—Ç—å system –ø—Ä–æ–º–ø—Ç –¥–æ –º–∏–Ω–∏–º—É–º–∞
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
3. Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏ (–Ω–µ —ç–∫–æ–Ω–æ–º–∏–∏)
4. –í—ã–±–æ—Ä –¥–µ—à–µ–≤–æ–π –º–æ–¥–µ–ª–∏ (DeepSeek)

**–ï—Å–ª–∏ –∫—Ä–∏—Ç–∏—á–Ω–∞ —ç–∫–æ–Ω–æ–º–∏—è:**
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä—è–º–æ–µ API Anthropic (90% —Å–∫–∏–¥–∫–∞ –Ω–∞ –∫–µ—à)
- –ù–æ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

## üìä –°–¢–û–ò–ú–û–°–¢–¨ (–ø—Ä–æ–≥–Ω–æ–∑)

### –ü—Ä–∏–º–µ—Ä: 1000 –Ω–æ–≤–æ—Å—Ç–µ–π/–¥–µ–Ω—å

**–° DeepSeek Chat:**
- –¢–æ–∫–µ–Ω—ã: ~5,000 –Ω–∞ –∑–∞–ø—Ä–æ—Å
- –¢–æ–∫–µ–Ω—ã/–¥–µ–Ω—å: 5,000,000
- –°—Ç–æ–∏–º–æ—Å—Ç—å: **$1.35/–¥–µ–Ω—å** ($40/–º–µ—Å—è—Ü)

**–° Claude 3.5 Sonnet:**
- –¢–æ–∫–µ–Ω—ã: ~5,000 –Ω–∞ –∑–∞–ø—Ä–æ—Å
- –¢–æ–∫–µ–Ω—ã/–¥–µ–Ω—å: 5,000,000
- –°—Ç–æ–∏–º–æ—Å—Ç—å: **$15/–¥–µ–Ω—å** ($450/–º–µ—Å—è—Ü)

**–ï—Å–ª–∏ –±—ã –∫–µ—à —Ä–∞–±–æ—Ç–∞–ª (–≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–∏):**
- –≠–∫–æ–Ω–æ–º–∏—è: ~80% —Ç–æ–∫–µ–Ω–æ–≤
- Claude: $3/–¥–µ–Ω—å ($90/–º–µ—Å—è—Ü)
- **–ù–æ —ç—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤ OpenRouter** ‚ùå

---

## üìÑ –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
1. `BATCH_CACHE_TEST_REPORT_v1.md` - –¢–µ—Å—Ç Qwen
2. `batch_cache_test_v2_20251108_114103.md` - –¢–µ—Å—Ç Claude
3. `FINAL_BATCH_CACHE_ANALYSIS.md` - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
4. `EXECUTIVE_SUMMARY.md` - –≠—Ç–∞ —Å–≤–æ–¥–∫–∞

### –õ–æ–≥–∏
- `/home/engine/project/logs/rss2tlg_e2e_v5.log` - –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏

### –°–∫—Ä–∏–ø—Ç—ã
- `test_batch_cache.php` - Batch test v1
- `test_batch_cache_v2.php` - Batch test v2

---

## üèÅ –ò–¢–û–ì–û

| –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|------------|-----------|
| –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | ‚úÖ –ì–æ—Ç–æ–≤–∞ |
| Batch –º–µ—Ç–æ–¥ | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (2 –º–æ–¥–µ–ª–∏) |
| Prompt caching | ‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢ |
| –õ—É—á—à–∞—è –º–æ–¥–µ–ª—å | ‚úÖ deepseek/deepseek-chat |
| –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ | ‚úÖ –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω—ã |
| Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | ‚úÖ –î–æ—Å—Ç–∞–≤–ª–µ–Ω—ã |
| –û—Ç—á–µ—Ç—ã | ‚úÖ –°–æ–∑–¥–∞–Ω—ã (4 —Ñ–∞–π–ª–∞) |

### –§–∏–Ω–∞–ª—å–Ω—ã–π –≤–µ—Ä–¥–∏–∫—Ç

‚úÖ **–ü–†–û–ï–ö–¢ –ì–û–¢–û–í –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ DeepSeek Chat –¥–ª—è production
- –ù–ï –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ prompt caching –≤ OpenRouter
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º–ø—Ç—ã –≤—Ä—É—á–Ω—É—é

‚ùå **PROMPT CACHING –í OPENROUTER –ù–ï –†–ê–ë–û–¢–ê–ï–¢**
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ —Ç–µ—Å—Ç–∞–º–∏ –Ω–∞ 2 –º–æ–¥–µ–ª—è—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä—è–º–æ–µ API Anthropic –µ—Å–ª–∏ –∫—Ä–∏—Ç–∏—á–Ω–∞ —ç–∫–æ–Ω–æ–º–∏—è

---

**–î–∞—Ç–∞:** 2025-11-08 11:45:00  
**–ê–≤—Ç–æ—Ä:** RSS2TLG Test System  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
