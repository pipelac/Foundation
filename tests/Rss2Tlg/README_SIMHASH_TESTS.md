# Simhash Tests –¥–ª—è RSS2TLG

–ù–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã Simhash –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –≤ —Å–∏—Å—Ç–µ–º–µ RSS2TLG.

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ—Å—Ç—ã

### 1. SimhashSimilarityTest.php
**Test ID:** RSS2TLG-SIMHASH-SIMILARITY-001  
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ Simhash —Ä–∞–∑–ª–∏—á–∞—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–¥–Ω–æ–π –Ω–æ–≤–æ—Å—Ç–∏

**–ó–∞–ø—É—Å–∫:**
```bash
php tests/Rss2Tlg/SimhashSimilarityTest.php
```

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç:**
- ‚úÖ –í—ã—á–∏—Å–ª–µ–Ω–∏–µ Simhash –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤ —Ä–∞–∑–Ω–æ–π –¥–ª–∏–Ω—ã
- ‚úÖ –†–∞—Å—á–µ—Ç Hamming Distance –º–µ–∂–¥—É –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º –∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–æ–≤ —Å—Ö–æ–∂–µ—Å—Ç–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–Ω—ã—Ö —Ç–µ–∫—Å—Ç–∞—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å (980 —Å–∏–º–≤–æ–ª–æ–≤)
- 5 –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (562-700 —Å–∏–º–≤–æ–ª–æ–≤)
- Hamming Distance: 21-32 –±–∏—Ç–∞ (—Å—Ä–µ–¥–Ω–µ–µ: 25.4)
- –°—Ö–æ–∂–µ—Å—Ç—å: 50-67% (—Å—Ä–µ–¥–Ω–µ–µ: 60.31%)
- –í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–∞–∫ **"–†–∞–∑–Ω—ã–µ"** (–ù–ï –¥—É–±–ª–∏–∫–∞—Ç—ã) ‚úì

**–í—ã–≤–æ–¥:**
```
–ü–æ—Ä–æ–≥ similarity_threshold: 3 –±–∏—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ù–ï –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –∫–∞–∫ –¥—É–±–ª–∏–∫–∞—Ç—ã
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–æ—á–Ω—ã–µ –∫–æ–ø–∏–∏ –∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
```

**–û—Ç—á–µ—Ç:** `tests/Rss2Tlg/SIMHASH_SIMILARITY_REPORT.md`

---

### 2. SimhashDeduplicationTest.php
**Test ID:** RSS2TLG-SIMHASH-001  
**–¶–µ–ª—å:** –ü–æ–ª–Ω–æ–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Simhash –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö RSS-–ª–µ–Ω—Ç–∞—Ö

**–ó–∞–ø—É—Å–∫:**
```bash
php tests/Rss2Tlg/SimhashDeduplicationTest.php
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- MySQL —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω
- –ö–æ–Ω—Ñ–∏–≥: `config/rss2tlg_simhash_test.json`
- Telegram –±–æ—Ç (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç:**
- ‚úÖ Fetching –∏ –ø–∞—Ä—Å–∏–Ω–≥ RSS/Atom –ª–µ–Ω—Ç
- ‚úÖ –í—ã—á–∏—Å–ª–µ–Ω–∏–µ Simhash –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
- ‚úÖ –ü–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
- ‚úÖ –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–∞—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Ä–æ–≥–æ–≤
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—É—Å–∫):**
- 316 –Ω–æ–≤–æ—Å—Ç–µ–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ (5 RSS –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)
- 100% –Ω–æ–≤–æ—Å—Ç–µ–π —Å Simhash
- 0 –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (–æ–∂–∏–¥–∞–µ–º–æ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ~8 –Ω–æ–≤–æ—Å—Ç–µ–π/—Å–µ–∫

**–û—Ç—á–µ—Ç:** `docs/RSS2TLG_SIMHASH_DEDUP_REPORT.md`

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Ä–æ–≥–∏

–ù–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤:

| Hamming Distance | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|------------------|----------|------------|
| **0-1 –±–∏—Ç** | –ò–¥–µ–Ω—Ç–∏—á–Ω—ã | –¢–æ—á–Ω—ã–µ –∫–æ–ø–∏–∏ |
| **2-3 –±–∏—Ç** ‚úÖ | –û—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏ | **–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä–æ–≥** |
| **4-6 –±–∏—Ç** | –ü–æ—Ö–æ–∂–∏ | –ú–∏–Ω–æ—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è |
| **7-10 –±–∏—Ç** | –£–º–µ—Ä–µ–Ω–Ω–æ –ø–æ—Ö–æ–∂–∏ | –û–¥–Ω–∞ —Ç–µ–º–∞, —Ä–∞–∑–Ω–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ |
| **11+ –±–∏—Ç** | –†–∞–∑–Ω—ã–µ | –†–∞–∑–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ |

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏

**–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

```json
{
  "deduplication": {
    "enabled": true,
    "method": "simhash",
    "time_window_hours": 48,
    "similarity_threshold": 3
  }
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `enabled`: –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é
- `method`: –ú–µ—Ç–æ–¥ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ (`simhash` –∏–ª–∏ `md5`)
- `time_window_hours`: –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–∏—Å–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ: 24-72 —á–∞—Å–∞)
- `similarity_threshold`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ Hamming Distance –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ: 2-3)

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**SimhashService:**
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ Simhash: ~0.001 —Å–µ–∫ –Ω–∞ —Ç–µ–∫—Å—Ç
- –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö (100 –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤): ~0.01 —Å–µ–∫
- Hamming Distance: ~0.0001 —Å–µ–∫ –Ω–∞ –ø–∞—Ä—É

**–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Ç–µ–Ω –Ω–æ–≤–æ—Å—Ç–µ–π –≤ –º–∏–Ω—É—Ç—É
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –±–æ–ª—å—à–∏–º –≤—Ä–µ–º–µ–Ω–Ω—ã–º –æ–∫–Ω–æ–º
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å RSS –ø–∞—Ä—Å–∏–Ω–≥–∞

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** swatchion/simhash v1.0.0  
**–ê–ª–≥–æ—Ä–∏—Ç–º:** Simhash (locality-sensitive hashing)  
**–†–∞–∑–º–µ—Ä —Ö–µ—à–∞:** 64 –±–∏—Ç–∞  
**–ú–µ—Ç—Ä–∏–∫–∞:** Hamming Distance

**–§–æ—Ä–º—É–ª–∞ —Å—Ö–æ–∂–µ—Å—Ç–∏:**
```
–°—Ö–æ–∂–µ—Å—Ç—å (%) = (1 - Hamming Distance / 64) √ó 100
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/Rss2Tlg/
‚îú‚îÄ‚îÄ SimhashSimilarityTest.php          # –¢–µ—Å—Ç —Å—Ö–æ–∂–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ SimhashDeduplicationTest.php       # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ SIMHASH_SIMILARITY_REPORT.md       # –û—Ç—á–µ—Ç –æ —Å—Ö–æ–∂–µ—Å—Ç–∏
‚îî‚îÄ‚îÄ README_SIMHASH_TESTS.md            # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

docs/
‚îî‚îÄ‚îÄ RSS2TLG_SIMHASH_DEDUP_REPORT.md    # –ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç –æ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏

src/Rss2Tlg/
‚îú‚îÄ‚îÄ SimhashService.php                  # –°–µ—Ä–≤–∏—Å Simhash
‚îú‚îÄ‚îÄ ItemRepository.php                  # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π
‚îî‚îÄ‚îÄ FetchRunner.php                     # Fetcher —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Simhash
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**1. –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç —Å—Ö–æ–∂–µ—Å—Ç–∏ (–±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π):**
```bash
php tests/Rss2Tlg/SimhashSimilarityTest.php
```

**2. –ü–æ–ª–Ω—ã–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å MySQL (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω)
sudo service mysql start

# –ò–ª–∏ —á–µ—Ä–µ–∑ Docker
docker run -d --name mysql-rss2tlg-test \
  -e MYSQL_ROOT_PASSWORD=root \
  -e MYSQL_DATABASE=rss2tlg_test \
  -p 3306:3306 mariadb:10.11

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
php tests/Rss2Tlg/SimhashDeduplicationTest.php
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

- ‚úÖ –¢–æ—á–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã (0-1 –±–∏—Ç)
- ‚úÖ –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (2-3 –±–∏—Ç–∞)
- ‚úÖ –ü–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã (21-32 –±–∏—Ç–∞)
- ‚úÖ –†–∞–∑–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –Ω–∞ –æ–¥–Ω—É —Ç–µ–º—É (25+ –±–∏—Ç)
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ (40+ –±–∏—Ç)

## üìù –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

**v1.0.0** (2025-11-04)
- ‚úÖ –°–æ–∑–¥–∞–Ω SimhashSimilarityTest.php
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –Ω–∞ –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–∞—Ö
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω –ø–æ—Ä–æ–≥ similarity_threshold: 3
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –æ—Ç—á–µ—Ç—ã

**v0.9.0** (2025-11-03)
- ‚úÖ SimhashDeduplicationTest.php
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ItemRepository
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 316 –Ω–æ–≤–æ—Å—Ç—è—Ö

---

**–ê–≤—Ç–æ—Ä:** Automated Testing System  
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-11-04  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
