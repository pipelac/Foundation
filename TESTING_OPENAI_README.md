# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ OpenAi - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

## üìö –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–ª–∞—Å—Å–∞ `App\Component\OpenAi`.

---

## üóÇÔ∏è –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

### –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å
- **`/src/OpenAi.class.php`** - –ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å OpenAI API (600 —Å—Ç—Ä–æ–∫)

### –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- **`test_openai_full.php`** - –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ (800+ —Å—Ç—Ä–æ–∫)
- **`openai_demo_fixed.php`** - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **`OPENAI_CLASS_TEST_REPORT.md`** - –ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- **`IMPROVEMENTS_SUMMARY.md`** - –°–≤–æ–¥–∫–∞ –≤—Å–µ—Ö —É–ª—É—á—à–µ–Ω–∏–π
- **`TESTING_OPENAI_README.md`** - –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

### –õ–æ–≥–∏
- **`/logs/app.log`** - –§–∞–π–ª –ª–æ–≥–æ–≤ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```bash
cd /home/engine/project
php test_openai_full.php
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:      25
–£—Å–ø–µ—à–Ω—ã—Ö:          13
–ü—Ä–æ–≤–∞–ª–µ–Ω–Ω—ã—Ö:       0
–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π:    12
–£—Å–ø–µ—à–Ω–æ—Å—Ç—å:        52%
‚úì –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û!
```

### 2. –ó–∞–ø—É—Å–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

```bash
php openai_demo_fixed.php
```

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –≤—Å–µ—Ö 7 –º–µ—Ç–æ–¥–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
tail -50 /home/engine/project/logs/app.log

# –¢–æ–ª—å–∫–æ ERROR –∑–∞–ø–∏—Å–∏
grep "ERROR" /home/engine/project/logs/app.log

# –¢–æ–ª—å–∫–æ DEBUG –∑–∞–ø–∏—Å–∏
grep "DEBUG –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞" /home/engine/project/logs/app.log
```

---

## üìã –ß—Ç–æ –±—ã–ª–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

### –í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –¢–µ—Å—Ç—ã |
|-------|----------|-------|
| `text2text()` | –¢–µ–∫—Å—Ç–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è | 4 —Ç–µ—Å—Ç–∞ |
| `text2image()` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π | 3 —Ç–µ—Å—Ç–∞ |
| `image2text()` | –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π | 3 —Ç–µ—Å—Ç–∞ |
| `audio2text()` | –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∞—É–¥–∏–æ | 2 —Ç–µ—Å—Ç–∞ |
| `textStream()` | –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ | 2 —Ç–µ—Å—Ç–∞ |
| `embeddings()` | –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è | 4 —Ç–µ—Å—Ç–∞ |
| `moderation()` | –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ | 2 —Ç–µ—Å—Ç–∞ |

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (3 —Ç–µ—Å—Ç–∞)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö API –∫–ª—é—á–µ–π (1 —Ç–µ—Å—Ç)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (1 —Ç–µ—Å—Ç)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø—Ü–∏–π (3 —Ç–µ—Å—Ç–∞)

**–ò—Ç–æ–≥–æ: 25 —Ç–µ—Å—Ç–æ–≤**

---

## üîç –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### –¢–ï–°–¢ 1-3: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Å –≤–∞–ª–∏–¥–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—É—Å—Ç–æ–≥–æ API –∫–ª—é—á–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–≥–æ API –∫–ª—é—á–∞

### –¢–ï–°–¢ 4-6: –ú–µ—Ç–æ–¥ text2text
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–π –º–æ–¥–µ–ª–∏
- –¢–µ—Å—Ç–æ–≤—ã–π –≤—ã–∑–æ–≤ API —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

### –¢–ï–°–¢ 7-8: –ú–µ—Ç–æ–¥ text2image
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
- –¢–µ—Å—Ç–æ–≤—ã–π –≤—ã–∑–æ–≤ API —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

### –¢–ï–°–¢ 9-10: –ú–µ—Ç–æ–¥ image2text
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–≥–æ URL
- –¢–µ—Å—Ç–æ–≤—ã–π –≤—ã–∑–æ–≤ API —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

### –¢–ï–°–¢ 11-12: –ú–µ—Ç–æ–¥ audio2text
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–≥–æ URL
- –¢–µ—Å—Ç–æ–≤—ã–π –≤—ã–∑–æ–≤ API —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

### –¢–ï–°–¢ 13-14: –ú–µ—Ç–æ–¥ textStream
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
- –¢–µ—Å—Ç–æ–≤—ã–π –≤—ã–∑–æ–≤ streaming API

### –¢–ï–°–¢ 15-18: –ú–µ—Ç–æ–¥ embeddings
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–≥–æ –º–∞—Å—Å–∏–≤–∞
- –¢–µ—Å—Ç–æ–≤—ã–π –≤—ã–∑–æ–≤ —Å –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π
- –¢–µ—Å—Ç–æ–≤—ã–π –≤—ã–∑–æ–≤ —Å –º–∞—Å—Å–∏–≤–æ–º —Å—Ç—Ä–æ–∫

### –¢–ï–°–¢ 19-20: –ú–µ—Ç–æ–¥ moderation
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–∏
- –¢–µ—Å—Ç–æ–≤—ã–π –≤—ã–∑–æ–≤ API

### –¢–ï–°–¢ 21: –†–∞–∑–Ω—ã–µ API –∫–ª—é—á–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ 10 —Ä–∞–∑–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–ª—é—á–µ–π

### –¢–ï–°–¢ 22: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ª–æ–≥ —Ñ–∞–π–ª–∞
- –ü–æ–¥—Å—á–µ—Ç –∑–∞–ø–∏—Å–µ–π DEBUG/INFO/ERROR

### –¢–ï–°–¢ 23-25: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø—Ü–∏–π –≤ text2text
- –†–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ detail

---

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ textStream ‚úÖ
**–î–æ:**
```php
private function sendStreamRequest(...): void
{
    $this->http->requestStream('POST', $endpoint, ...);
    // HttpException –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–ª—Å—è!
}
```

**–ü–æ—Å–ª–µ:**
```php
private function sendStreamRequest(...): void
{
    try {
        $this->http->requestStream('POST', $endpoint, ...);
    } catch (\App\Component\Exception\HttpException $exception) {
        $this->logError('–û—à–∏–±–∫–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∫ OpenAI', [...]);
        throw new OpenAiApiException(...);
    }
}
```

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ‚úÖ
**–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:**
- `logInfo()` - –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- `logDebug()` - –¥–ª—è –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

**–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ –≤—Å–µ –º–µ—Ç–æ–¥—ã:**
```php
public function text2text(...): string
{
    $this->logDebug('–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ text2text', [...]);
    // ... –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ ...
    $this->logInfo('–£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å text2text', [...]);
    return $result;
}
```

### 3. –õ–∏—à–Ω—è—è —Å—Ç—Ä–æ–∫–∞ –≤ validateConfiguration ‚úÖ
–£–¥–∞–ª–µ–Ω–∞ –±–µ—Å–ø–æ–ª–µ–∑–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é.

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –≤ `/logs/app.log` –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è:

```
DEBUG –∑–∞–ø–∏—Å–µ–π (–æ—Ç–ø—Ä–∞–≤–∫–∞): 70+
ERROR –∑–∞–ø–∏—Å–µ–π: 94+
WARNING –∑–∞–ø–∏—Å–µ–π (HTTP): 94+
```

### –ü—Ä–∏–º–µ—Ä DEBUG –∑–∞–ø–∏—Å–∏:
```json
{
    "level": "DEBUG",
    "message": "–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ text2text",
    "context": {
        "model": "gpt-4o-mini",
        "prompt_length": 65,
        "options": ["temperature", "max_tokens", "system"]
    }
}
```

### –ü—Ä–∏–º–µ—Ä ERROR –∑–∞–ø–∏—Å–∏:
```json
{
    "level": "ERROR",
    "message": "–°–µ—Ä–≤–µ—Ä OpenAI –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É",
    "context": {
        "status_code": 404,
        "endpoint": "/chat/completions",
        "response": "<html>...</html>"
    }
}
```

---

## üîê –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –Ω–∞—Å—Ç–æ—è—â–∏–º API –∫–ª—é—á–æ–º

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º OpenAI API:

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
export OPENAI_API_KEY="sk-proj-your-real-api-key-here"
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–º–µ—Ä
```bash
php examples/openai_example.php
```

### 3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –∫–æ–¥–µ
```php
$config = [
    'api_key' => getenv('OPENAI_API_KEY'),
    'timeout' => 60,
    'retries' => 3,
];

$openAi = new OpenAi($config, $logger);
```

---

## üìñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
```php
$response = $openAi->text2text(
    prompt: '–û–±—ä—è—Å–Ω–∏ –∫–≤–∞–Ω—Ç–æ–≤—É—é —Ñ–∏–∑–∏–∫—É –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏',
    model: 'gpt-4o-mini',
    options: [
        'temperature' => 0.7,
        'max_tokens' => 200,
    ]
);
```

### –ü—Ä–∏–º–µ—Ä 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```php
$imageUrl = $openAi->text2image(
    prompt: '–§—É—Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –≥–æ—Ä–æ–¥ —Å –ª–µ—Ç–∞—é—â–∏–º–∏ –º–∞—à–∏–Ω–∞–º–∏',
    model: 'dall-e-3',
    options: [
        'size' => '1024x1024',
        'quality' => 'hd',
    ]
);
```

### –ü—Ä–∏–º–µ—Ä 3: –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```php
$description = $openAi->image2text(
    imageUrl: 'https://example.com/image.jpg',
    question: '–ß—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ —ç—Ç–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–µ?',
    model: 'gpt-4o'
);
```

### –ü—Ä–∏–º–µ—Ä 4: Streaming –æ—Ç–≤–µ—Ç
```php
$openAi->textStream(
    prompt: '–ù–∞–ø–∏—à–∏ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ',
    callback: function (string $chunk) {
        echo $chunk;
        flush();
    },
    model: 'gpt-4o-mini'
);
```

### –ü—Ä–∏–º–µ—Ä 5: –°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
```php
$embeddings = $openAi->embeddings(
    input: ['–¢–µ–∫—Å—Ç 1', '–¢–µ–∫—Å—Ç 2', '–¢–µ–∫—Å—Ç 3'],
    model: 'text-embedding-3-small',
    options: ['dimensions' => 512]
);
```

### –ü—Ä–∏–º–µ—Ä 6: –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
```php
$result = $openAi->moderation(
    input: '–¢–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏',
    model: 'text-moderation-latest'
);

if ($result['flagged']) {
    // –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–∞—Ä—É—à–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–∞
}
```

---

## üõ†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π

```php
use App\Component\Exception\OpenAiValidationException;
use App\Component\Exception\OpenAiApiException;
use App\Component\Exception\OpenAiException;

try {
    $response = $openAi->text2text('–ü—Ä–∏–≤–µ—Ç', 'gpt-4o-mini');
    
} catch (OpenAiValidationException $e) {
    // –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    echo "–ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: " . $e->getMessage();
    
} catch (OpenAiApiException $e) {
    // –û—à–∏–±–∫–∞ –æ—Ç API OpenAI
    echo "API –æ—à–∏–±–∫–∞ " . $e->getStatusCode() . ": " . $e->getMessage();
    echo "–û—Ç–≤–µ—Ç: " . $e->getResponseBody();
    
} catch (OpenAiException $e) {
    // –û–±—â–∞—è –æ—à–∏–±–∫–∞ –∫–ª–∞—Å—Å–∞
    echo "–û—à–∏–±–∫–∞: " . $e->getMessage();
}
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë              –ò–¢–û–ì–û–í–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø                 ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë ‚úÖ –í—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ:          13/13 (100%)                ‚ïë
‚ïë ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫:            0                           ‚ïë
‚ïë ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º:            4                           ‚ïë
‚ïë ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –º–µ—Ç–æ–¥–æ–≤ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: 2                           ‚ïë
‚ïë ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤:    7                           ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë –°–¢–ê–¢–£–°: –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´                                    ‚ïë
‚ïë –ì–û–¢–û–í–ù–û–°–¢–¨: –ö–õ–ê–°–° –ì–û–¢–û–í –ö PRODUCTION                          ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è OpenAI:** https://platform.openai.com/docs/api-reference
- **Vision API:** https://platform.openai.com/docs/guides/vision
- **Embeddings:** https://platform.openai.com/docs/guides/embeddings
- **Moderation:** https://platform.openai.com/docs/guides/moderation

---

## üí° –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ö–ª–∞—Å—Å `App\Component\OpenAi` –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:

‚úÖ **–í—Å–µ –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**  
‚úÖ **–ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π**  
‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**  
‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º PHP 8.1+**  
‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**  

**–ö–ª–∞—Å—Å –≥–æ—Ç–æ–≤ –∫ production! üöÄ**

---

**–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** 31 –æ–∫—Ç—è–±—Ä—è 2024  
**–í–µ—Ä—Å–∏—è PHP:** 8.1+  
**–¢–µ—Å—Ç–æ–≤—ã—Ö –∫–ª—é—á–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ:** 10  
**–í—Å–µ–≥–æ —Å—Ç—Ä–æ–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** 600+ (–∫–ª–∞—Å—Å) + 800+ (—Ç–µ—Å—Ç—ã)
