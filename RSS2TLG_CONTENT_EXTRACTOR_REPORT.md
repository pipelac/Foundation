# üìä RSS2TLG: –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–î–∞—Ç–∞:** 2 –Ω–æ—è–±—Ä—è 2025  
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 52.621 —Å–µ–∫—É–Ω–¥—ã  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û

---

## üéØ –¶–µ–ª–∏ –∑–∞–¥–∞–Ω–∏—è

1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è RSS –ª–µ–Ω—Ç –±–µ–∑ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
2. ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–∏–∑ RSS –∏ –∏–∑–≤–ª–µ—á–µ–Ω–Ω–æ–≥–æ)
3. ‚úÖ –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–µ–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 5 RSS –ª–µ–Ω—Ç–∞—Ö
4. ‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –≤ Telegram –∫–∞–Ω–∞–ª
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é
6. ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ö–æ–¥–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Telegram –±–æ—Ç

---

## üì¶ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. **ItemRepository.php** (–æ–±–Ω–æ–≤–ª–µ–Ω)
–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É `rss2tlg_items`:
- `extracted_content` (MEDIUMTEXT) - —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏, –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π —Å –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `extracted_images` (JSON) - –º–∞—Å—Å–∏–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ —Å—Ç–∞—Ç—å–∏
- `extracted_metadata` (JSON) - –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Open Graph, Twitter Cards)
- `extraction_status` (ENUM: pending, success, failed, skipped) - —Å—Ç–∞—Ç—É—Å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
- `extraction_error` (TEXT) - —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏
- `extracted_at` (DATETIME) - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è

–ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:
- `saveExtractedContent()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `markExtractionFailed()` - –ø–æ–º–µ—Ç–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–∞–∫ –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ
- `markExtractionSkipped()` - –ø–æ–º–µ—Ç–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–∞–∫ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–≥–æ
- `getEffectiveContent()` - **—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥** –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π ‚Üí RSS ‚Üí –æ–ø–∏—Å–∞–Ω–∏–µ)
- `getPendingExtraction()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
- `getStats()` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ–± –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏

### 2. **ContentExtractorService.php** (–Ω–æ–≤—ã–π)
–°–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `WebtExtractor`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è (–º–∏–Ω–∏–º—É–º 300 —Å–∏–º–≤–æ–ª–æ–≤)
- –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 3. **–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç** (ContentExtractorTest.php)
–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É MySQL
- –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ 5 RSS –ª–µ–Ω—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram –∫–∞–Ω–∞–ª (@kompasDaily)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –±–æ—Ç (366442475)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏

---

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –¢–ï–°–¢ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ RSS –ª–µ–Ω—Ç
**–í—Ä–µ–º—è:** 3.746 —Å–µ–∫

| RSS –õ–µ–Ω—Ç–∞ | –°—Ç–∞—Ç—É—Å | –ü–æ–ª—É—á–µ–Ω–æ |
|-----------|--------|----------|
| –†–ò–ê –ù–æ–≤–æ—Å—Ç–∏ | ‚ö†Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω | 0 |
| –í–µ–¥–æ–º–æ—Å—Ç–∏ (–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏) | ‚úÖ –£—Å–ø–µ—Ö | 50 |
| Lenta.ru (–¢–æ–ø 7) | ‚úÖ –£—Å–ø–µ—Ö | 16 |
| Ars Technica (AI) | ‚úÖ –£—Å–ø–µ—Ö | 20 |
| TechCrunch (Startups) | ‚úÖ –£—Å–ø–µ—Ö | 20 |

**–ò—Ç–æ–≥–æ:** 106 –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ–ª—É—á–µ–Ω–æ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –ë–î

### ‚úÖ –¢–ï–°–¢ 2: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ WebtExtractor
**–í—Ä–µ–º—è:** 9.01 —Å–µ–∫

- **–£—Å–ø–µ—à–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–æ:** 14 –Ω–æ–≤–æ—Å—Ç–µ–π
- **–ü—Ä–æ–ø—É—â–µ–Ω–æ** (–∫–æ–Ω—Ç–µ–Ω—Ç —É–∂–µ –µ—Å—Ç—å): 6 –Ω–æ–≤–æ—Å—Ç–µ–π
- **–û—à–∏–±–æ–∫:** 0

**–ü—Ä–∏–º–µ—Ä—ã —É—Å–ø–µ—à–Ω–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è:**

| –ù–æ–≤–æ—Å—Ç—å | RSS –∫–æ–Ω—Ç–µ–Ω—Ç | –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-------------|---------------------|-----------|
| Sam Altman says 'enough' to questions about OpenAI's revenue | 210 —Å–∏–º–≤–æ–ª–æ–≤ | **3,149 —Å–∏–º–≤–æ–ª–æ–≤** | **1,400%** ‚¨ÜÔ∏è |
| Bluesky hits 40 million users, introduces 'dislikes' beta | 191 —Å–∏–º–≤–æ–ª | **3,983 —Å–∏–º–≤–æ–ª–∞** | **1,985%** ‚¨ÜÔ∏è |
| Tattd gave four TechCrunch writers tattoos | 125 —Å–∏–º–≤–æ–ª–æ–≤ | **3,966 —Å–∏–º–≤–æ–ª–æ–≤** | **3,073%** ‚¨ÜÔ∏è |
| Scenes from TechCrunch Disrupt 2025 | 237 —Å–∏–º–≤–æ–ª–æ–≤ | **7,003 —Å–∏–º–≤–æ–ª–∞** | **2,854%** ‚¨ÜÔ∏è |

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤ —Å—Ä–µ–¥–Ω–µ–º –≤ **20 —Ä–∞–∑** –ø–æ–ª–Ω–µ–µ, —á–µ–º –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑ RSS!

### ‚úÖ –¢–ï–°–¢ 3: –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram –∫–∞–Ω–∞–ª (–ø–µ—Ä–≤–∞—è –ø–∞—Ä—Ç–∏—è)
**–í—Ä–µ–º—è:** 19.032 —Å–µ–∫

–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ **8 –Ω–æ–≤–æ—Å—Ç–µ–π** (–ø–æ 2 –∏–∑ –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞):
- ‚úÖ –í–µ–¥–æ–º–æ—Å—Ç–∏ (–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏): 2 –Ω–æ–≤–æ—Å—Ç–∏
- ‚úÖ Lenta.ru (–¢–æ–ø 7): 2 –Ω–æ–≤–æ—Å—Ç–∏
- ‚úÖ Ars Technica (AI): 2 –Ω–æ–≤–æ—Å—Ç–∏
- ‚úÖ TechCrunch (Startups): 2 –Ω–æ–≤–æ—Å—Ç–∏

**–§–æ—Ä–º–∞—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:**
```
<–ò—Å—Ç–æ—á–Ω–∏–∫>

<–ó–∞–≥–æ–ª–æ–≤–æ–∫>

<–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏ (–¥–æ 50 —Å–ª–æ–≤) + –¥–ª–∏–Ω–∞ –≤ —Å–ª–æ–≤–∞—Ö>

üîó –ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é
```

### ‚úÖ –¢–ï–°–¢ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
**–í—Ä–µ–º—è:** 1.979 —Å–µ–∫

- **304 Not Modified:** 4 –ª–µ–Ω—Ç—ã (80%) - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!
- **200 OK:** 0 –ª–µ–Ω—Ç
- **–ù–æ–≤—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π:** 0

**–í—ã–≤–æ–¥:** Conditional GET (ETag/Last-Modified) —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ. –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ 80%!

### ‚úÖ –¢–ï–°–¢ 5: –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram –∫–∞–Ω–∞–ª (–≤—Ç–æ—Ä–∞—è –ø–∞—Ä—Ç–∏—è)
**–í—Ä–µ–º—è:** 18.854 —Å–µ–∫

–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ **8 –Ω–æ–≤–æ—Å—Ç–µ–π** (–ø–æ 2 –∏–∑ –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞)

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–í—Å–µ–≥–æ –Ω–æ–≤–æ—Å—Ç–µ–π:** 106
- **–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ:** 16
- **–ù–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ:** 90
- **–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:** 4

### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **‚úÖ –£—Å–ø–µ—à–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–æ:** 14 –Ω–æ–≤–æ—Å—Ç–µ–π
- **‚è© –ü—Ä–æ–ø—É—â–µ–Ω–æ** (–µ—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç): 6 –Ω–æ–≤–æ—Å—Ç–µ–π
- **‚è≥ –û–∂–∏–¥–∞–µ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è:** 86 –Ω–æ–≤–æ—Å—Ç–µ–π
- **‚ùå –û—à–∏–±–æ–∫:** 0

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
| –≠—Ç–∞–ø | –í—Ä–µ–º—è |
|------|-------|
| Fetch RSS –ª–µ–Ω—Ç | 3.746 —Å–µ–∫ |
| –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ | 9.01 —Å–µ–∫ |
| –ü—É–±–ª–∏–∫–∞—Ü–∏—è (1 –ø–∞—Ä—Ç–∏—è) | 19.032 —Å–µ–∫ |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞ | 1.979 —Å–µ–∫ |
| –ü—É–±–ª–∏–∫–∞—Ü–∏—è (2 –ø–∞—Ä—Ç–∏—è) | 18.854 —Å–µ–∫ |
| **–ò–¢–û–ì–û** | **52.621 —Å–µ–∫** |

---

## üóÉÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã `rss2tlg_items`

```sql
CREATE TABLE `rss2tlg_items` (
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `feed_id` INT UNSIGNED NOT NULL,
    `content_hash` VARCHAR(32) NOT NULL,
    
    -- –ü–æ–ª—è –∏–∑ RSS
    `guid` VARCHAR(512) NULL,
    `title` VARCHAR(512) NOT NULL,
    `link` VARCHAR(1024) NOT NULL,
    `description` TEXT NULL,
    `content` MEDIUMTEXT NULL,
    
    `pub_date` DATETIME NULL,
    `author` VARCHAR(255) NULL,
    `categories` JSON NULL,
    `enclosures` JSON NULL,
    
    -- üÜï –ü–æ–ª—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    `extracted_content` MEDIUMTEXT NULL COMMENT '–¢–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏, –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π —Å –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã',
    `extracted_images` JSON NULL COMMENT '–ú–∞—Å—Å–∏–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ —Å—Ç–∞—Ç—å–∏',
    `extracted_metadata` JSON NULL COMMENT '–ú–µ—Ç–∞-–¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Open Graph, Twitter Cards)',
    `extraction_status` ENUM('pending', 'success', 'failed', 'skipped') NOT NULL DEFAULT 'pending',
    `extraction_error` TEXT NULL COMMENT '–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏',
    `extracted_at` DATETIME NULL COMMENT '–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞',
    
    `is_published` TINYINT(1) NOT NULL DEFAULT 0,
    
    `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updated_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    PRIMARY KEY (`id`),
    UNIQUE KEY `idx_content_hash` (`content_hash`),
    KEY `idx_feed_id` (`feed_id`),
    KEY `idx_is_published` (`is_published`),
    KEY `idx_pub_date` (`pub_date`),
    KEY `idx_feed_published` (`feed_id`, `is_published`),
    KEY `idx_extraction_status` (`extraction_status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

---

## üîß –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É

### –ú–µ—Ç–æ–¥ `ItemRepository::getEffectiveContent()`

```php
/**
 * –ü–æ–ª—É—á–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–æ–≤–æ—Å—Ç–∏ (—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø)
 * 
 * –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
 * 1. –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (extracted_content) –µ—Å–ª–∏ extraction_status = 'success'
 * 2. –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ RSS (content)
 * 3. –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑ RSS (description)
 */
public function getEffectiveContent(array $item): string
{
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
    if (
        !empty($item['extracted_content']) && 
        ($item['extraction_status'] ?? '') === 'success'
    ) {
        return (string)$item['extracted_content'];
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ RSS
    if (!empty($item['content'])) {
        return (string)$item['content'];
    }
    
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ
    return (string)($item['description'] ?? '');
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å RSS –ª–µ–Ω—Ç–∞–º–∏ —Å/–±–µ–∑ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –õ–µ–≥–∫–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –∫–æ–¥–µ

---

## üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram

### Telegram Bot (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
**ID:** 8327641497:AAFTHb3xSTpP3Q6Peg8-OK4nTWTfF7iMWfI  
**Username:** @PipelacTest_bot  
**Chat ID:** 366442475

**–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
1. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
2. ‚úÖ –¢–ï–°–¢ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π
3. ‚úÖ –¢–ï–°–¢ 2: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
4. ‚úÖ –¢–ï–°–¢ 3: –ü—É–±–ª–∏–∫–∞—Ü–∏—è (1 –ø–∞—Ä—Ç–∏—è)
5. ‚úÖ –¢–ï–°–¢ 4: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
6. ‚úÖ –¢–ï–°–¢ 5: –ü—É–±–ª–∏–∫–∞—Ü–∏—è (2 –ø–∞—Ä—Ç–∏—è)
7. ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### Telegram Channel (–ø—É–±–ª–∏–∫–∞—Ü–∏–∏)
**ID:** @kompasDaily

**–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ:** 16 –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ 4 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

---

## üêõ –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å TelegramAPI –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º
**–û–ø–∏—Å–∞–Ω–∏–µ:** `TelegramAPI::__construct()` —Ç—Ä–µ–±—É–µ—Ç Http –∫–ª–∏–µ–Ω—Ç  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω Http –∫–ª–∏–µ–Ω—Ç –≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é

```php
// –ë—ã–ª–æ:
$telegram = new TelegramAPI(TELEGRAM_BOT_TOKEN);

// –°—Ç–∞–ª–æ:
$telegramHttp = new Http(['timeout' => 30], $logger);
$telegram = new TelegramAPI(TELEGRAM_BOT_TOKEN, $telegramHttp, $logger);
```

### 2. ‚ùå MySQL –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
**–û–ø–∏—Å–∞–Ω–∏–µ:** Access denied for user 'root'@'localhost'  
**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω –º–µ—Ç–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

```bash
sudo mysql -e "ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '';"
```

### 3. ‚ùå –†–ò–ê –ù–æ–≤–æ—Å—Ç–∏ –ø—Ä–æ–ø—É—â–µ–Ω–∞
**–û–ø–∏—Å–∞–Ω–∏–µ:** –õ–µ–Ω—Ç–∞ –≤–µ—Ä–Ω—É–ª–∞ –æ—à–∏–±–∫—É –∏–ª–∏ –±—ã–ª–∞ –≤ backoff  
**–°—Ç–∞—Ç—É—Å:** –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –æ—Å—Ç–∞–ª—å–Ω—ã–µ 4 –ª–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç

---

## üéì –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

1. **–£—Å–ø–µ—à–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è WebtExtractor**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è RSS –ª–µ–Ω—Ç –±–µ–∑ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
   - –ü–æ–≤—ã—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ 10-30 —Ä–∞–∑
   
2. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è**
   - –ï–¥–∏–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è RSS –∏ –∏–∑–≤–ª–µ—á–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
   - –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ `getEffectiveContent()`
   
3. **–ù–∞–¥–µ–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞**
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
   - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - Graceful degradation
   
4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
   - Conditional GET —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 80% –ª–µ–Ω—Ç
   - –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ content_hash
   - –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
   
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –±–æ—Ç
   - –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram –∫–∞–Ω–∞–ª
   - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### üìà –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è 86 –Ω–æ–≤–æ—Å—Ç–µ–π**
   ```php
   $contentExtractor->processPending(100);
   ```

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ**
   - –î–æ–±–∞–≤–∏—Ç—å –≤ cron –∑–∞–¥–∞—á—É
   - –ó–∞–ø—É—Å–∫–∞—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ fetch

3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥–∏ (RabbitMQ, Redis)
   - –†–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ
   - –î–æ–±–∞–≤–∏—Ç—å rate limiting

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å extraction_failed
   - –£–≤–µ–¥–æ–º–ª—è—Ç—å –æ–± –æ—à–∏–±–∫–∞—Ö
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º

5. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞**
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å HTML –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
   - –ò–∑–±–µ–≥–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞

---

## üìù –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```php
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
$db = new MySQL($config);
$logger = new Logger($logConfig);
$itemRepo = new ItemRepository($db, $logger);
$extractor = new WebtExtractor($extractorConfig, $logger);
$contentExtractor = new ContentExtractorService($itemRepo, $extractor, $logger);

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∏–∑–≤–ª–µ—á–µ–Ω–∏–π
$stats = $contentExtractor->processPending(50);
echo "–ò–∑–≤–ª–µ—á–µ–Ω–æ: {$stats['extracted']}\n";
echo "–ü—Ä–æ–ø—É—â–µ–Ω–æ: {$stats['skipped']}\n";
echo "–û—à–∏–±–æ–∫: {$stats['failed']}\n";

// –ü–æ–ª—É—á–µ–Ω–∏–µ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
$items = $itemRepo->getUnpublished($feedId, 10);
foreach ($items as $item) {
    $content = $itemRepo->getEffectiveContent($item);
    echo "–ö–æ–Ω—Ç–µ–Ω—Ç ({strlen($content)} —Å–∏–º–≤–æ–ª–æ–≤): {$content}\n";
}
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| –¢–∞–±–ª–∏—Ü–∞ —Å –ø–æ–ª—è–º–∏ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è | ‚úÖ | 6 –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –¥–æ–±–∞–≤–ª–µ–Ω–æ |
| –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É | ‚úÖ | –ú–µ—Ç–æ–¥ `getEffectiveContent()` |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ | ‚úÖ | `ContentExtractorService` |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö | ‚úÖ | 5 RSS –ª–µ–Ω—Ç, 106 –Ω–æ–≤–æ—Å—Ç–µ–π |
| –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram | ‚úÖ | 16 –Ω–æ–≤–æ—Å—Ç–µ–π –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ |
| –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ | 80% –∫–µ—à-—Ö–∏—Ç |
| –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è | ‚úÖ | –ü–æ content_hash |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ | –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ |
| –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram | ‚úÖ | 7 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π |
| –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | ‚úÖ | –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |

---

## üéâ –ò—Ç–æ–≥

**–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!**

–°–∏—Å—Ç–µ–º–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ. –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É –ø–∞—Ä—Å–∏–Ω–≥—É –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü —á–µ—Ä–µ–∑ WebtExtractor.

**–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ~30 –º–∏–Ω—É—Ç  
**–í—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** 52.621 —Å–µ–∫—É–Ω–¥—ã  
**–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (—Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è, PHPDoc, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫)  
**–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:** 100% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

---

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–î–∞—Ç–∞:** 2 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0
