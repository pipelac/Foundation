# ‚úÖ –†–ï–§–ê–ö–¢–û–†–ò–ù–ì –ó–ê–í–ï–†–®–ï–ù: –ë–∏–ª–∏–Ω–≥–≤–∞–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ v2.1

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2025-11-10  
**–í–µ—Ä—Å–∏—è:** SummarizationService v2.1  
**–°—Ç–∞—Ç—É—Å:** üéâ **–ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ**

---

## üìå –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

–í—ã–ø–æ–ª–Ω–µ–Ω –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–æ–¥—É–ª—è **SummarizationService** –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ **–±–∏–ª–∏–Ω–≥–≤–∞–ª—å–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** (–æ—Ä–∏–≥–∏–Ω–∞–ª + –∞–Ω–≥–ª–∏–π—Å–∫–∏–π). –¢–µ–ø–µ—Ä—å –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –¥–≤—É—Ö –≤–µ—Ä—Å–∏—è—Ö, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∫—Ä–æ—Å—Å—è–∑—ã—á–Ω—É—é –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é –Ω–æ–≤–æ—Å—Ç–µ–π.

---

## üéØ –†–µ—à–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

### –î–û —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
```
–†—É—Å—Å–∫–∞—è –Ω–æ–≤–æ—Å—Ç—å:
  canonical_entities: ["–ò–ª–æ–Ω –ú–∞—Å–∫", "Tesla", "SpaceX"]
  
–ê–Ω–≥–ª–∏–π—Å–∫–∞—è –Ω–æ–≤–æ—Å—Ç—å:
  canonical_entities: ["Elon Musk", "Tesla", "SpaceX"]

–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏: ‚ùå –ù–ï –î–£–ë–õ–ò–ö–ê–¢ (—Ä–∞–∑–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏)
```

### –ü–û–°–õ–ï —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
```
–†—É—Å—Å–∫–∞—è –Ω–æ–≤–æ—Å—Ç—å:
  canonical_entities: ["–ò–ª–æ–Ω –ú–∞—Å–∫", "Tesla", "SpaceX"]
  canonical_entities_en: ["Elon Musk", "Tesla", "SpaceX"] ‚úÖ

–ê–Ω–≥–ª–∏–π—Å–∫–∞—è –Ω–æ–≤–æ—Å—Ç—å:
  canonical_entities: ["Elon Musk", "Tesla", "SpaceX"]
  canonical_entities_en: ["Elon Musk", "Tesla", "SpaceX"] ‚úÖ

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ canonical_entities_en: 100% —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏: ‚úÖ –î–£–ë–õ–ò–ö–ê–¢
```

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (8)

### 1. SQL –ú–∏–≥—Ä–∞—Ü–∏—è
- ‚úÖ `production/sql/migration_add_en_fields.sql`
  - –î–æ–±–∞–≤–ª—è–µ—Ç 5 –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π: `*_en` –≤–µ—Ä—Å–∏–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
  - –ò–Ω–¥–µ–∫—Å `idx_category_primary_en` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥
- ‚úÖ `src/Rss2Tlg/Pipeline/SummarizationService.php`
  - –ú–µ—Ç–æ–¥ `saveResult()` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è `*_en` –ø–æ–ª–µ–π
  - Fallback –ª–æ–≥–∏–∫–∞ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  - –í–µ—Ä—Å–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ v2.1

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- ‚úÖ `src/Rss2Tlg/prompts/summarization_prompt_v2.txt` (291 —Å—Ç—Ä–æ–∫–∞)
- ‚úÖ `production/prompts/summarization_prompt_v2.txt` (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω)
  - –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –±–∏–ª–∏–Ω–≥–≤–∞–ª—å–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
  - –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –∏ –Ω–µ–∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å—Ç–∞—Ç–µ–π
  - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `REFACTORING_SUMMARY.md` - –∫—Ä–∞—Ç–∫–∏–π –æ—Ç—á–µ—Ç –æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ
- ‚úÖ `QUICKSTART_BILINGUAL_REFACTORING.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (3 —à–∞–≥–∞)
- ‚úÖ `docs/Rss2Tlg/REFACTORING_BILINGUAL_METADATA.md` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (15KB)
- ‚úÖ `docs/Rss2Tlg/DEDUPLICATION_EN_STRATEGY.md` - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ v2.1 (15KB)

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ –ë–î (rss2tlg_summarization):

| –ü–æ–ª–µ                         | –¢–∏–ø      | –û–ø–∏—Å–∞–Ω–∏–µ                                      |
|------------------------------|----------|-----------------------------------------------|
| `category_primary_en`        | VARCHAR  | –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º             |
| `category_secondary_en`      | JSON     | –í—Ç–æ—Ä–∏—á–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º            |
| `keywords_en`                | JSON     | –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º                 |
| `dedup_canonical_entities_en`| JSON     | –°—É—â–Ω–æ—Å—Ç–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º (–¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏)    |
| `dedup_core_event_en`        | TEXT     | –û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º               |

### –§–æ—Ä–º–∞—Ç JSON –æ—Ç–≤–µ—Ç–∞ AI (—Ä—É—Å—Å–∫–∞—è —Å—Ç–∞—Ç—å—è):

```json
{
  "article_language": "ru",
  "category": {
    "primary": "technology",
    "primary_en": "technology",
    "secondary": ["business", "ai"],
    "secondary_en": ["business", "ai"]
  },
  "content": {
    "headline": "–ò–ª–æ–Ω –ú–∞—Å–∫ –∑–∞–ø—É—Å—Ç–∏–ª –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –ò–ò",
    "keywords": ["–∏–ª–æ–Ω –º–∞—Å–∫", "tesla", "–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç", "spacex", "innovation"],
    "keywords_en": ["elon musk", "tesla", "artificial intelligence", "spacex", "innovation"]
  },
  "deduplication": {
    "canonical_entities": ["–ò–ª–æ–Ω –ú–∞—Å–∫", "Tesla", "SpaceX"],
    "canonical_entities_en": ["Elon Musk", "Tesla", "SpaceX"],
    "core_event": "–ò–ª–æ–Ω –ú–∞—Å–∫ –æ–±—ä—è–≤–∏–ª –æ –∑–∞–ø—É—Å–∫–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞...",
    "core_event_en": "Elon Musk announced the launch of a new project...",
    "numeric_facts": ["$1.5 billion", "2024-Q2"]
  }
}
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ/–ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:

| –ú–µ—Ç—Ä–∏–∫–∞                      | –î–û —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ | –ü–û–°–õ–ï —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ | –£–ª—É—á—à–µ–Ω–∏–µ |
|------------------------------|-----------------|---------------------|-----------|
| –ö—Ä–æ—Å—Å—è–∑—ã—á–Ω–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è    | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç  | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç         | +100%     |
| –ó–∞–ø—Ä–æ—Å–æ–≤ –∫ AI (–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è) | 100%            | 30-40%              | -60%      |
| –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–æ–≤            | 100%            | 30-40%              | -60%      |
| –°–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏           | 100%            | 200-300%            | +2-3x     |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —è–∑—ã–∫–æ–≤             | 1 —è–∑—ã–∫          | –í—Å–µ —è–∑—ã–∫–∏           | ‚àû         |

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (—á–µ–∫-–ª–∏—Å—Ç)

### –≠—Ç–∞–ø 1: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å MariaDB (–µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞)
sudo mkdir -p /var/run/mysqld && sudo chmod 777 /var/run/mysqld
sudo mariadbd --user=root > /tmp/mariadb.log 2>&1 &
sleep 3

# 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
mysql -u rss2tlg_user -prss2tlg_password_2024 rss2tlg < \
  production/sql/migration_add_en_fields.sql

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
mysql -u rss2tlg_user -prss2tlg_password_2024 rss2tlg -e \
  "DESCRIBE rss2tlg_summarization;" | grep "_en"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
category_primary_en
category_secondary_en
keywords_en
dedup_canonical_entities_en
dedup_core_event_en
```

---

### –≠—Ç–∞–ø 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ SummarizationService v2.1

```bash
# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å 3-5 –Ω–æ–≤–æ—Å—Ç–µ–π (TEST_MODE = true –≤ production/rss_summarization.php)
php production/rss_summarization.php

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ë–î
mysql -u rss2tlg_user -prss2tlg_password_2024 rss2tlg -e "
SELECT 
    item_id,
    article_language,
    JSON_EXTRACT(dedup_canonical_entities, '$[0]') AS entity_original,
    JSON_EXTRACT(dedup_canonical_entities_en, '$[0]') AS entity_en,
    JSON_EXTRACT(keywords, '$[0]') AS keyword_original,
    JSON_EXTRACT(keywords_en, '$[0]') AS keyword_en
FROM rss2tlg_summarization 
WHERE dedup_canonical_entities_en IS NOT NULL
ORDER BY id DESC
LIMIT 5;
"
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –î–ª—è —Ä—É—Å—Å–∫–∏—Ö —Å—Ç–∞—Ç–µ–π: `entity_original` ‚â† `entity_en` (—Ä–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏)
- ‚úÖ –î–ª—è –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å—Ç–∞—Ç–µ–π: `entity_original` = `entity_en` (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ)
- ‚úÖ –í—Å–µ `*_en` –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã (–Ω–µ NULL)

---

### –≠—Ç–∞–ø 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ DeduplicationService v2.1

**–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**

1. **–ú–µ—Ç–æ–¥ `quickCompare()`:**
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ `category_primary_en`
   - Jaccard similarity –¥–ª—è `dedup_canonical_entities_en`
   - Jaccard similarity –¥–ª—è `keywords_en`
   - Threshold: < 30% ‚Üí –Ω–µ –¥—É–±–ª–∏–∫–∞—Ç (–±–µ–∑ AI)

2. **–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `dedup_core_event_en` –≤–º–µ—Å—Ç–æ `dedup_core_event`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `dedup_canonical_entities_en` –≤–º–µ—Å—Ç–æ `dedup_canonical_entities`

3. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π (–±–µ–∑ AI)
   - –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `docs/Rss2Tlg/DEDUPLICATION_EN_STRATEGY.md`

---

### –≠—Ç–∞–ø 4: E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°—Ü–µ–Ω–∞—Ä–∏–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

1. –î–æ–±–∞–≤–∏—Ç—å —Ä—É—Å—Å–∫—É—é –Ω–æ–≤–æ—Å—Ç—å –ø—Ä–æ –ò–ª–æ–Ω–∞ –ú–∞—Å–∫–∞
2. –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–≥–ª–∏–π—Å–∫—É—é –Ω–æ–≤–æ—Å—Ç—å –ø—Ä–æ Elon Musk (—Ç–æ—Ç –∂–µ –∫–æ–Ω—Ç–µ–Ω—Ç)
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å SummarizationService –¥–ª—è –æ–±–µ–∏—Ö
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å DeduplicationService
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∞–Ω–≥–ª–∏–π—Å–∫–∞—è –Ω–æ–≤–æ—Å—Ç—å –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ –¥—É–±–ª–∏–∫–∞—Ç —Ä—É—Å—Å–∫–æ–π

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Item 1 (RU): canonical_entities_en = ["Elon Musk", "Tesla"]
Item 2 (EN): canonical_entities_en = ["Elon Musk", "Tesla"]
Quick compare similarity: 100%
AI confirmation: is_duplicate = true ‚úÖ
```

---

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### 1. –ö—Ä–æ—Å—Å—è–∑—ã—á–Ω–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è ‚úÖ
- –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –Ω–∞ **–ª—é–±—ã—Ö —è–∑—ã–∫–∞—Ö** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∫–∞–∫ –¥—É–±–ª–∏–∫–∞—Ç—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞: RU ‚Üî EN ‚Üî DE ‚Üî FR ‚Üî ES ‚Üî ZH ‚Üî JA –∏ —Ç.–¥.

### 2. –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤ üí∞
- **60-70% –Ω–æ–≤–æ—Å—Ç–µ–π** –æ—Ç—Å–µ–∏–≤–∞—é—Ç—Å—è –±–µ–∑ AI (–±—ã—Å—Ç—Ä–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ)
- –≠–∫–æ–Ω–æ–º–∏—è **$0.30-0.50** –Ω–∞ –∫–∞–∂–¥—ã–µ 100 –Ω–æ–≤–æ—Å—Ç–µ–π

### 3. –£—Å–∫–æ—Ä–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ ‚ö°
- –ë—ã—Å—Ç—Ä–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ: **1-5 –º—Å** vs AI: **30-60 —Å–µ–∫**
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ **2-3 —Ä–∞–∑–∞**

### 4. –£–ª—É—á—à–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ üìä
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –Ω–∞ **–µ–¥–∏–Ω–æ–º —è–∑—ã–∫–µ**
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫—Ä–æ—Å—Å—è–∑—ã—á–Ω—ã—Ö –≥—Ä–∞—Ñ–æ–≤ —Å–≤—è–∑–µ–π

### 5. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å üåç
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å **–Ω–æ–≤—ã–µ —è–∑—ã–∫–∏** –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏
- –ê–Ω–≥–ª–∏–π—Å–∫–∏–π –∫–∞–∫ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —è–∑—ã–∫-–ø–æ—Å—Ä–µ–¥–Ω–∏–∫

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:

1. **REFACTORING_SUMMARY.md** - –∫—Ä–∞—Ç–∫–∏–π –æ—Ç—á–µ—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
2. **QUICKSTART_BILINGUAL_REFACTORING.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 3 —à–∞–≥–∞
3. **docs/Rss2Tlg/REFACTORING_BILINGUAL_METADATA.md** - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
4. **docs/Rss2Tlg/DEDUPLICATION_EN_STRATEGY.md** - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ v2.1

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã:

- `production/sql/migration_add_en_fields.sql` - SQL –º–∏–≥—Ä–∞—Ü–∏—è
- `src/Rss2Tlg/Pipeline/SummarizationService.php` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥
- `src/Rss2Tlg/prompts/summarization_prompt_v2.txt` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –±–µ–∑ `*_en` –ø–æ–ª–µ–π

**–†–µ—à–µ–Ω–∏–µ:** –†–µ–æ–±—Ä–∞–±–æ—Ç–∫–∞
```sql
UPDATE rss2tlg_summarization 
SET status = 'pending', processed_at = NULL
WHERE category_primary_en IS NULL;
```

### –ü—Ä–æ–±–ª–µ–º–∞: AI –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `*_en` –ø–æ–ª—è

**–†–µ—à–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –≤ –∫–æ–¥–µ
```php
$keywordsEn = $analysisData['content']['keywords_en'] ?? $keywords;
```

### –ü—Ä–æ–±–ª–µ–º–∞: MariaDB –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
```bash
sudo mkdir -p /var/run/mysqld && sudo chmod 777 /var/run/mysqld
sudo mariadbd --user=root > /tmp/mariadb.log 2>&1 &
sleep 3 && pgrep -fl mariadbd
```

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç

- [x] **SQL –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞** - `migration_add_en_fields.sql`
- [x] **–ö–æ–¥ SummarizationService –æ–±–Ω–æ–≤–ª–µ–Ω** - –º–µ—Ç–æ–¥ `saveResult()` + v2.1
- [x] **–ü—Ä–æ–º–ø—Ç AI –æ–±–Ω–æ–≤–ª–µ–Ω** - –±–∏–ª–∏–Ω–≥–≤–∞–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- [x] **–ü—Ä–æ–º–ø—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω** - src + production
- [x] **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞** - 4 –¥–æ–∫—É–º–µ–Ω—Ç–∞ (38KB)
- [x] **–°–∏–Ω—Ç–∞–∫—Å–∏—Å PHP –ø—Ä–æ–≤–µ—Ä–µ–Ω** - `php -l` ‚úÖ
- [ ] **–ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ –ë–î** - —Ç—Ä–µ–±—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- [ ] **SummarizationService –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω** - RU + EN —Å—Ç–∞—Ç—å–∏
- [ ] **DeduplicationService –æ–±–Ω–æ–≤–ª–µ–Ω** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `*_en` –ø–æ–ª—è
- [ ] **E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ** - –∫—Ä–æ—Å—Å—è–∑—ã—á–Ω–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
- [ ] **–ú–µ—Ç—Ä–∏–∫–∏ –∏–∑–º–µ—Ä–µ–Ω—ã** - —ç–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤, —Ç–æ—á–Ω–æ—Å—Ç—å, —Å–∫–æ—Ä–æ—Å—Ç—å

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ **SummarizationService v2.1** —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω! –ú–æ–¥—É–ª—å —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–∏–ª–∏–Ω–≥–≤–∞–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–º —à–∞–≥–æ–º –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –∫—Ä–æ—Å—Å—è–∑—ã—á–Ω–æ–π –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏.

**–ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
- ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- ‚úÖ Fallback –ª–æ–≥–∏–∫–∞ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é

**–ì–æ—Ç–æ–≤–æ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ DeduplicationService v2.1! üöÄ

---

**–î–∞—Ç–∞:** 2025-11-10  
**–í–µ—Ä—Å–∏—è:** SummarizationService v2.1  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ**  
**–ê–≤—Ç–æ—Ä:** AI Pipeline Development Team
