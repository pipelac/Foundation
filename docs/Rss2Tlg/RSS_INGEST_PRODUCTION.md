# RSS Ingest Production Script - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-09  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

---

## üìã –û–±–∑–æ—Ä

**RSS Ingest** - production-ready —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—Ä–∞ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ RSS/Atom –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö MariaDB.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- ‚úÖ –°–±–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö RSS/Atom –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ RSS 2.0 –∏ Atom —Ñ–æ—Ä–º–∞—Ç–æ–≤
- ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ content_hash (MD5)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –º–µ–¥–∏–∞, –∞–≤—Ç–æ—Ä—ã)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –æ —Å—Ç–∞—Ç—É—Å–µ —Ä–∞–±–æ—Ç—ã
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É –ø–æ cron

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –°–µ—Ä–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤

**–î–∞—Ç–∞:** 2025-11-09  
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—Å–∫–æ–≤:** 5  
**–ò–Ω—Ç–µ—Ä–≤–∞–ª:** 10 —Å–µ–∫—É–Ω–¥  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω—ã

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ò—Å—Ç–æ—á–Ω–∏–∫ | –ó–∞–ø–∏—Å–µ–π | –°—Ç–∞—Ç—É—Å |
|----------|---------|--------|
| –†–ò–ê –ù–æ–≤–æ—Å—Ç–∏ | 61 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| BBC News World | 30 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| Bloomberg Wealth | 10 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| **–ò–¢–û–ì–û** | **101** | **3/3** |

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|---------|--------|------------|
| –°–∫–∞—á–∏–≤–∞–Ω–∏–µ RSS | ‚úÖ | –í—Å–µ 3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–∞—é—Ç |
| –ü–∞—Ä—Å–∏–Ω–≥ RSS 2.0 | ‚úÖ | –†–ò–ê –ù–æ–≤–æ—Å—Ç–∏, Bloomberg |
| –ü–∞—Ä—Å–∏–Ω–≥ Atom | ‚úÖ | BBC News |
| –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è | ‚úÖ | 100% –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î | ‚úÖ | 101 –∑–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ | –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω—ã |
| Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | ‚úÖ | –û—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã 6 —Å–æ–æ–±—â–µ–Ω–∏–π |
| –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ | ‚úÖ | –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –≤ rss2tlg_feed_state |

### –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è

**–¢–µ—Å—Ç:** –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å —Ç–µ–º–∏ –∂–µ –¥–∞–Ω–Ω—ã–º–∏  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 70/70 –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ (100%)  
**–ú–µ—Ç–æ–¥:** MD5 —Ö–µ—à –æ—Ç `title|link`

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
/home/engine/project/
‚îú‚îÄ‚îÄ production/
‚îÇ   ‚îú‚îÄ‚îÄ rss_ingest.php           # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
‚îÇ   ‚îú‚îÄ‚îÄ run_test_series.sh       # –°–µ—Ä–∏—è –∑–∞–ø—É—Å–∫–æ–≤ (60 —Å–µ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ run_quick_test.sh        # –ë—ã—Å—Ç—Ä–∞—è —Å–µ—Ä–∏—è (10 —Å–µ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ crontab.txt              # –ü—Ä–∏–º–µ—Ä crontab
‚îú‚îÄ‚îÄ config.json                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îú‚îÄ‚îÄ rss_ingest.log           # –õ–æ–≥ —Å–∫—Ä–∏–ø—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ cron_rss_ingest.log      # –õ–æ–≥ cron –∑–∞–ø—É—Å–∫–æ–≤
‚îî‚îÄ‚îÄ docs/Rss2Tlg/
    ‚îî‚îÄ‚îÄ RSS_INGEST_PRODUCTION.md # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP 8.1+
- MariaDB 10.11+
- –†–∞—Å—à–∏—Ä–µ–Ω–∏—è: curl, json, pdo, pdo_mysql, dom, mbstring, simplexml
- Composer (–¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ë–î –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo mysql -e "CREATE DATABASE IF NOT EXISTS rss2tlg CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"
sudo mysql -e "CREATE USER IF NOT EXISTS 'rss2tlg_user'@'localhost' IDENTIFIED BY 'rss2tlg_password_2024';"
sudo mysql -e "GRANT ALL PRIVILEGES ON rss2tlg.* TO 'rss2tlg_user'@'localhost';"
sudo mysql -e "FLUSH PRIVILEGES;"

# –ò–º–ø–æ—Ä—Ç —Å—Ö–µ–º
mysql -u rss2tlg_user -prss2tlg_password_2024 rss2tlg < src/Rss2Tlg/sql/rss2tlg_schema_clean.sql
mysql -u rss2tlg_user -prss2tlg_password_2024 rss2tlg < src/Rss2Tlg/sql/ai_pipeline_schema.sql
mysql -u rss2tlg_user -prss2tlg_password_2024 rss2tlg < src/Rss2Tlg/sql/publication_schema.sql

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
mysql -u rss2tlg_user -prss2tlg_password_2024 rss2tlg << 'EOF'
CREATE TABLE IF NOT EXISTS `rss2tlg_feeds` (
  `id` int unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL COMMENT '–ù–∞–∑–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞',
  `feed_url` varchar(512) NOT NULL COMMENT 'URL RSS/Atom –ª–µ–Ω—Ç—ã',
  `website_url` varchar(512) DEFAULT NULL COMMENT 'URL –≤–µ–±-—Å–∞–π—Ç–∞',
  `enabled` tinyint(1) NOT NULL DEFAULT 1 COMMENT '–ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_feed_url` (`feed_url`),
  KEY `idx_enabled` (`enabled`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
EOF

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
mysql -u rss2tlg_user -prss2tlg_password_2024 rss2tlg << 'EOF'
INSERT INTO `rss2tlg_feeds` (`name`, `feed_url`, `website_url`, `enabled`) VALUES
('–†–ò–ê –ù–æ–≤–æ—Å—Ç–∏', 'https://ria.ru/export/rss2/index.xml?page_type=google_newsstand', 'https://ria.ru', 1),
('BBC News World', 'http://feeds.bbci.co.uk/news/world/rss.xml', 'https://www.bbc.com/news/world', 1),
('Bloomberg Wealth', 'https://feeds.bloomberg.com/wealth/news.rss', 'https://www.bloomberg.com', 1);
EOF
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `config.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```json
{
  "log_directory": "/home/engine/project/logs",
  "log_level": "info",
  "database": {
    "host": "localhost",
    "port": 3306,
    "database": "rss2tlg",
    "username": "rss2tlg_user",
    "password": "rss2tlg_password_2024",
    "charset": "utf8mb4"
  },
  "telegram": {
    "bot_token": "YOUR_BOT_TOKEN",
    "chat_id": "YOUR_CHAT_ID"
  }
}
```

### 4. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

```bash
chmod +x /home/engine/project/production/rss_ingest.php
chmod +x /home/engine/project/production/run_test_series.sh
chmod +x /home/engine/project/production/run_quick_test.sh
mkdir -p /home/engine/project/logs
```

---

## üöÄ –ó–∞–ø—É—Å–∫

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

```bash
php /home/engine/project/production/rss_ingest.php
```

### –¢–µ—Å—Ç–æ–≤–∞—è —Å–µ—Ä–∏—è (5 –∑–∞–ø—É—Å–∫–æ–≤ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 10 —Å–µ–∫)

```bash
/home/engine/project/production/run_quick_test.sh
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cron

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å crontab
crontab -e

# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É (–∑–∞–ø—É—Å–∫ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É)
* * * * * /usr/bin/php /home/engine/project/production/rss_ingest.php >> /home/engine/project/logs/cron_rss_ingest.log 2>&1

# –ò–ª–∏ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
*/5 * * * * /usr/bin/php /home/engine/project/production/rss_ingest.php >> /home/engine/project/logs/cron_rss_ingest.log 2>&1
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
tail -50 /home/engine/project/logs/rss_ingest.log

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f /home/engine/project/logs/rss_ingest.log

# –õ–æ–≥–∏ cron
tail -f /home/engine/project/logs/cron_rss_ingest.log
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –ë–î

```sql
-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
SELECT 
    f.name as '–ò—Å—Ç–æ—á–Ω–∏–∫',
    COUNT(i.id) as '–ó–∞–ø–∏—Å–µ–π',
    MAX(i.created_at) as '–ü–æ—Å–ª–µ–¥–Ω—è—è'
FROM rss2tlg_feeds f
LEFT JOIN rss2tlg_items i ON f.id = i.feed_id
GROUP BY f.id, f.name;

-- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
SELECT 
    feed_id,
    last_status,
    error_count,
    fetched_at
FROM rss2tlg_feed_state;

-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
SELECT 
    f.name,
    i.title,
    i.created_at
FROM rss2tlg_items i
JOIN rss2tlg_feeds f ON i.feed_id = f.id
ORDER BY i.created_at DESC
LIMIT 10;
```

---

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∫—Ä–∏–ø—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
main()
‚îú‚îÄ‚îÄ loadConfiguration()      # –ó–∞–≥—Ä—É–∑–∫–∞ config.json
‚îú‚îÄ‚îÄ initLogger()             # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–≥–µ—Ä–∞
‚îú‚îÄ‚îÄ initDatabase()           # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îú‚îÄ‚îÄ initTelegram()           # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram –±–æ—Ç–∞
‚îú‚îÄ‚îÄ getActiveFeeds()         # –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
‚îî‚îÄ‚îÄ processFeed()            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
    ‚îú‚îÄ‚îÄ fetchRSS()           # –°–∫–∞—á–∏–≤–∞–Ω–∏–µ RSS
    ‚îú‚îÄ‚îÄ parseRSS()           # –ü–∞—Ä—Å–∏–Ω–≥ XML
    ‚îÇ   ‚îú‚îÄ‚îÄ parseRSSItem()   # –ü–∞—Ä—Å–∏–Ω–≥ RSS 2.0
    ‚îÇ   ‚îî‚îÄ‚îÄ parseAtomItem()  # –ü–∞—Ä—Å–∏–Ω–≥ Atom
    ‚îú‚îÄ‚îÄ saveItem()           # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
    ‚îî‚îÄ‚îÄ updateFeedState()    # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```

### –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è

**–ú–µ—Ç–æ–¥:** MD5 —Ö–µ—à –æ—Ç `title|link`

```php
$contentForHash = $item['title'] . '|' . $item['link'];
$contentHash = md5($contentForHash);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç
$existsSql = "SELECT id FROM rss2tlg_items 
              WHERE feed_id = ? AND content_hash = ? 
              LIMIT 1";
```

### –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

–¢–∞–±–ª–∏—Ü–∞ `rss2tlg_feed_state` –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç:
- HTTP —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫
- –í—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (backoff)
- ETag –∏ Last-Modified (–¥–ª—è –±—É–¥—É—â–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)

---

## üîß –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

### –ß–µ—Ä–µ–∑ SQL

```sql
INSERT INTO rss2tlg_feeds (name, feed_url, website_url, enabled)
VALUES ('–ù–∞–∑–≤–∞–Ω–∏–µ', 'https://example.com/rss', 'https://example.com', 1);
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
curl -I "https://example.com/rss"

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞
curl "https://example.com/rss" | head -50
```

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

```sql
UPDATE rss2tlg_feeds SET enabled = 0 WHERE id = 2;
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "Failed to fetch RSS content"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (HTTP 4xx, 5xx)
- –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- DNS –Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è
- CloudFront/–∑–∞—â–∏—Ç–∞ –æ—Ç –±–æ—Ç–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: `curl -I "URL"`
2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º User-Agent
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫

### –û—à–∏–±–∫–∞: "XML parsing error"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π XML
- –ù–µ–ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å XML –≤—Ä—É—á–Ω—É—é: `curl "URL" | head -100`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∫—É
3. –£–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç

### –î—É–±–ª–∏–∫–∞—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω—ã:**
- content_hash –Ω–µ —É–Ω–∏–∫–∞–ª–µ–Ω
- –ò–∑–º–µ–Ω–∏–ª—Å—è title –∏–ª–∏ link

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å guid –≤–º–µ—Å—Ç–æ content_hash
3. –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ —Ö–µ—à

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 1.8-2.5 —Å–µ–∫ –Ω–∞ 3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- **–°–∫–æ—Ä–æ—Å—Ç—å –ø–∞—Ä—Å–∏–Ω–≥–∞:** ~40 —ç–ª–µ–º–µ–Ω—Ç–æ–≤/—Å–µ–∫
- **–ü–∞–º—è—Ç—å:** ~10-15 MB
- **–ë–î –∑–∞–ø—Ä–æ—Å–æ–≤:** ~150 –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –∑–∞–ø—É—Å–∫ (—Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**Batch insert** - –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö INSERT –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞:

```php
// –°–æ–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
$itemsToInsert = [];
foreach ($items as $item) {
    if (!isDuplicate($item)) {
        $itemsToInsert[] = $item;
    }
}

// –í—Å—Ç–∞–≤–∏—Ç—å –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
if (!empty($itemsToInsert)) {
    $db->batchInsert('rss2tlg_items', $itemsToInsert);
}
```

**ETag/Last-Modified** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —É—Å–ª–æ–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (304 Not Modified).

**–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤

- **DEBUG:** SQL –∑–∞–ø—Ä–æ—Å—ã, –¥–µ—Ç–∞–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
- **INFO:** –£—Å–ø–µ—à–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **WARNING:** –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- **ERROR:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –∏—Å–∫–ª—é—á–µ–Ω–∏—è

### –§–æ—Ä–º–∞—Ç –ª–æ–≥–∞

```
2025-11-09T12:28:38+00:00 INFO [RSS_INGEST] Feed processed successfully {"feed_id":1,"feed_name":"–†–ò–ê –ù–æ–≤–æ—Å—Ç–∏","items_total":60,"items_new":60,"items_duplicates":0}
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ü–∞—Ä–æ–ª–∏ –ë–î:** –•—Ä–∞–Ω–∏—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. **API –∫–ª—é—á–∏:** –ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ git
3. **SSL:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä—è—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç RSS
5. **–õ–∏–º–∏—Ç—ã:** –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (MEDIUMTEXT)

---

## üìö –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è RSS Ingest –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–∏–º –º–æ–¥—É–ª—è–º:

1. ‚úÖ **RSS Ingest** - –≥–æ—Ç–æ–≤ –∫ production
2. ‚è≥ **Summarization** - —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ AI
3. ‚è≥ **Deduplication** - AI –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ—Ö–æ–∂–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
4. ‚è≥ **Translation** - –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —è–∑—ã–∫–∏
5. ‚è≥ **Illustration** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π
6. ‚è≥ **Publication** - –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **RSS Ingest Production Script** –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:

- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è 100% —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–µ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ
- ‚úÖ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞–¥–µ–∂–Ω–∞—è
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç–ª–∏—á–Ω–∞—è
- ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É –ø–æ cron

**–°—Ç–∞—Ç—É—Å:** üöÄ Ready for Production

---

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–î–∞—Ç–∞:** 2025-11-09  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 1.0.0
