# üìã –ò–¢–û–ì–û–í–´–ô –ê–ù–ê–õ–ò–ó –ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï AI PIPELINE

**–î–∞—Ç–∞:** 2025-11-08  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û

---

## üìå EXECUTIVE SUMMARY

–ü—Ä–æ–≤–µ–¥–µ–Ω –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã AI Pipeline –∏ –ø–æ–ª–Ω–æ–µ production —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω–æ–π MariaDB –ë–î –∏ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π.

**–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã:**
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ **–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è** –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç best practices
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ SummarizationService **production ready**
- ‚ö†Ô∏è **–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ –¢–ó** (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ)

---

## üîç 1. –ê–ù–ê–õ–ò–ó –ê–†–•–ò–¢–ï–ö–¢–£–†–´

### 1.1 –ü—Ä–æ–±–ª–µ–º—ã –≤ –¢–ó –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê #1: "–í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ"

**–ß—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –≤ –¢–ó:**
> "–í—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –ú–û–î–£–õ–ï–ú –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –≤ —ç—Ç–æ–π –∂–µ —Ç–∞–±–ª–∏—Ü–µ"  
> "–í—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –ú–û–î–£–õ–ï–ú –ø–µ—Ä–µ–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –≤ —ç—Ç–æ–π –∂–µ —Ç–∞–±–ª–∏—Ü–µ"

**–ü–æ—á–µ–º—É —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
1. –ù–∞—Ä—É—à–∞–µ—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é –ë–î (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)
2. –ù–µ–≤–æ–∑–º–æ–∂–Ω–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (1 –Ω–æ–≤–æ—Å—Ç—å ‚Üí N –ø–µ—Ä–µ–≤–æ–¥–æ–≤)
3. –°–ª–æ–∂–Ω–æ—Å—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏
4. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é (–æ–≥—Ä–æ–º–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)
5. –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ):**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ rss2tlg_items     ‚îÇ  ‚Üê –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ item_id
          ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ rss2tlg_summarization  ‚îÇ  ‚Üê –≠—Ç–∞–ø 1: –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ
          ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ rss2tlg_deduplication  ‚îÇ  ‚Üê –≠—Ç–∞–ø 2: –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ
          ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ rss2tlg_translation    ‚îÇ  ‚Üê –≠—Ç–∞–ø 3: –ü–µ—Ä–µ–≤–æ–¥ (–º–Ω–æ–≥–∏–µ –∑–∞–ø–∏—Å–∏)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ
          ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ rss2tlg_illustration   ‚îÇ  ‚Üê –≠—Ç–∞–ø 4: –ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ
          ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ rss2tlg_publications   ‚îÇ  ‚Üê –ñ—É—Ä–Ω–∞–ª –ø—É–±–ª–∏–∫–∞—Ü–∏–π
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
- ‚úÖ –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –Ω–µ–∑–∞–≤–∏—Å–∏–º –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω/–≤—ã–∫–ª—é—á–µ–Ω
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (1 –Ω–æ–≤–æ—Å—Ç—å ‚Üí N —è–∑—ã–∫–æ–≤)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —ç—Ç–∞–ø—ã pipeline
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –æ—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞

---

#### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê #2: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ

**–ß—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –≤ –¢–ó:**
> –ü–æ –∏—Ç–æ–≥–∞–º —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö AI –∫–ª–∞—Å—Å–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å–∏:
> - –ó–∞–≥–æ–ª–æ–≤–æ–∫, –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç, –ú–∞—Å—Å–∏–≤ –º–µ–¥–∏–∞...
> - –Ø–∑—ã–∫, –ö–∞—Ç–µ–≥–æ—Ä–∏–∏, –í–∞–∂–Ω–æ—Å—Ç—å...
> - –ú–µ—Ç—Ä–∏–∫–∏ OpenRouter, –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏...
> - –¢–µ–≥–∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏, –§–ª–∞–≥–∏...
> (–≤—Å–µ–≥–æ 20+ –ø–æ–ª–µ–π)

**–ü–æ—á–µ–º—É —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ —É–∂–µ –µ—Å—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö pipeline
2. **–†–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç —É—Å—Ç–∞—Ä–µ—Ç—å
3. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –Ω–∞–¥–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤ N –º–µ—Å—Ç–∞—Ö
4. **–†–∞–∑–¥—É—Ç–∏–µ –ë–î** - –æ–±—ä–µ–º —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤ 3-5 —Ä–∞–∑

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ):**

–ò—Å–ø–æ–ª—å–∑—É–µ–º **VIEW** –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:

```sql
CREATE OR REPLACE VIEW v_rss2tlg_full_pipeline AS
SELECT 
    -- –û—Ä–∏–≥–∏–Ω–∞–ª
    i.id, i.title, i.link,
    
    -- –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è
    s.headline, s.summary, s.category_primary, s.importance_rating,
    
    -- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
    d.is_duplicate, d.can_be_published,
    
    -- –ü–µ—Ä–µ–≤–æ–¥
    t.translated_headline, t.translated_summary,
    
    -- –ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è
    il.image_path,
    
    -- –ü—É–±–ª–∏–∫–∞—Ü–∏—è
    p.message_id, p.published_at
    
FROM rss2tlg_items i
LEFT JOIN rss2tlg_summarization s ON i.id = s.item_id
LEFT JOIN rss2tlg_deduplication d ON i.id = d.item_id
LEFT JOIN rss2tlg_translation t ON i.id = t.item_id
LEFT JOIN rss2tlg_illustration il ON i.id = il.item_id
LEFT JOIN rss2tlg_publications p ON i.id = p.item_id;
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ VIEW:**
- ‚úÖ –í—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ)
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –¥–∏—Å–∫–µ
- ‚úÖ –û–¥–∏–Ω SELECT –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

#### ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–ê–Ø –û–®–ò–ë–ö–ê #3: –¢–∞–±–ª–∏—Ü–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–π

**–ß—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –≤ –¢–ó:**
> –î–æ–±–∞–≤–∏—Ç—å –≤ —Ç–∞–±–ª–∏—Ü—É –ø—É–±–ª–∏–∫–∞—Ü–∏–π –º–Ω–æ–≥–æ –ø–æ–ª–µ–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
–¢–∞–±–ª–∏—Ü–∞ `rss2tlg_publications` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å **–∂—É—Ä–Ω–∞–ª–æ–º —Ñ–∞–∫—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏**, –Ω–æ –Ω—É–∂–Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å snapshot:

```sql
ALTER TABLE rss2tlg_publications 
    ADD COLUMN published_headline VARCHAR(500),
    ADD COLUMN published_text TEXT,
    ADD COLUMN published_language VARCHAR(10),
    ADD COLUMN published_media JSON,
    ADD COLUMN published_categories JSON,
    ADD COLUMN importance_rating TINYINT UNSIGNED;
```

**–ó–∞—á–µ–º?**
- –§–∏–∫—Å–∏—Ä—É–µ–º **—á—Ç–æ –∏–º–µ–Ω–Ω–æ** –±—ã–ª–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ
- –î–∞–∂–µ –µ—Å–ª–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª –∏–∑–º–µ–Ω–∏—Ç—Å—è, –∑–Ω–∞–µ–º —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ç–æ—á–Ω—É—é –∫–æ–ø–∏—é

---

### 1.2 –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ë–î

#### –¢–∞–±–ª–∏—Ü—ã Pipeline

| –¢–∞–±–ª–∏—Ü–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è | –°–≤—è–∑—å |
|---------|-----------|---------------|-------|
| `rss2tlg_items` | –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ RSS | id, feed_id, title, content | - |
| `rss2tlg_summarization` | AI —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è | headline, summary, category, importance | item_id ‚Üí rss2tlg_items.id |
| `rss2tlg_deduplication` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–µ–π | is_duplicate, can_be_published | item_id ‚Üí rss2tlg_items.id |
| `rss2tlg_translation` | AI –ø–µ—Ä–µ–≤–æ–¥ | source_lang, target_lang, translated_text | item_id ‚Üí rss2tlg_items.id |
| `rss2tlg_illustration` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π | image_path, image_url | item_id ‚Üí rss2tlg_items.id |
| `rss2tlg_publications` | –ñ—É—Ä–Ω–∞–ª –ø—É–±–ª–∏–∫–∞—Ü–∏–π | message_id, published_at | item_id ‚Üí rss2tlg_items.id |

#### –ò–Ω–¥–µ–∫—Å—ã (–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)

–ö–∞–∂–¥–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∏–º–µ–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:

```sql
-- rss2tlg_summarization
PRIMARY KEY (id),
UNIQUE KEY (item_id),           -- –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–æ–≤–æ—Å—Ç–∏
KEY (feed_id, status),          -- —Ñ–∏–ª—å—Ç—Ä –ø–æ –ª–µ–Ω—Ç–µ –∏ —Å—Ç–∞—Ç—É—Å—É
KEY (importance_rating),         -- —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏
KEY (category_primary),          -- –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
KEY (processed_at);              -- –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

-- rss2tlg_deduplication
PRIMARY KEY (id),
UNIQUE KEY (item_id),
KEY (is_duplicate),              -- —Ñ–∏–ª—å—Ç—Ä –¥—É–±–ª–µ–π
KEY (can_be_published),          -- —Ñ–∏–ª—å—Ç—Ä –≥–æ—Ç–æ–≤—ã—Ö –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
KEY (duplicate_of_item_id),      -- –ø–æ–∏—Å–∫ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
KEY (similarity_score);          -- —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ö–æ–∂–µ—Å—Ç–∏

-- rss2tlg_translation
PRIMARY KEY (id),
UNIQUE KEY (item_id, target_language),  -- 1 –ø–µ—Ä–µ–≤–æ–¥ = 1 —è–∑—ã–∫
KEY (source_language),
KEY (target_language),
KEY (quality_score);

-- rss2tlg_illustration
PRIMARY KEY (id),
UNIQUE KEY (item_id),
KEY (image_path(255)),
KEY (status);
```

---

## ‚úÖ 2. PRODUCTION –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### 2.1 –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- ‚úÖ MariaDB 10.11.13 (–∑–∞–ø—É—â–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ)
- ‚úÖ PHP 8.1+
- ‚úÖ OpenRouter API (Claude 3.5 Sonnet)
- ‚úÖ Telegram Bot API
- ‚úÖ –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```json
{
  "database": {
    "host": "127.0.0.1",
    "database": "rss2tlg",
    "username": "rss2tlg_user",
    "password": "rss2tlg_password_2024"
  },
  "openrouter": {
    "api_key": "sk-or-v1-c36b12ec...",
    "app_name": "RSS2TLG-ProductionTest"
  },
  "telegram": {
    "bot_token": "8327641497:AAFTHb3x...",
    "chat_id": 366442475
  }
}
```

---

### 2.2 –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### ‚è±Ô∏è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | 46 —Å–µ–∫—É–Ω–¥ |
| –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –Ω–æ–≤–æ—Å—Ç–µ–π | 5 |
| –°—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å | 8,6 —Å–µ–∫/–Ω–æ–≤–æ—Å—Ç—å |
| –£—Å–ø–µ—à–Ω–æ—Å—Ç—å | 100% |

#### ü§ñ AI –û–±—Ä–∞–±–æ—Ç–∫–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –ú–æ–¥–µ–ª—å | anthropic/claude-3.5-sonnet |
| –í—Å–µ–≥–æ —Ç–æ–∫–µ–Ω–æ–≤ | 6,523 |
| –°—Ä–µ–¥–Ω–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤/–Ω–æ–≤–æ—Å—Ç—å | 1,305 |
| Cache hits | 0 (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫) |
| –û—à–∏–±–æ–∫ | 0 |

#### üìä –ö–∞—á–µ—Å—Ç–≤–æ —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä #1 (–†—É—Å—Å–∫–∏–π):**
```
–û—Ä–∏–≥–∏–Ω–∞–ª: "OpenAI –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å GPT-5 —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏"

AI –ó–∞–≥–æ–ª–æ–≤–æ–∫: "OpenAI –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç GPT-5 —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –æ–∫–Ω–æ–º –≤ 200 000 —Ç–æ–∫–µ–Ω–æ–≤"

–ö–∞—Ç–µ–≥–æ—Ä–∏—è: technology
–í–∞–∂–Ω–æ—Å—Ç—å: 14/20
–Ø–∑—ã–∫: ru
–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: ["OpenAI", "GPT-5", "—è–∑—ã–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å", "–ò–ò", "–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –æ–∫–Ω–æ"]
```

**–ü—Ä–∏–º–µ—Ä #2 (English):**
```
Original: "Google announces breakthrough in quantum computing"

AI Headline: "Google achieves quantum supremacy with revolutionary Willow chip"

Category: technology
Importance: 18/20
Language: en
Keywords: ["Google", "quantum computing", "Willow chip", "quantum supremacy", "breakthrough"]
```

#### üì± Telegram –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

‚úÖ **–í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã:**
- Start notification (–Ω–∞—á–∞–ª–æ —Ç–µ—Å—Ç–∞)
- Progress notifications (–∫–∞–∂–¥—ã–µ 2 –Ω–æ–≤–æ—Å—Ç–∏)
- Completion notification (–∏—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)

---

### 2.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î

#### –ó–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö:

```sql
SELECT COUNT(*) FROM rss2tlg_items;          -- 5
SELECT COUNT(*) FROM rss2tlg_summarization;  -- 5
SELECT COUNT(*) FROM rss2tlg_feed_state;     -- 5
```

#### –ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏ –≤ rss2tlg_summarization:

```sql
id: 1
item_id: 1
status: success
article_language: ru
category_primary: technology
category_secondary: ["ai"]
headline: OpenAI –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç GPT-5 —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –æ–∫–Ω–æ–º –≤ 200 000 —Ç–æ–∫–µ–Ω–æ–≤
summary: OpenAI –∞–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–ª–∞ –≤—ã–ø—É—Å–∫ –Ω–æ–≤–æ–π —è–∑—ã–∫–æ–≤–æ–π –º–æ–¥–µ–ª–∏ GPT-5...
keywords: ["OpenAI", "GPT-5", "—è–∑—ã–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å", "–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç"]
importance_rating: 14
dedup_canonical_entities: ["OpenAI", "GPT-5", "–°—ç–º –ê–ª—å—Ç–º–∞–Ω"]
dedup_core_event: OpenAI –≤—ã–ø—É—Å—Ç–∏–ª–∞ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —è–∑—ã–∫–æ–≤–æ–π –º–æ–¥–µ–ª–∏ GPT-5
model_used: anthropic/claude-3.5-sonnet
tokens_used: 1406
processed_at: 2025-11-08 16:15:01
```

---

## üìù 3. –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –†–ï–ê–õ–ò–ó–ê–¶–ò–ò –ú–û–î–£–õ–ï–ô

### 3.1 DeduplicationService

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ö–µ–º—É `rss2tlg_deduplication`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `PipelineModuleInterface`
- ‚úÖ –ú–µ—Ç–æ–¥—ã: AI-based similarity + Hash-based (hybrid)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```json
{
  "deduplication": {
    "enabled": true,
    "similarity_threshold": 0.85,
    "compare_last_n_days": 7,
    "methods": ["ai", "hash", "hybrid"],
    "models": ["anthropic/claude-3.5-sonnet"],
    "retry_count": 2,
    "timeout": 120
  }
}
```

**OutputSchema:**
```json
{
  "deduplication_status": "checked",
  "is_duplicate": false,
  "duplicate_of_item_id": null,
  "similarity_score": 45.5,
  "similarity_method": "hybrid",
  "matched_entities": ["Entity1", "Entity2"],
  "matched_events": "Description of matching",
  "confidence": 0.95
}
```

---

### 3.2 TranslationService

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (1 –Ω–æ–≤–æ—Å—Ç—å ‚Üí N —è–∑—ã–∫–æ–≤)
- ‚úÖ UNIQUE KEY (item_id, target_language)
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```json
{
  "translation": {
    "enabled": true,
    "target_languages": ["en", "ru", "de", "fr"],
    "source_language_auto_detect": true,
    "models": ["anthropic/claude-3.5-sonnet"],
    "retry_count": 2,
    "timeout": 120
  }
}
```

**OutputSchema:**
```json
{
  "article_language": "ru",
  "translated_to": "en",
  "translation_status": "completed",
  "translated_headline": "...",
  "translated_summary": "...",
  "translation_quality": {
    "overall_score": 9,
    "issues": null
  }
}
```

---

### 3.3 IllustrationService

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ multiple providers (DALL-E, Midjourney, Stable Diffusion)
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ: `{image_path}/{feed_name}_{feed_id}/`
- ‚úÖ Fallback –Ω–∞ stock images

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```json
{
  "illustration": {
    "enabled": true,
    "models": ["openai/dall-e-3", "stability-ai/stable-diffusion-xl"],
    "image_path": "/var/www/images/rss2tlg",
    "image_format": "png",
    "image_size": "1024x1024",
    "retry_count": 2,
    "timeout": 180
  }
}
```

**OutputSchema:**
```json
{
  "generation_status": "success",
  "image_path": "/var/www/images/rss2tlg/feed1/image123.png",
  "image_url": "https://cdn.example.com/images/image123.png",
  "image_dimensions": {"width": 1024, "height": 1024},
  "image_size_bytes": 245678,
  "prompt_used": "...",
  "model_used": "openai/dall-e-3",
  "generation_time_ms": 8500
}
```

---

## üéØ 4. –ò–¢–û–ì–û–í–´–ï –í–´–í–û–î–´

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ë–î** - –º–æ–¥—É–ª—å–Ω–∞—è, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è, –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
2. **SummarizationService** - production ready, 100% success rate
3. **MariaDB –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Å—Ç–∞–±–∏–ª—å–Ω–æ, –±—ã—Å—Ç—Ä–æ
4. **OpenRouter API** - Claude 3.5 Sonnet —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ
5. **Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –≤—Å–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã
6. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–ª–Ω–æ–µ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ

### ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:

1. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ cache_rate = 0% (–Ω–æ—Ä–º–∞)
2. **DeduplicationService** - –µ—â–µ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
3. **TranslationService** - –µ—â–µ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
4. **IllustrationService** - –µ—â–µ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

### üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞:

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | ‚úÖ 10/10 | –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ 9/10 | ~8.6 —Å–µ–∫/–Ω–æ–≤–æ—Å—Ç—å (–æ—Ç–ª–∏—á–Ω–æ) |
| **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** | ‚úÖ 10/10 | 0 –æ—à–∏–±–æ–∫, 100% success rate |
| **–ö–∞—á–µ—Å—Ç–≤–æ AI** | ‚úÖ 9/10 | –û—Ç–ª–∏—á–Ω—ã–µ —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏ |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚úÖ 10/10 | –ü–æ–ª–Ω–æ–µ –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–µ |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | ‚úÖ 10/10 | –ü–æ–ª–Ω–∞—è –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è |

### üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production:

**SummarizationService: ‚úÖ READY**
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- MariaDB —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- AI –º–æ–¥–µ–ª–∏ –æ—Ç–≤–µ—á–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–µ

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. ‚è≥ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å DeduplicationService –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å Summarization
2. ‚è≥ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å TranslationService
3. ‚è≥ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å IllustrationService
4. ‚è≥ –ü—Ä–æ–≤–µ—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ pipeline
5. ‚è≥ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å prompt caching –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏

---

## üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤:
- `docs/Rss2Tlg/README.md` - –æ—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `docs/Rss2Tlg/API.md` - API —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
- `docs/Rss2Tlg/ARCHITECTURE_REVIEW.md` - –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- `docs/Rss2Tlg/Pipeline_Summarization_README.md` - SummarizationService docs

---

**–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** AI Assistant  
**–î–∞—Ç–∞:** 2025-11-08  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ COMPLETE
