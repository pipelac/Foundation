# Logger.class.php - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤, –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](#–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
- [–ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã](#–ø—É–±–ª–∏—á–Ω—ã–µ-–º–µ—Ç–æ–¥—ã)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å](#–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
- [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## –û–±–∑–æ—Ä

`Logger.class.php` - —ç—Ç–æ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è PHP 8.1+, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –¥–ª—è production-–æ–∫—Ä—É–∂–µ–Ω–∏–π.

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- ‚úÖ –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è (PHP 8.1+)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PSR-3 —Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ I/O
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- ‚úÖ JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Unicode
- ‚úÖ Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ Thread-safe –∑–∞–ø–∏—Å—å —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏

**Namespace:** `App\Component`

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

Logger –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 5 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏:

| –£—Ä–æ–≤–µ–Ω—å | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----------|----------|
| DEBUG | 0 | –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è |
| INFO | 1 | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è |
| WARNING | 2 | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è |
| ERROR | 3 | –û—à–∏–±–∫–∏ |
| CRITICAL | 4 | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ |

### 2. –†–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞:
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ (1-N)
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–≤ –ú–ë)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤

### 3. –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—é:
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ (0-N –ö–ë)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–±—Ä–æ—Å —á–µ—Ä–µ–∑ `flush()`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ

### 4. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (—Ä–∞–∑–º–µ—Ä, —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ)
- TTL –∫–µ—à–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö: 1 —Å–µ–∫—É–Ω–¥–∞

### 5. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –∑–∞–ø–∏—Å–µ–π:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —à–∞–±–ª–æ–Ω—ã (patterns)
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã
- JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Unicode (–∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –∏ —Ç.–¥.)

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP 8.1 –∏–ª–∏ –≤—ã—à–µ
- –†–∞—Å—à–∏—Ä–µ–Ω–∏—è: json, mbstring
- –ü—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ª–æ–≥–æ–≤

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Composer

```bash
composer require your-vendor/logger
```

### –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞

```php
require_once __DIR__ . '/vendor/autoload.php';

use App\Component\Logger;
```

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```php
use App\Component\Logger;

$logger = new Logger([
    'directory' => '/var/www/logs',
    'file_name' => 'app.log'
]);

$logger->info("–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ");
```

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```php
$logger = new Logger([
    'directory' => '/var/www/logs/production',
    'file_name' => 'app.log',
    'log_level' => 'INFO',
    'max_files' => 7,
    'max_file_size' => 50,
    'log_buffer_size' => 128,
    'pattern' => '[{timestamp}] {level}: {message} {context}',
    'date_format' => 'Y-m-d H:i:s'
]);
```

---

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

#### `directory` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)

–ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–æ–≤.

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü—Ä–∞–≤–∞: 0775
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –∑–∞–ø–∏—Å—å –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```php
'directory' => '/var/www/logs/production'
```

#### `file_name` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)

–ò–º—è —Ñ–∞–π–ª–∞ –ª–æ–≥–∞. –ü—Ä–∏ —Ä–æ—Ç–∞—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã —Å —Å—É—Ñ—Ñ–∏–∫—Å–∞–º–∏ `.1`, `.2` –∏ —Ç.–¥.

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `'app.log'`

**–ü—Ä–∏–º–µ—Ä:**
```php
'file_name' => 'application.log'
// –°–æ–∑–¥–∞—Å—Ç: application.log, application.log.1, application.log.2, ...
```

---

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

#### `enabled` (bool)

–í–∫–ª—é—á–∞–µ—Ç –∏–ª–∏ –≤—ã–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `true`

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```php
$logger->enable();   // –í–∫–ª—é—á–∏—Ç—å
$logger->disable();  // –í—ã–∫–ª—é—á–∏—Ç—å
$logger->isEnabled(); // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
```

**–ü—Ä–∏–º–µ—Ä:**
```php
'enabled' => true
```

#### `log_level` / `min_level` (string)

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è. –°–æ–æ–±—â–µ–Ω–∏—è –Ω–∏–∂–µ —ç—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è.

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `'DEBUG'`

**–î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:** `DEBUG`, `INFO`, `WARNING`, `ERROR`, `CRITICAL`

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏–º–µ–Ω–∞:** `log_level` –∏–ª–∏ `min_level` (–≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã)

**–ü—Ä–∏–º–µ—Ä:**
```php
'log_level' => 'INFO'  // –ë–ª–æ–∫–∏—Ä—É–µ—Ç DEBUG
```

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
```
DEBUG ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ (DEBUG, INFO, WARNING, ERROR, CRITICAL)
INFO ‚Üí –±–ª–æ–∫–∏—Ä—É–µ—Ç DEBUG
WARNING ‚Üí –±–ª–æ–∫–∏—Ä—É–µ—Ç DEBUG, INFO
ERROR ‚Üí –±–ª–æ–∫–∏—Ä—É–µ—Ç DEBUG, INFO, WARNING
CRITICAL ‚Üí —Ç–æ–ª—å–∫–æ CRITICAL
```

#### `max_files` (int)

–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ø—Ä–∏ —Ä–æ—Ç–∞—Ü–∏–∏.

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `5`

**–î–∏–∞–ø–∞–∑–æ–Ω:** –º–∏–Ω–∏–º—É–º 1

**–ü—Ä–∏–º–µ—Ä:**
```php
'max_files' => 7  // –•—Ä–∞–Ω–∏—Ç—å –Ω–µ–¥–µ–ª—é –ª–æ–≥–æ–≤
```

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ü—Ä–∏ `max_files = 1`: –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è
- –ü—Ä–∏ `max_files = N`: —Ö—Ä–∞–Ω—è—Ç—Å—è N —Ñ–∞–π–ª–æ–≤, —Å–∞–º—ã–π —Å—Ç–∞—Ä—ã–π —É–¥–∞–ª—è–µ—Ç—Å—è

#### `max_file_size` (int)

–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –ª–æ–≥–∞ –≤ **–º–µ–≥–∞–±–∞–π—Ç–∞—Ö**. –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ä–æ—Ç–∞—Ü–∏—è.

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `1` (1 –ú–ë)

**–î–∏–∞–ø–∞–∑–æ–Ω:** –º–∏–Ω–∏–º—É–º 1 –ú–ë

**–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ:** –∑–Ω–∞—á–µ–Ω–∏–µ —É–º–Ω–æ–∂–∞–µ—Ç—Å—è –Ω–∞ 1024 * 1024 (—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±–∞–π—Ç–∞—Ö)

**–ü—Ä–∏–º–µ—Ä:**
```php
'max_file_size' => 50  // 50 –ú–ë
```

**–†–∞—Å—á–µ—Ç –æ–±—â–µ–≥–æ –æ–±—ä–µ–º–∞:**
```
max_files √ó max_file_size = –æ–±—â–∏–π –æ–±—ä–µ–º —Ö—Ä–∞–Ω–µ–Ω–∏—è
7 √ó 50 –ú–ë = 350 –ú–ë
```

#### `pattern` (string)

–®–∞–±–ª–æ–Ω —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –ª–æ–≥–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã.

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `'{timestamp} {level} {message} {context}'`

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã:**
- `{timestamp}` - –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ (—Ñ–æ—Ä–º–∞—Ç –∏–∑ `date_format`)
- `{level}` - —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (DEBUG, INFO, –∏ —Ç.–¥.)
- `{message}` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `{context}` - JSON –∫–æ–Ω—Ç–µ–∫—Å—Ç (–∏–ª–∏ `{}` –µ—Å–ª–∏ –ø—É—Å—Ç–æ–π)

**–ü—Ä–∏–º–µ—Ä—ã:**
```php
// –§–æ—Ä–º–∞—Ç 1: –° –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–º–∏ —Å–∫–æ–±–∫–∞–º–∏
'pattern' => '[{timestamp}] {level}: {message} {context}'
// [2024-01-15 10:30:45] INFO: –°–æ–æ–±—â–µ–Ω–∏–µ {"user_id":123}

// –§–æ—Ä–º–∞—Ç 2: –° —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏
'pattern' => '{timestamp} | {level} | {message} | {context}'
// 2024-01-15 10:30:45 | INFO | –°–æ–æ–±—â–µ–Ω–∏–µ | {"user_id":123}

// –§–æ—Ä–º–∞—Ç 3: –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π
'pattern' => '{level} - {message}'
// INFO - –°–æ–æ–±—â–µ–Ω–∏–µ
```

#### `date_format` (string)

–§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã PHP `date()`.

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `DateTimeImmutable::ATOM` (RFC 3339)

**–ü—Ä–∏–º–µ—Ä—ã:**
```php
// ISO 8601 —Å –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥–∞–º–∏
'date_format' => 'Y-m-d H:i:s.u'
// 2024-01-15 10:30:45.123456

// –ü—Ä–æ—Å—Ç–æ–π —Ñ–æ—Ä–º–∞—Ç
'date_format' => 'Y-m-d H:i:s'
// 2024-01-15 10:30:45

// RFC 3339 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
'date_format' => DateTimeImmutable::ATOM
// 2024-01-15T10:30:45+00:00

// Unix timestamp
'date_format' => 'U'
// 1705310445
```

#### `log_buffer_size` (int)

–†–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –¥–ª—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –ª–æ–≥–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é –≤ —Ñ–∞–π–ª –≤ **–∫–∏–ª–æ–±–∞–π—Ç–∞—Ö**.

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `0` (–±–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏)

**–î–∏–∞–ø–∞–∑–æ–Ω:** –º–∏–Ω–∏–º—É–º 0 –ö–ë

**–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ:** –∑–Ω–∞—á–µ–Ω–∏–µ —É–º–Ω–æ–∂–∞–µ—Ç—Å—è –Ω–∞ 1024 (—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±–∞–π—Ç–∞—Ö)

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- `0` - –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É
- `> 0` - —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ –±—É—Ñ–µ—Ä–µ –∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- Development: `0` (–±–µ–∑ –±—É—Ñ–µ—Ä–∞, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å)
- Production: `64-128` –ö–ë (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å)
- High-load: `256-512` –ö–ë (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)

**–ü—Ä–∏–º–µ—Ä:**
```php
'log_buffer_size' => 128  // 128 –ö–ë –±—É—Ñ–µ—Ä
```

**–°–±—Ä–æ—Å –±—É—Ñ–µ—Ä–∞:**
```php
$logger->flush();  // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–±—Ä–æ—Å
// –¢–∞–∫–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è:
// - –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏
// - –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ
```

#### `admin_email` (string|array)

Email –∞–¥—Ä–µ—Å(–∞) –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö.

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `[]` (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

**–§–æ—Ä–º–∞—Ç—ã:**
```php
// –û–¥–∏–Ω email
'admin_email' => 'admin@example.com'

// –ù–µ—Å–∫–æ–ª—å–∫–æ email
'admin_email' => ['admin@example.com', 'devops@example.com']
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:** –≤—Å–µ –∞–¥—Ä–µ—Å–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `filter_var(FILTER_VALIDATE_EMAIL)`

**–¢—Ä–µ–±—É–µ—Ç:** –ø–∞—Ä–∞–º–µ—Ç—Ä `email_config` (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SMTP)

#### `email_config` (array)

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Email –∫–ª–∞—Å—Å–∞ (–æ—Ç–ø—Ä–∞–≤–∫–∞ SMTP).

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –µ—Å–ª–∏:** –∑–∞–¥–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `admin_email`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```php
'email_config' => [
    'host' => 'smtp.example.com',
    'port' => 587,
    'username' => 'notifications@example.com',
    'password' => 'smtp_password',
    'encryption' => 'tls',
    'from_email' => 'noreply@example.com',
    'from_name' => 'Logger System'
]
```

#### `email_on_levels` (array)

–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `['CRITICAL']`

**–ü—Ä–∏–º–µ—Ä:**
```php
'email_on_levels' => ['ERROR', 'CRITICAL']
```

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- Email –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–¥–∞–Ω—ã `admin_email` –∏ `email_config`
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `error_log()` (–Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### –ú–µ—Ç–æ–¥—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

#### `debug(string $message, array $context = []): void`

–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –æ—Ç–ª–∞–¥–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—É—Ä–æ–≤–µ–Ω—å DEBUG).

```php
$logger->debug("–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è", ['variable' => $value]);
```

#### `info(string $message, array $context = []): void`

–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—É—Ä–æ–≤–µ–Ω—å INFO).

```php
$logger->info("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à–µ–ª –≤ —Å–∏—Å—Ç–µ–º—É", ['user_id' => 123]);
```

#### `warning(string $message, array $context = []): void`

–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (—É—Ä–æ–≤–µ–Ω—å WARNING).

```php
$logger->warning("–í—ã—Å–æ–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ CPU", ['cpu_usage' => 85]);
```

#### `error(string $message, array $context = []): void`

–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É (—É—Ä–æ–≤–µ–Ω—å ERROR).

```php
$logger->error("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î", [
    'host' => 'db.example.com',
    'error' => $e->getMessage()
]);
```

#### `critical(string $message, array $context = []): void`

–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –æ—à–∏–±–∫—É (—É—Ä–æ–≤–µ–Ω—å CRITICAL).

```php
$logger->critical("–°–∏—Å—Ç–µ–º–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞", ['reason' => 'Out of memory']);
```

#### `log(string $level, string $message, array $context = []): void`

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —É—Ä–æ–≤–Ω—è.

```php
$logger->log('INFO', "–°–æ–æ–±—â–µ–Ω–∏–µ", ['key' => 'value']);
```

**–ò—Å–∫–ª—é—á–µ–Ω–∏—è:**
- `LoggerException` - –µ—Å–ª–∏ —É—Ä–æ–≤–µ–Ω—å –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º

---

### –ú–µ—Ç–æ–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### `enable(): void`

–í–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

```php
$logger->enable();
```

#### `disable(): void`

–í—ã–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ. –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è.

```php
$logger->disable();
```

#### `isEnabled(): bool`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –≤–∫–ª—é—á–µ–Ω–æ –ª–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

```php
if ($logger->isEnabled()) {
    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ
}
```

#### `flush(): void`

–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –±—É—Ñ–µ—Ä –≤ —Ñ–∞–π–ª.

```php
$logger->flush();
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ü–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ü–µ—Ä–µ–¥ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏
- –í –∫–æ–Ω—Ü–µ —Å–∫—Ä–∏–ø—Ç–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ)

---

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã

#### `static clearAllCaches(): void`

–û—á–∏—â–∞–µ—Ç –≤—Å–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–µ—à–∏ (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö).

```php
Logger::clearAllCaches();
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏–∑–≤–Ω–µ
- –ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ –ª–æ–≥–≥–µ—Ä–∞ —Å –¥—Ä—É–≥–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

#### `static clearCacheForDirectory(string $directory): void`

–û—á–∏—â–∞–µ—Ç –∫–µ—à –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

```php
Logger::clearCacheForDirectory('/var/www/logs');
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```php
use App\Component\Logger;

$logger = new Logger([
    'directory' => '/var/www/logs',
    'file_name' => 'app.log'
]);

$logger->info("–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ");
$logger->debug("–ó–∞–≥—Ä—É–∂–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è", ['config_file' => 'app.json']);
$logger->warning("–ú–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å", ['duration' => 5.2, 'query' => 'SELECT...']);
$logger->error("–û—à–∏–±–∫–∞ API", ['endpoint' => '/api/users', 'status' => 500]);
```

### –ü—Ä–∏–º–µ—Ä 2: –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

```php
$logger->error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–∫–∞–∑–∞", [
    'order_id' => 'ORD-12345',
    'user' => [
        'id' => 123,
        'email' => 'user@example.com',
        'country' => 'RU'
    ],
    'error_details' => [
        'code' => 'PAYMENT_FAILED',
        'message' => '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤',
        'amount' => 1500.50
    ]
]);
```

### –ü—Ä–∏–º–µ—Ä 3: –†–æ—Ç–∞—Ü–∏—è –¥–ª—è –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

```php
$logger = new Logger([
    'directory' => '/var/www/logs/workers',
    'file_name' => 'worker.log',
    'max_file_size' => 100,  // 100 –ú–ë
    'max_files' => 10         // –•—Ä–∞–Ω–∏—Ç—å 10 —Ñ–∞–π–ª–æ–≤ (1 –ì–ë)
]);

// –î–æ–ª–≥–æ–∂–∏–≤—É—â–∏–π –≤–æ—Ä–∫–µ—Ä
while (true) {
    $logger->info("–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á–∏", ['task_id' => $taskId]);
    // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ ...
    $logger->flush();  // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–±—Ä–æ—Å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
}
```

### –ü—Ä–∏–º–µ—Ä 4: –†–∞–∑–Ω—ã–µ –ª–æ–≥–≥–µ—Ä—ã –¥–ª—è –º–æ–¥—É–ª–µ–π

```php
// –õ–æ–≥–≥–µ—Ä –¥–ª—è API
$apiLogger = new Logger([
    'directory' => '/var/www/logs/api',
    'file_name' => 'api.log',
    'log_level' => 'INFO'
]);

// –õ–æ–≥–≥–µ—Ä –¥–ª—è –ë–î
$dbLogger = new Logger([
    'directory' => '/var/www/logs/database',
    'file_name' => 'queries.log',
    'log_level' => 'WARNING'  // –¢–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
]);

// –õ–æ–≥–≥–µ—Ä –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
$securityLogger = new Logger([
    'directory' => '/var/www/logs/security',
    'file_name' => 'security.log',
    'log_level' => 'ERROR',
    'admin_email' => ['security@example.com'],
    'email_config' => [/* ... */],
    'email_on_levels' => ['ERROR', 'CRITICAL']
]);
```

### –ü—Ä–∏–º–µ—Ä 5: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```php
$logger = new Logger([
    'directory' => '/var/www/logs',
    'file_name' => 'app.log'
]);

// –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
$logger->disable();
$password = getUserPassword();
$logger->enable();

$logger->info("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω");
```

### –ü—Ä–∏–º–µ—Ä 6: –í—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```php
$logger = new Logger([
    'directory' => '/var/www/logs',
    'file_name' => 'high-load.log',
    'log_level' => 'WARNING',      // –¢–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
    'log_buffer_size' => 512,      // –ë–æ–ª—å—à–æ–π –±—É—Ñ–µ—Ä
    'max_file_size' => 100,        // 100 –ú–ë –Ω–∞ —Ñ–∞–π–ª
    'max_files' => 5,
    'pattern' => '{timestamp} {level} {message}'  // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
]);

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—ã—Å—è—á –∑–∞–ø—Ä–æ—Å–æ–≤
for ($i = 0; $i < 10000; $i++) {
    // –¢–æ–ª—å–∫–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏ –ø–æ–ø–∞–¥—É—Ç –≤ –ª–æ–≥
    if ($someCondition) {
        $logger->warning("–ü—Ä–æ–±–ª–µ–º–∞ #{$i}");
    }
}

$logger->flush();  // –°–±—Ä–æ—Å –≤ –∫–æ–Ω—Ü–µ
```

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–æ–¥–∏–ª–∏—Å—å –Ω–∞ PHP 8.3, 1000 –∑–∞–ø–∏—Å–µ–π:

| –°—Ü–µ–Ω–∞—Ä–∏–π | –í—Ä–µ–º—è | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|-------|-------------|
| –ë–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏ | ~16 –º—Å | –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å = I/O –æ–ø–µ—Ä–∞—Ü–∏—è |
| –° –±—É—Ñ–µ—Ä–æ–º 128 –ö–ë | ~2 –º—Å | **8x –±—ã—Å—Ç—Ä–µ–µ** |
| –° —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π —É—Ä–æ–≤–Ω—è | <1 –º—Å | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –±–µ–∑ –∑–∞–ø–∏—Å–∏ |

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**1. –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è**
```php
'log_buffer_size' => 128  // –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production
```

**2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—é**
```php
'log_level' => 'INFO'  // –ë–ª–æ–∫–∏—Ä—É–µ—Ç DEBUG —Å–æ–æ–±—â–µ–Ω–∏—è
```

**3. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –ø–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–æ–≤ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω –∏–Ω—Å—Ç–∞–Ω—Å Logger –¥–ª—è –æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

**4. –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**
```php
// –ü–ª–æ—Ö–æ: –±–æ–ª—å—à–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
$logger->info("Message", ['huge_array' => $bigData]);

// –•–æ—Ä–æ—à–æ: —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω–æ–µ
$logger->info("Message", ['id' => $id, 'count' => count($bigData)]);
```

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ò—Å–∫–ª—é—á–µ–Ω–∏—è

Logger –±—Ä–æ—Å–∞–µ—Ç –¥–≤–∞ —Ç–∏–ø–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π:

#### `LoggerValidationException`

–ë—Ä–æ—Å–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

**–°—Ü–µ–Ω–∞—Ä–∏–∏:**
- –ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ù–µ–¥–æ—Å—Ç—É–ø–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –∑–∞–ø–∏—Å–∏
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ email –∞–¥—Ä–µ—Å–∞

**–ü—Ä–∏–º–µ—Ä:**
```php
try {
    $logger = new Logger([
        'directory' => '/var/www/logs',
        'file_name' => 'app.log',
        'log_level' => 'INVALID'  // ‚ùå –ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π —É—Ä–æ–≤–µ–Ω—å
    ]);
} catch (LoggerValidationException $e) {
    echo "–û—à–∏–±–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: " . $e->getMessage();
}
```

#### `LoggerException`

–ë—Ä–æ—Å–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª –∏–ª–∏ —Ä–æ—Ç–∞—Ü–∏–∏.

**–°—Ü–µ–Ω–∞—Ä–∏–∏:**
- –û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª
- –û—à–∏–±–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤
- –ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π —É—Ä–æ–≤–µ–Ω—å –≤ –º–µ—Ç–æ–¥–µ `log()`

**–ü—Ä–∏–º–µ—Ä:**
```php
try {
    $logger->log('INVALID', 'Message');  // ‚ùå –ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π —É—Ä–æ–≤–µ–Ω—å
} catch (LoggerException $e) {
    echo "–û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: " . $e->getMessage();
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ

–í –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø–æ–¥–∞–≤–ª—è—é—Ç—Å—è –∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `error_log()`:

```php
public function __destruct()
{
    try {
        $this->flushBuffer();
    } catch (Exception $e) {
        error_log('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±—Ä–æ—Å–µ –±—É—Ñ–µ—Ä–∞ –ª–æ–≥–≥–µ—Ä–∞: ' . $e->getMessage());
    }
}
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç –≤–∫–ª—é—á–∞–µ—Ç 37 –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π:

```bash
php tests/logger_comprehensive_test.php
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
```
‚úÖ –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:      37
‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ:          37
‚úÖ –£—Å–ø–µ—à–Ω–æ—Å—Ç—å:        100%
‚úÖ –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:  0.04 —Å–µ–∫
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã —Å–æ –≤—Å–µ–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```bash
php production/configs/logger.examples.php
```

### –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

1. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** - –≤–∞–ª–∏–¥–∞—Ü–∏—è directory, file_name
2. **–ë–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ –º–µ—Ç–æ–¥—ã (debug, info, warning, error, critical)
3. **–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ min_level
4. **–†–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤** - max_file_size, max_files
5. **–ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è** - log_buffer_size, flush()
6. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - pattern, date_format
7. **–ö–æ–Ω—Ç—Ä–æ–ª—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è** - enable(), disable(), isEnabled()
8. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - clearAllCaches(), clearCacheForDirectory()
9. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö
10. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –û—Ç—á–µ—Ç—ã

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:
- `tests/LOGGER_TEST_REPORT.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
- –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤ –≤ `/tmp/logger_examples/`

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª

–ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤:

**`production/configs/logger.json`**

–í–∫–ª—é—á–∞–µ—Ç:
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –î–æ–ø—É—Å—Ç–∏–º—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏–π
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏ –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

## –õ–∏—Ü–µ–Ω–∑–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**PHP:** 8.1+  
**–ê–≤—Ç–æ—Ä:** [Your Name]  
**–õ–∏—Ü–µ–Ω–∑–∏—è:** MIT

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `docs/Logger/README.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `production/configs/logger.json` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- `production/configs/logger.examples.php` - –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
- `tests/LOGGER_TEST_REPORT.md` - –æ—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

---

## –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä

```php
use App\Component\Logger;

$logger = new Logger([
    'directory' => '/var/www/logs',
    'file_name' => 'app.log'
]);

$logger->info("Hello, World!");
```

### Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```php
$logger = new Logger([
    'directory' => '/var/www/logs/production',
    'file_name' => 'app.log',
    'log_level' => 'INFO',
    'max_files' => 7,
    'max_file_size' => 50,
    'log_buffer_size' => 128,
    'pattern' => '[{timestamp}] {level}: {message} {context}',
    'date_format' => 'Y-m-d H:i:s'
]);
```

### –í—Å–µ –º–µ—Ç–æ–¥—ã

```php
// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
$logger->debug($msg, $ctx);
$logger->info($msg, $ctx);
$logger->warning($msg, $ctx);
$logger->error($msg, $ctx);
$logger->critical($msg, $ctx);
$logger->log($level, $msg, $ctx);

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
$logger->enable();
$logger->disable();
$logger->isEnabled();
$logger->flush();

// –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ
Logger::clearAllCaches();
Logger::clearCacheForDirectory($dir);
```

---

**‚úÖ Logger.class.php –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production!**
