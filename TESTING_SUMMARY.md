# –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è RSS Ingest

## –°—Ç–∞—Ç—É—Å: ‚úÖ –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã ‚ö°
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω MariaDB 10.11.13
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ë–î `rss2tlg_production`
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω PHP 8.3.6 —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ Composer
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å—Ö–µ–º–∞ –ë–î (7 —Ç–∞–±–ª–∏—Ü)

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ üéØ
- ‚úÖ –ó–∞–ø—É—â–µ–Ω —Å–∫—Ä–∏–ø—Ç –≤ —Ä–µ–∂–∏–º–µ TEST_MODE
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ 4 –∏—Å—Ç–æ—á–Ω–∏–∫–∞, 40 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- ‚úÖ 0 –æ—à–∏–±–æ–∫, 100% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å
- ‚úÖ –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 68.48 —Å–µ–∫

### 3. –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è üîß

#### ‚ùå –ü–†–û–ë–õ–ï–ú–ê: HTML –Ω–µ –æ—á–∏—â–∞–ª—Å—è –∏–∑ –ø–æ–ª—è content
**–ë—ã–ª–æ**: 
```html
<p>–¢–µ–∫—Å—Ç —Å <a href="#">—Å—Å—ã–ª–∫–æ–π</a></p>
```

**–°—Ç–∞–ª–æ**:
```
–¢–µ–∫—Å—Ç —Å —Å—Å—ã–ª–∫–æ–π
```

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–∏–º–µ–Ω–µ–Ω `WebtExtractor::extractCleanText()` –∫ –ø–æ–ª—é content –∏–∑ RSS

#### –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
1. `parseRSS()` - –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `$extractor`
2. `parseRSSItem()` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ HTML —á–µ—Ä–µ–∑ WebtExtractor
3. `parseAtomItem()` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ HTML —á–µ—Ä–µ–∑ WebtExtractor
4. `processFeed()` - WebtExtractor —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞

### 4. –ê–Ω–∞–ª–∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ üìä

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | –í–µ—Ä–¥–∏–∫—Ç |
|----------|--------------|---------|
| `cron_interval_minutes: 2` | ‚ùå | ‚ö†Ô∏è –ò–∑–±—ã—Ç–æ—á–Ω—ã–π |
| `fetch_timeout: 30` | ‚úÖ | ‚úÖ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–π |
| `max_retries: 3` | ‚ö†Ô∏è –ö–æ—Å–≤–µ–Ω–Ω–æ | ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ WebtExtractor |
| `extract_content_from_link: true` | ‚úÖ | ‚úÖ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–π |
| `content_extraction_delay: 5` | ‚úÖ | ‚úÖ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–π |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ü–∞—Ä–∞–º–µ—Ç—Ä `cron_interval_minutes` –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å.

### 5. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã üìà

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º**:
```
Feed 1 (–†–ò–ê –ù–æ–≤–æ—Å—Ç–∏):  10 items, content –æ—á–∏—â–µ–Ω –æ—Ç HTML ‚úÖ
Feed 2 (–ö–æ–º–º–µ—Ä—Å–∞–Ω—Ç—ä):   10 items, –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑–≤–ª–µ—á–µ–Ω —Å –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü ‚úÖ
Feed 3 (–ò–Ω—Ç–µ—Ä—Ñ–∞–∫—Å):     10 items, –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑–≤–ª–µ—á–µ–Ω —Å –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü ‚úÖ
Feed 4 (TechCrunch):    10 items, –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑–≤–ª–µ—á–µ–Ω —Å –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü ‚úÖ
```

**–ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö**:
- ‚úÖ –í—Å–µ content –±–µ–∑ HTML —Ç–µ–≥–æ–≤
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–µ–ª–æ–≤
- ‚úÖ HTML entities –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ–∫—Å—Ç–∞

### 6. –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã üìÅ

**–û—Ç—á–µ—Ç—ã**:
- `TEST_REPORT_RSS_INGEST_FINAL.md` - –ü–æ–ª–Ω—ã–π –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç (70+ —Ä–∞–∑–¥–µ–ª–æ–≤)
- `TESTING_SUMMARY.md` - –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

**–õ–æ–≥–∏**:
- `logs/rss_ingest.log` (63KB) - –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ —Å–∫—Ä–∏–ø—Ç–∞
- `logs/test_run_output_v2.log` (9.4KB) - –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥

**SQL –¥–∞–º–ø—ã**:
- `logs/dump_rss_ingest_test_final_20251113_160528.sql` (444KB) - –ü–æ–ª–Ω—ã–π –¥–∞–º–ø –ë–î

### 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü –ë–î ‚úÖ

```sql
SELECT * FROM rss2tlg_items WHERE feed_id=1 LIMIT 1;
-- ‚úÖ content: —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç –±–µ–∑ HTML
-- ‚úÖ extracted_content: NULL (–±—ã–ª content –≤ RSS)

SELECT * FROM rss2tlg_items WHERE feed_id=2 LIMIT 1;
-- ‚úÖ content: NULL (–Ω–µ –±—ã–ª–æ –≤ RSS)
-- ‚úÖ extracted_content: —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç —Å –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã
```

### 8. –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ ‚úÖ

- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã passed (4/4 –∏—Å—Ç–æ—á–Ω–∏–∫–∞)
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –õ–æ–≥–∏ –ø–æ–ª–Ω—ã–µ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
- ‚úÖ –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- ‚úÖ –ë–î –≤ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- ‚úÖ **HTML –æ—á–∏—â–µ–Ω –∏–∑ content** ‚Üê **–ì–õ–ê–í–ù–´–ô –ö–†–ò–¢–ï–†–ò–ô**

---

## –ì–æ—Ç–æ–≤–æ –∫ production! üöÄ

–°–∫—Ä–∏–ø—Ç `production/rss_ingest.php` –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω.

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**:
1. –í–µ—Ä–Ω—É—Ç—å `test_mode: false` –≤ –∫–æ–Ω—Ñ–∏–≥–µ ‚úÖ (—Å–¥–µ–ª–∞–Ω–æ)
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å cron –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤

---

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
mysql -h 127.0.0.1 -u rss2tlg -p'rss2tlg_pass_2025' rss2tlg_production -e "SELECT COUNT(*) FROM rss2tlg_items;"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
tail -f /home/engine/project/logs/rss_ingest.log

# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞
php /home/engine/project/production/rss_ingest.php
```

---

**–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: 2025-11-13  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å**: AI Agent (cto.new)  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ COMPLETED
