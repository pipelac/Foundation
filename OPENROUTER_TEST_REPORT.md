# –û—Ç—á–µ—Ç –æ –ø–æ–ª–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ OpenRouter –∏ OpenRouterMetrics

**–î–∞—Ç–∞:** 2025-10-30  
**–í–µ—Ä—Å–∏—è:** PHP 8.1+  
**–¢–µ—Å—Ç–æ–≤—ã–π API –∫–ª—é—á:** `sk-or-v1-c31...7e5`  
**–õ–∏–º–∏—Ç:** $1.00  

---

## üìä –°–≤–æ–¥–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤** | 14 |
| **–£—Å–ø–µ—à–Ω–æ** | 14 (100%) |
| **–û—à–∏–±–æ–∫** | 0 |
| **–ü–æ—Ç—Ä–∞—á–µ–Ω–æ** | ~$0.000006 |
| **–û—Å—Ç–∞—Ç–æ–∫ –±–∞–ª–∞–Ω—Å–∞** | $0.999994 |

---

## üéØ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### OpenRouterMetrics

#### ‚úÖ getKeyInfo()
**–°—Ç–∞—Ç—É—Å:** –£—Å–ø–µ—à–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ API –∫–ª—é—á–µ  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª—é—á–∞: `sk-or-v1-c31...7e5`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: $0.000006
- –õ–∏–º–∏—Ç: $1.00
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å: –ù–µ—Ç
- Rate limit: –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –¥–µ—Ç–∞–ª—è–º–∏ (status_code, duration, body_size)

---

#### ‚úÖ getBalance()
**–°—Ç–∞—Ç—É—Å:** –£—Å–ø–µ—à–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** $0.999994  
**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

#### ‚úÖ getUsageStats()
**–°—Ç–∞—Ç—É—Å:** –£—Å–ø–µ—à–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: $0.000006
- –û—Å—Ç–∞—Ç–æ–∫: $0.999994
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: 0%
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å: –ù–µ—Ç

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

#### ‚úÖ getRateLimits()
**–°—Ç–∞—Ç—É—Å:** –£—Å–ø–µ—à–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –õ–∏–º–∏—Ç—ã –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã  
**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

#### ‚úÖ getAccountStatus()
**–°—Ç–∞—Ç—É—Å:** –£—Å–ø–µ—à–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –ª–æ–≥–∞—Ö

---

#### ‚úÖ getModels()
**–°—Ç–∞—Ç—É—Å:** –£—Å–ø–µ—à–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—É—á–µ–Ω–æ 349 –º–æ–¥–µ–ª–µ–π  
**–ü—Ä–∏–º–µ—Ä—ã –º–æ–¥–µ–ª–µ–π:**
- Mistral: Voxtral Small 24B 2507 (prompt: $0.0000001/1M)
- OpenAI: gpt-oss-safeguard-20b (prompt: $0.000000075/1M)
- NVIDIA: Nemotron Nano 12B 2 VL (free) (prompt: $0/1M)

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã –∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã

---

#### ‚úÖ getModelInfo()
**–°—Ç–∞—Ç—É—Å:** –£—Å–ø–µ—à–Ω–æ (–∫–æ—Å–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ estimateCost)  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏  
**–¢–µ—Å—Ç–∏—Ä—É–µ–º–∞—è –º–æ–¥–µ–ª—å:** `openai/gpt-3.5-turbo`  
**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

#### ‚úÖ estimateCost()
**–°—Ç–∞—Ç—É—Å:** –£—Å–ø–µ—à–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞  
**–¢–µ—Å—Ç–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –ú–æ–¥–µ–ª—å: `openai/gpt-3.5-turbo`
- Prompt tokens: 100
- Completion tokens: 50

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–æ–∏–º–æ—Å—Ç—å prompt: $0.00005
- –°—Ç–æ–∏–º–æ—Å—Ç—å completion: $0.000075
- –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: $0.000125

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

---

#### ‚úÖ hasEnoughBalance()
**–°—Ç–∞—Ç—É—Å:** –£—Å–ø–µ—à–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏ –±–∞–ª–∞–Ω—Å–∞  
**–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:** $0.01  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–∞–ª–∞–Ω—Å –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω  
**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### OpenRouter

#### ‚úÖ text2text()
**–°—Ç–∞—Ç—É—Å:** –£—Å–ø–µ—à–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –¢–µ–∫—Å—Ç–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è  
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–∞:**
- –ú–æ–¥–µ–ª—å: `openai/gpt-3.5-turbo`
- –ü—Ä–æ–º–ø—Ç: "Say 'OK'"
- max_tokens: 10
- temperature: 0.1

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–≤–µ—Ç: "OK"
- –î–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞: 2 —Å–∏–º–≤–æ–ª–∞
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~0.9 —Å–µ–∫—É–Ω–¥

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø—Ä–æ—Å–µ –∏ –æ—Ç–≤–µ—Ç–µ

---

#### ‚úÖ textStream()
**–°—Ç–∞—Ç—É—Å:** –£—Å–ø–µ—à–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Ç–µ–∫—Å—Ç–∞  
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–∞:**
- –ú–æ–¥–µ–ª—å: `openai/gpt-3.5-turbo`
- –ü—Ä–æ–º–ø—Ç: "Count: 1, 2, 3"
- max_tokens: 20
- temperature: 0.1

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ–ª—É—á–µ–Ω–æ —á–∞–Ω–∫–æ–≤: 10
- –ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç: "4, 5, 6"
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~0.6 —Å–µ–∫—É–Ω–¥
- –ü–æ–ª—É—á–µ–Ω–æ –±–∞–π—Ç: 3320

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üîí –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### ‚úÖ –ü—É—Å—Ç–∞—è –º–æ–¥–µ–ª—å
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–ª–æ–≤–ª–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `OpenRouterValidationException`  
**–°–æ–æ–±—â–µ–Ω–∏–µ:** "–ü–∞—Ä–∞–º–µ—Ç—Ä \"model\" –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º."

### ‚úÖ –ü—É—Å—Ç–æ–π –ø—Ä–æ–º–ø—Ç
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–π –ø—Ä–æ–º–ø—Ç  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–ª–æ–≤–ª–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `OpenRouterValidationException`  
**–°–æ–æ–±—â–µ–Ω–∏–µ:** "–ü–∞—Ä–∞–º–µ—Ç—Ä \"prompt\" –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º."

### ‚úÖ –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–ª–æ–≤–ª–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `OpenRouterValidationException`  
**–°–æ–æ–±—â–µ–Ω–∏–µ:** "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º."

### ‚úÖ –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–ª–æ–≤–ª–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `OpenRouterValidationException`  
**–°–æ–æ–±—â–µ–Ω–∏–µ:** "–°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π."

---

## üêõ –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

### 1. –ü—Ä–æ–±–ª–µ–º–∞ —Å base_uri –≤ Guzzle

**–û—à–∏–±–∫–∞:**  
API –≤–æ–∑–≤—Ä–∞—â–∞–ª HTML —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–º–µ—Å—Ç–æ JSON, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è.

**–ü—Ä–∏—á–∏–Ω–∞:**  
`base_uri` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Http –∫–ª–∏–µ–Ω—Ç–∞ –Ω–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–ª—Å—è –Ω–∞ `/`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—é URL –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```php
// –ë—ã–ª–æ
private const BASE_URL = 'https://openrouter.ai/api/v1';

// –°—Ç–∞–ª–æ
private const BASE_URL = 'https://openrouter.ai/api/v1/';
```

–¢–∞–∫–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω `ltrim($endpoint, '/')` –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–ª—ç—à–∞ –∏–∑ endpoint.

**–§–∞–π–ª—ã:**
- `/src/OpenRouter.class.php` (—Å—Ç—Ä–æ–∫–∏ 29, 379, 423)
- `/src/OpenRouterMetrics.class.php` (—Å—Ç—Ä–æ–∫–∏ 24, 481)

---

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏ —Ç—Ä–µ–±—É—é—Ç –æ—Å–æ–±—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (data policy) –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:
- `nvidia/nemotron-nano-12b-v2-vl:free` - —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ data policy
- `minimax/minimax-m2:free` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `reasoning` –≤–º–µ—Å—Ç–æ `content`
- `alibaba/tongyi-deepresearch-30b-a3b:free` - –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**  
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ–π, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ `openai/gpt-3.5-turbo` –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –≤–º–µ—Å—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏.

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚úÖ **–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**

### –¢–∏–ø—ã –ª–æ–≥–∏—Ä—É–µ–º—ã—Ö —Å–æ–±—ã—Ç–∏–π:

1. **INFO** - —É—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
   - HTTP –∑–∞–ø—Ä–æ—Å—ã —Å –¥–µ—Ç–∞–ª—è–º–∏ (–º–µ—Ç–æ–¥, URI, –∫–æ–¥, –≤—Ä–µ–º—è, —Ä–∞–∑–º–µ—Ä)
   - –£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
   - –í–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)

2. **ERROR** - –æ—à–∏–±–∫–∏:
   - –û—à–∏–±–∫–∏ API —Å –∫–æ–¥–æ–º –æ—Ç–≤–µ—Ç–∞
   - –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - –°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏
   - Stack trace –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

3. **WARNING** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:
   - –ù–µ—É—Å–ø–µ—à–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã (4xx, 5xx)

### –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞:
```
2025-10-30T19:22:20+00:00 INFO HTTP –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω [POST chat/completions] –∫–æ–¥ 200 {
    "method":"POST",
    "uri":"chat/completions",
    "status_code":200,
    "duration":0.925,
    "body_size":532,
    "content_type":"application/json"
}
```

---

## üí∞ –ê–Ω–∞–ª–∏–∑ –∑–∞—Ç—Ä–∞—Ç

### –†–µ–∞–ª—å–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç–µ—Å—Ç—ã
- **–í—Å–µ–≥–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ:** ~$0.000006
- **–ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –ª–∏–º–∏—Ç–∞:** 0.0006%
- **–û—Å—Ç–∞—Ç–æ–∫:** $0.999994

### –†–∞–∑–±–∏–≤–∫–∞ –ø–æ –æ–ø–µ—Ä–∞—Ü–∏—è–º:
1. **–ú–µ—Ç—Ä–∏–∫–∏ (8 —Ç–µ—Å—Ç–æ–≤):** ~$0 (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
2. **text2text (1 –∑–∞–ø—Ä–æ—Å):** ~$0.000003
3. **textStream (1 –∑–∞–ø—Ä–æ—Å):** ~$0.000003
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è (4 —Ç–µ—Å—Ç–∞):** $0 (–±–µ–∑ API –≤—ã–∑–æ–≤–æ–≤)

### –í—ã–≤–æ–¥
–í—Å–µ —Ç–µ—Å—Ç—ã —É–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –≤ –ª–∏–º–∏—Ç $1, —Å –±–æ–ª—å—à–∏–º –∑–∞–ø–∞—Å–æ–º. –¢–µ–∫—É—â–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã —Å–æ—Å—Ç–∞–≤–ª—è—é—Ç –º–µ–Ω–µ–µ 0.001% –æ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞.

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–¥–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `minimax/minimax-m2:free`) –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ—Ç–≤–µ—Ç –≤ –ø–æ–ª–µ `reasoning` –≤–º–µ—Å—Ç–æ `content`. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å fallback –¥–ª—è —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤:

```php
// –í –º–µ—Ç–æ–¥–µ text2text()
$content = $response['choices'][0]['message']['content'] 
    ?? $response['choices'][0]['message']['reasoning'] 
    ?? '';
```

### 2. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–æ–¥–µ–ª–µ–π
–ú–µ—Ç–æ–¥ `getModels()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–æ–ª—å—à–æ–π –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö (481KB). –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL 1-24 —á–∞—Å–∞.

### 3. Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏ —á–∞—Å—Ç–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã (404). –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å fallback –Ω–∞ –ø–ª–∞—Ç–Ω—É—é –º–æ–¥–µ–ª—å –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ.

### 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–∞–ª–∞–Ω—Å–∞
–î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –±–∞–ª–∞–Ω—Å–∞ –ø–µ—Ä–µ–¥ –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏:

```php
if (!$metrics->hasEnoughBalance($estimatedCost)) {
    throw new InsufficientBalanceException();
}
```

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ (14/14, 100%).**

### –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –º–æ–¥–µ–ª–µ–π
- ‚úÖ –û—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –¢–µ–∫—Å—Ç–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è)
- ‚úÖ –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:
- ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Å base_uri –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º URL
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:
- ‚úÖ –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è (PHP 8.1+)
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∏–ª—é –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

**–ö–ª–∞—Å—Å—ã OpenRouter –∏ OpenRouterMetrics –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.**

---

## üìÇ –§–∞–π–ª—ã

- **–ò—Å—Ö–æ–¥–Ω—ã–µ –∫–ª–∞—Å—Å—ã:**
  - `/src/OpenRouter.class.php`
  - `/src/OpenRouterMetrics.class.php`

- **–¢–µ—Å—Ç—ã:**
  - `/tests/Unit/OpenRouterTest.php`
  - `/tests/Unit/OpenRouterMetricsTest.php`
  - `/tests/Integration/OpenRouterFullTest.php`

- **–õ–æ–≥–∏:**
  - `/logs_openrouter_test/openrouter_full_test.log`

- **–û—Ç—á–µ—Ç—ã:**
  - `/OPENROUTER_TEST_REPORT.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
