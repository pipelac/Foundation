# –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞: Rss2Tlg Fetch Module

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

–°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å **fetch** –¥–ª—è –∫–æ–Ω–≤–µ–π–µ—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ RSS/Atom –ª–µ–Ω—Ç.

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. DTO –∫–ª–∞—Å—Å—ã (4 —Ñ–∞–π–ª–∞, ~680 —Å—Ç—Ä–æ–∫)
- ‚úÖ **FeedConfig** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π URL –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ **FeedState** ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (ETag, Last-Modified, backoff, —Å—á—ë—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫)
- ‚úÖ **RawItem** ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –ª–µ–Ω—Ç—ã —Å content hash –¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
- ‚úÖ **FetchResult** ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ fetch —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏

#### 2. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã (2 —Ñ–∞–π–ª–∞, ~890 —Å—Ç—Ä–æ–∫)
- ‚úÖ **FetchRunner** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –æ–ø—Ä–æ—Å–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
  - Conditional GET (If-None-Match, If-Modified-Since)
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ 200/304/4xx/5xx —Å—Ç–∞—Ç—É—Å–æ–≤
  - –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
  - –ü–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ SimplePie
  - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ—Ç—Ä–∏–∫–∏
  
- ‚úÖ **FeedStateRepository** ‚Äî —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î:
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ ID –∏ URL
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ backoff
  - –°–±—Ä–æ—Å –æ—à–∏–±–æ–∫
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤ backoff

#### 3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (8 —Ñ–∞–π–ª–æ–≤, ~2800 —Å—Ç—Ä–æ–∫)
- ‚úÖ **README.md** ‚Äî –æ–±–∑–æ—Ä –º–æ–¥—É–ª—è —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏
- ‚úÖ **INSTALL.md** ‚Äî –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- ‚úÖ **QUICKSTART.md** ‚Äî –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 5 –º–∏–Ω—É—Ç
- ‚úÖ **docs/README.md** ‚Äî –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ **docs/API.md** ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –≤—Å–µ–º –∫–ª–∞—Å—Å–∞–º –∏ –º–µ—Ç–æ–¥–∞–º
- ‚úÖ **docs/schema.sql** ‚Äî SQL —Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã feed_state
- ‚úÖ **docs/config.example.json** ‚Äî –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ **FILELIST.md** ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –º–æ–¥—É–ª—è

#### 4. –ü—Ä–∏–º–µ—Ä—ã (4 —Ñ–∞–π–ª–∞, ~680 —Å—Ç—Ä–æ–∫)
- ‚úÖ **quick_test.php** ‚Äî –±—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç DTO –±–µ–∑ –ë–î
- ‚úÖ **parse_rss_demo.php** ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ RSS/Atom
- ‚úÖ **fetch_single.php** ‚Äî –æ–ø—Ä–æ—Å –æ–¥–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
- ‚úÖ **fetch_example.php** ‚Äî –æ–ø—Ä–æ—Å –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

#### 5. Unit —Ç–µ—Å—Ç—ã (2 —Ñ–∞–π–ª–∞, ~330 —Å—Ç—Ä–æ–∫)
- ‚úÖ **FeedConfigTest.php** ‚Äî 8 —Ç–µ—Å—Ç–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ **FeedStateTest.php** ‚Äî 9 —Ç–µ—Å—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤** | 20 |
| **PHP –∫–æ–¥** | 1556 —Å—Ç—Ä–æ–∫ |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | ~2800 —Å—Ç—Ä–æ–∫ |
| **–ü—Ä–∏–º–µ—Ä—ã** | ~680 —Å—Ç—Ä–æ–∫ |
| **–¢–µ—Å—Ç—ã** | ~330 —Å—Ç—Ä–æ–∫ |
| **–ò—Ç–æ–≥–æ** | ~5366 —Å—Ç—Ä–æ–∫ |

---

## üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

#### ‚úÖ –í—Ö–æ–¥
- [x] –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ JSON (`FeedConfig::fromArray()`)
- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è URL, timeout, retries, polling_interval
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö headers –∏ parser_options
- [x] –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ proxy

#### ‚úÖ HTTP –∑–∞–ø—Ä–æ—Å—ã
- [x] Conditional GET —á–µ—Ä–µ–∑ If-None-Match –∏ If-Modified-Since
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ 304 Not Modified –±–µ–∑ –ø–∞—Ä—Å–∏–Ω–≥–∞
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ gzip/deflate (—á–µ—Ä–µ–∑ Guzzle)
- [x] –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ timeout –∏ retries
- [x] –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ Retry-After –¥–ª—è 429/503

#### ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥
- [x] SimplePie –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ RSS/Atom
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ RSS 0.9x/1.0/2.0 –∏ Atom 0.3/1.0
- [x] –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–æ–∫ (UTF-8)
- [x] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ SimplePie –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [x] –õ–∏–º–∏—Ç max_items –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### ‚úÖ –í—ã—Ö–æ–¥
- [x] `FetchResult` —Å –º–∞—Å—Å–∏–≤–æ–º `RawItem[]`
- [x] –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è: guid, link, title, summary, content
- [x] –ê–≤—Ç–æ—Ä—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, enclosures, pubDate
- [x] **contentHash** –¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
- [x] –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π `FeedState` —Å ETag, Last-Modified
- [x] –ú–µ—Ç—Ä–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

#### ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ—Ç—Ä–∏–∫–∏
- [x] –õ–æ–≥–∏ –Ω–∞—á–∞–ª–∞/–∫–æ–Ω—Ü–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏
- [x] HTTP —Å—Ç–∞—Ç—É—Å—ã –∏ —Ä–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞
- [x] –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- [x] –°–æ–±—ã—Ç–∏—è –æ—à–∏–±–æ–∫ –∏ backoff
- [x] –°—á—ë—Ç—á–∏–∫–∏: fetch_total, fetch_200, fetch_304, fetch_errors, parse_errors, items_parsed

#### ‚úÖ –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
- [x] –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î (feed_state —Ç–∞–±–ª–∏—Ü–∞)
- [x] –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

#### ‚úÖ –Ø–∑—ã–∫ –∏ —Å—Ç–∏–ª—å
- [x] PHP 8.1+ —Å `declare(strict_types=1)`
- [x] –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- [x] PHPDoc –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- [x] –û–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –∫–ª–∞—Å—Å–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤
- [x] –ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è —Å–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑ –∏–∑–ª–∏—à–Ω–∏—Ö –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π
- [x] –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

#### ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è SimplePie
- [x] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –∫–µ—à-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π
- [x] –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–ª–µ–π —Å —É—á—ë—Ç–æ–º null
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ RSS –∏ Atom
- [x] –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ `RawItem::fromSimplePieItem()`

#### ‚úÖ Conditional GET
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ETag –∏ Last-Modified –≤ –ë–î
- [x] –û—Ç–ø—Ä–∞–≤–∫–∞ If-None-Match –∏ If-Modified-Since
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ 304 –±–µ–∑ –ø–∞—Ä—Å–∏–Ω–≥–∞ (—Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫)
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –∏–∑ –Ω–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

#### ‚úÖ –û—à–∏–±–∫–∏ –∏ —Ä–µ—Ç—Ä–∞–∏
- [x] –†–∞–∑–ª–∏—á–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö, HTTP –∏ –ø–∞—Ä—Å–∏–Ω–≥-–æ—à–∏–±–æ–∫
- [x] –£–≤–µ–ª–∏—á–µ–Ω–∏–µ error_count –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
- [x] Exponential backoff: 120 ‚Üí 240 ‚Üí 480 ‚Üí 900 —Å–µ–∫ (–º–∞–∫—Å 15 –º–∏–Ω)
- [x] –°–±—Ä–æ—Å –æ—à–∏–±–æ–∫ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º fetch
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Retry-After –∑–∞–≥–æ–ª–æ–≤–∫–∞

#### ‚úÖ –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ —Å—Ö–µ–º—ã
- [x] –ü–æ–ª–Ω–∞—è PHPDoc –¥–ª—è –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤
- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ `FeedConfig`
- [x] –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ readonly –≤ DTO
- [x] –ú–µ—Ç–æ–¥—ã `toArray()` –¥–ª—è –≤—Å–µ—Ö DTO

#### ‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ
- [x] SQL —Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã `rss2tlg_feed_state`
- [x] –ü–æ–ª—è: id, feed_id, url, etag, last_modified, last_status, error_count, backoff_until, fetched_at, updated_at
- [x] UNIQUE –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ feed_id –∏ url
- [x] –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

#### ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] Unit —Ç–µ—Å—Ç—ã –¥–ª—è DTO (FeedConfig, FeedState)
- [x] –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–æ–≤: 200/304/4xx/5xx, –≤–∞–ª–∏–¥–∞—Ü–∏—è, backoff
- [x] –ü—Ä–∏–º–µ—Ä—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ RSS –ª–µ–Ω—Ç–∞–º–∏
- [x] –î–µ–º–æ –±–µ–∑ –ë–î –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª—è

### 1. Conditional GET (—ç–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞)

**–ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å:**
```
GET /rss HTTP/1.1
‚Üí 200 OK (45 KB)
‚Üê –°–æ—Ö—Ä–∞–Ω—è–µ–º ETag: "abc123", Last-Modified: "Mon, 15 Jan 2024 10:00:00 GMT"
```

**–°–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã:**
```
GET /rss HTTP/1.1
If-None-Match: "abc123"
If-Modified-Since: Mon, 15 Jan 2024 10:00:00 GMT
‚Üí 304 Not Modified (500 bytes)
‚Üê –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–∞—Ä—Å–∏–Ω–≥, –æ–±–Ω–æ–≤–ª—è–µ–º –º–µ—Ç—Ä–∏–∫–∏
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~90% —Ç—Ä–∞—Ñ–∏–∫–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### 2. Exponential Backoff

```
–ü–æ–ø—ã—Ç–∫–∞ 1: –û—à–∏–±–∫–∞ 503 ‚Üí Backoff 120 —Å–µ–∫ (2 –º–∏–Ω)
–ü–æ–ø—ã—Ç–∫–∞ 2: –û—à–∏–±–∫–∞ 503 ‚Üí Backoff 240 —Å–µ–∫ (4 –º–∏–Ω)
–ü–æ–ø—ã—Ç–∫–∞ 3: –û—à–∏–±–∫–∞ 503 ‚Üí Backoff 480 —Å–µ–∫ (8 –º–∏–Ω)
–ü–æ–ø—ã—Ç–∫–∞ 4+: –û—à–∏–±–∫–∞ 503 ‚Üí Backoff 900 —Å–µ–∫ (15 –º–∏–Ω, –º–∞–∫—Å–∏–º—É–º)

–£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å ‚Üí –°–±—Ä–æ—Å error_count –∏ backoff
```

### 3. Content Hash –¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏

```php
$item->contentHash; // "bdecc80336a3d349750d7247c6d7c97a"

// –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–∑:
1. GUID (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
2. –ò–ª–∏: Link + Title + Content (–ø–µ—Ä–≤—ã–µ 500 —Å–∏–º–≤–æ–ª–æ–≤)

// –£—Å—Ç–æ–π—á–∏–≤ –∫:
- –ò–∑–º–µ–Ω–µ–Ω–∏—è–º –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤
- –†–∞–∑–ª–∏—á–∏—è–º –≤ HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏—è–º –∫–æ–¥–∏—Ä–æ–≤–∫–∏
```

### 4. –î–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

```php
$metrics = $fetchRunner->getMetrics();
[
    'fetch_total' => 10,       // –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤
    'fetch_200' => 6,          // –£—Å–ø–µ—à–Ω—ã—Ö (200 OK)
    'fetch_304' => 3,          // Not Modified
    'fetch_errors' => 1,       // –û—à–∏–±–∫–∏
    'parse_errors' => 0,       // –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
    'items_parsed' => 142,     // –≠–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–∑–≤–ª–µ—á–µ–Ω–æ
]
```

### 5. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

SimplePie Item ‚Üí RawItem (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç):

```php
class RawItem {
    public ?string $guid;
    public ?string $link;
    public ?string $title;
    public ?string $summary;      // description/summary
    public ?string $content;      // –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
    public array $authors;        // ["John Doe", "Jane Smith"]
    public array $categories;     // ["Tech", "PHP", "News"]
    public ?array $enclosure;     // ['url' => ..., 'type' => ..., 'length' => ...]
    public ?int $pubDate;         // Unix timestamp
    public string $contentHash;   // MD5 —Ö—ç—à –¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
}
```

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã
1. **[QUICKSTART.md](QUICKSTART.md)** ‚Äî –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 5 –º–∏–Ω—É—Ç
2. **[README.md](README.md)** ‚Äî –æ–±–∑–æ—Ä –º–æ–¥—É–ª—è
3. **[examples/rss2tlg/quick_test.php](../../examples/rss2tlg/quick_test.php)** ‚Äî —Ç–µ—Å—Ç –±–µ–∑ –ë–î

### –î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
1. **[INSTALL.md](INSTALL.md)** ‚Äî –ø–æ—à–∞–≥–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
2. **[docs/schema.sql](docs/schema.sql)** ‚Äî SQL —Å—Ö–µ–º–∞
3. **[docs/config.example.json](docs/config.example.json)** ‚Äî –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
1. **[docs/API.md](docs/API.md)** ‚Äî –ø–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API
2. **[docs/README.md](docs/README.md)** ‚Äî –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
3. **[tests/Rss2Tlg/DTO/](../../tests/Rss2Tlg/DTO/)** ‚Äî unit —Ç–µ—Å—Ç—ã

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### 1. –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (–±–µ–∑ –ë–î)
```bash
composer dump-autoload
php examples/rss2tlg/quick_test.php
# ‚úì –í—Å–µ –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!
```

### 2. –ü–∞—Ä—Å–∏–Ω–≥ —Ä–µ–∞–ª—å–Ω—ã—Ö –ª–µ–Ω—Ç (–±–µ–∑ –ë–î)
```bash
php examples/rss2tlg/parse_rss_demo.php
php examples/rss2tlg/parse_rss_demo.php "https://habr.com/ru/rss/best/daily/"
# ‚úì –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ
```

### 3. –° –ë–î (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
```bash
# –ò–º–ø–æ—Ä—Ç —Å—Ö–µ–º—ã
mysql -u root -p rss2tlg < src/Rss2Tlg/docs/schema.sql

# –û–ø—Ä–æ—Å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
php examples/rss2tlg/fetch_single.php
php examples/rss2tlg/fetch_example.php
# ‚úì –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω
```

---

## üéØ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∫–æ–Ω–≤–µ–π–µ—Ä

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              RSS/Atom Pipeline                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

 [1. FETCH] ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ RawItem[] + FeedState
    ‚îÇ                   ‚îÇ
    ‚îÇ                   ‚îî‚îÄ‚ñ∫ contentHash –¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
    ‚îÇ                   ‚îî‚îÄ‚ñ∫ normalized fields
    ‚îÇ
    ‚ñº
 [2. ANALYZE] ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ Filtered items
    ‚îÇ                   ‚îÇ
    ‚îÇ                   ‚îî‚îÄ‚ñ∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è
    ‚îÇ                   ‚îî‚îÄ‚ñ∫ –æ—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
    ‚îÇ                   ‚îî‚îÄ‚ñ∫ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∞–º–∞
    ‚îÇ
    ‚ñº
 [3. DEDUPLICATE] ‚îÄ‚ñ∂ Unique items
    ‚îÇ                   ‚îÇ
    ‚îÇ                   ‚îî‚îÄ‚ñ∫ –ø—Ä–æ–≤–µ—Ä–∫–∞ contentHash
    ‚îÇ                   ‚îî‚îÄ‚ñ∫ —Ö—Ä–∞–Ω–µ–Ω–∏–µ seen items
    ‚îÇ
    ‚ñº
 [4. PUBLISH] ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ Telegram
                        ‚îÇ
                        ‚îî‚îÄ‚ñ∫ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
                        ‚îî‚îÄ‚ñ∫ –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Bot API
                        ‚îî‚îÄ‚ñ∫ –æ–±—Ä–∞–±–æ—Ç–∫–∞ rate limits
```

**–ú–æ–¥—É–ª—å fetch –≥–æ—Ç–æ–≤** ‚Äî –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–ª–µ–¥—É—é—â–∏–º —ç—Ç–∞–ø–∞–º!

---

## üèÜ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚úÖ Conditional GET —Å–Ω–∏–∂–∞–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ ~90%
- ‚úÖ SimplePie –∫–µ—à —É—Å–∫–æ—Ä—è–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥
- ‚úÖ Backoff —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

### 2. –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å
- ‚úÖ –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
- ‚úÖ –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –ë–î

### 3. –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å
- ‚úÖ –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å DTO
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —ç—Ç–∞–ø–∞–º–∏

### 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –≤ –ë–î

---

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–æ–Ω–≤–µ–π–µ—Ä–∞:

1. **–ú–æ–¥—É–ª—å Analyze**
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
   - –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
   - –û—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
   - –î–µ—Ç–µ–∫—Ü–∏—è —Å–ø–∞–º–∞

2. **–ú–æ–¥—É–ª—å Deduplicate**
   - –•—Ä–∞–Ω–∏–ª–∏—â–µ seen items (contentHash)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
   - –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ö—ç—à–µ–π (TTL)

3. **–ú–æ–¥—É–ª—å Publish**
   - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Telegram
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Bot API
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ rate limits
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏

### –î–ª—è production:

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - Prometheus metrics exporter
   - Grafana –¥–∞—à–±–æ—Ä–¥—ã
   - Alerting –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**
   - Systemd service –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–≥–æ –æ–ø—Ä–æ—Å–∞
   - Health check endpoint
   - Graceful shutdown

3. **Web UI**
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   - –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –æ–ø—Ä–æ—Å–∞

---

## ‚ú® –ò—Ç–æ–≥

–°–æ–∑–¥–∞–Ω **production-ready** –º–æ–¥—É–ª—å fetch —Å –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π, –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ —Ç–µ—Å—Ç–∞–º–∏.

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

- üì¶ **20 —Ñ–∞–π–ª–æ–≤**
- üîß **1556 —Å—Ç—Ä–æ–∫ PHP –∫–æ–¥–∞**
- üìö **~2800 —Å—Ç—Ä–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**
- ‚úÖ **–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã**
- üß™ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ª–µ–Ω—Ç–∞—Ö**

**–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø:** –ú–æ–¥—É–ª—å Analyze –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
