# RSS2TLG - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω

## –î–∞—Ç–∞: 02 –Ω–æ—è–±—Ä—è 2025

## –¶–µ–ª—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

–û–±–µ—Å–ø–µ—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **–¢–û–õ–¨–ö–û –≥–æ—Ç–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤** –∏–∑ `/src/*.class.php` –≤ –ø—Ä–æ–µ–∫—Ç–µ Rss2Tlg:
- ‚úÖ MySQL.class.php –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- ‚úÖ Logger.class.php –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ Rss.class.php –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ RSS/Atom
- ‚úÖ Http.class.php –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤

---

## –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. MySQL.class.php - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `escape()`

**–§–∞–π–ª**: `src/MySQL.class.php`  
**–°—Ç—Ä–æ–∫–∏**: 256-272

**–ü—Ä–æ–±–ª–µ–º–∞**: FeedStateRepository –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `$pdo->quote()` –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `getConnection()`

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ `escape()`:

```php
/**
 * –≠–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫—É –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ SQL –∑–∞–ø—Ä–æ—Å–µ
 * 
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç PDO::quote() –¥–ª—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤.
 * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É —Å –∫–∞–≤—ã—á–∫–∞–º–∏.
 * 
 * @param string $value –°—Ç—Ä–æ–∫–∞ –¥–ª—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
 * @return string –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —Å –∫–∞–≤—ã—á–∫–∞–º–∏
 */
public function escape(string $value): string
{
    return $this->connection->quote($value);
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```php
// –î–æ:
$pdo = $this->db->getConnection();
$urlEscaped = $pdo->quote($url);

// –ü–æ—Å–ª–µ:
$urlEscaped = $this->db->escape($url);
```

---

### 2. Rss.class.php - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `parseXml()`

**–§–∞–π–ª**: `src/Rss.class.php`  
**–°—Ç—Ä–æ–∫–∏**: 229-284

**–ü—Ä–æ–±–ª–µ–º–∞**: FetchRunner –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª SimplePie –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ XML

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ `parseXml()`:

```php
/**
 * –ü–∞—Ä—Å–∏—Ç RSS/Atom –ª–µ–Ω—Ç—É –∏–∑ –≥–æ—Ç–æ–≤–æ–≥–æ XML –∫–æ–Ω—Ç–µ–Ω—Ç–∞
 * 
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞ XML –∫–æ–Ω—Ç–µ–Ω—Ç —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω –≤–Ω–µ –∫–ª–∞—Å—Å–∞.
 * –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Conditional GET –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ HTTP —Ç–µ—Ö–Ω–∏–∫–∏.
 *
 * @param string $xmlContent XML –∫–æ–Ω—Ç–µ–Ω—Ç –ª–µ–Ω—Ç—ã
 * @return array<string, mixed> –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ª–µ–Ω—Ç—ã
 * @throws RssException –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –ª–µ–Ω—Ç—É
 */
public function parseXml(string $xmlContent): array
{
    // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SimplePie –≤–Ω—É—Ç—Ä–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
    // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –µ–¥–∏–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```php
// –î–æ:
$feed = new \SimplePie\SimplePie();
$feed->set_raw_data($xmlContent);
$feed->init();
$feedItems = $feed->get_items();

// –ü–æ—Å–ª–µ:
$rss = new Rss($rssConfig, $this->logger);
$feedData = $rss->parseXml($xmlContent);
$feedItems = $feedData['items'];
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ SimplePie
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

---

### 3. FeedStateRepository.php - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MySQL::escape()

**–§–∞–π–ª**: `src/Rss2Tlg/FeedStateRepository.php`  
**–°—Ç—Ä–æ–∫–∏**: 100-109

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
1. –£–¥–∞–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `use PDO;`
2. –ó–∞–º–µ–Ω–µ–Ω `$pdo->quote()` –Ω–∞ `$this->db->escape()`
3. –ú–µ—Ç–æ–¥ `getByUrl()` –∏–∑–º–µ–Ω–µ–Ω —Å `prepare()` –Ω–∞ `query()`

**–î–æ**:
```php
use PDO;

$pdo = $this->db->getConnection();
$urlEscaped = $pdo->quote($url);

$stmt = $this->db->prepare("SELECT * FROM table WHERE url = ? LIMIT 1");
$stmt->execute([$url]);
$result = $stmt->fetchAll(PDO::FETCH_ASSOC);
```

**–ü–æ—Å–ª–µ**:
```php
// –ë–µ–∑ –∏–º–ø–æ—Ä—Ç–∞ PDO

$urlEscaped = $this->db->escape($url);

$result = $this->db->query("SELECT * FROM table WHERE url = ? LIMIT 1", [$url]);
```

---

### 4. FetchRunner.php - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Rss::parseXml()

**–§–∞–π–ª**: `src/Rss2Tlg/FetchRunner.php`  
**–ú–µ—Ç–æ–¥**: `parseFeed()` (—Å—Ç—Ä–æ–∫–∏ 395-446)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
1. –£–¥–∞–ª–µ–Ω–æ –ø—Ä—è–º–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ `new \SimplePie\SimplePie()`
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω `Rss::parseXml()` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
3. –ò–∑–º–µ–Ω–µ–Ω `RawItem::fromSimplePieItem()` –Ω–∞ `RawItem::fromRssArray()`

**–î–æ**:
```php
private function parseFeed(string $xmlContent, FeedConfig $config): array
{
    $feed = new \SimplePie\SimplePie();
    
    $feed->enable_cache(true);
    $feed->set_cache_location($this->cacheDir);
    $feed->set_raw_data($xmlContent);
    $feed->init();
    
    $feedItems = $feed->get_items() ?? [];
    
    foreach ($feedItems as $item) {
        $rawItem = RawItem::fromSimplePieItem($item);
        // ...
    }
}
```

**–ü–æ—Å–ª–µ**:
```php
private function parseFeed(string $xmlContent, FeedConfig $config): array
{
    $rssConfig = [
        'timeout' => $config->timeout,
        'max_content_size' => strlen($xmlContent) + 1024,
        'enable_cache' => $config->parserOptions['enable_cache'] ?? true,
        'cache_directory' => $this->cacheDir,
        'cache_duration' => $config->parserOptions['cache_duration'] ?? 3600,
    ];

    $rss = new Rss($rssConfig, $this->logger);
    $feedData = $rss->parseXml($xmlContent);
    
    $feedItems = $feedData['items'] ?? [];
    
    foreach ($feedItems as $item) {
        $rawItem = RawItem::fromRssArray($item);
        // ...
    }
}
```

---

## –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤

### ‚úÖ FeedStateRepository.php

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ö–ª–∞—Å—Å | –°—Ç–∞—Ç—É—Å |
|-----------|-------|--------|
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | MySQL.class.php | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | Logger.class.php | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| PDO | - | ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã MySQL**:
- `query()` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SELECT
- `execute()` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ INSERT/UPDATE
- `escape()` - —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫

### ‚úÖ FetchRunner.php

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ö–ª–∞—Å—Å | –°—Ç–∞—Ç—É—Å |
|-----------|-------|--------|
| HTTP –∑–∞–ø—Ä–æ—Å—ã | Http.class.php | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| RSS –ø–∞—Ä—Å–∏–Ω–≥ | Rss.class.php | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | MySQL.class.php | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ FeedStateRepository) |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | Logger.class.php | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| SimplePie | - | ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã**:
- `Http::get()` - HTTP –∑–∞–ø—Ä–æ—Å—ã
- `Rss::parseXml()` - –ø–∞—Ä—Å–∏–Ω–≥ RSS/Atom
- `Logger::info()`, `Logger::error()`, `Logger::debug()` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      FetchRunner                            ‚îÇ
‚îÇ  - –û–ø—Ä–æ—Å RSS –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤                                     ‚îÇ
‚îÇ  - Conditional GET (ETag, Last-Modified)                    ‚îÇ
‚îÇ  - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ       ‚îÇ       ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                   ‚îÇ                   ‚îÇ
        ‚ñº                   ‚ñº                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Http.class   ‚îÇ   ‚îÇ Rss.class    ‚îÇ   ‚îÇFeedState     ‚îÇ
‚îÇ              ‚îÇ   ‚îÇ              ‚îÇ   ‚îÇRepository    ‚îÇ
‚îÇ - HTTP GET   ‚îÇ   ‚îÇ - parseXml() ‚îÇ   ‚îÇ              ‚îÇ
‚îÇ - Headers    ‚îÇ   ‚îÇ - normalize  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ - Timeouts   ‚îÇ   ‚îÇ              ‚îÇ           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
                           ‚îÇ                  ‚ñº
                           ‚îÇ          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                           ‚îÇ          ‚îÇ MySQL.class  ‚îÇ
                           ‚îÇ          ‚îÇ              ‚îÇ
                           ‚ñº          ‚îÇ - query()    ‚îÇ
                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ - execute()  ‚îÇ
                   ‚îÇ SimplePie    ‚îÇ  ‚îÇ - escape()   ‚îÇ
                   ‚îÇ (internal)   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### 1. –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∫–æ–¥–∞
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã
- ‚úÖ –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å —Ä–∞–±–æ—Ç—ã —Å –ë–î, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º, HTTP

### 2. –£–ø—Ä–æ—â–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ú–æ–∂–Ω–æ –º–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å SimplePie/PDO –Ω–∞–ø—Ä—è–º—É—é

### 3. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ SimplePie –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (Rss.class.php)
- ‚úÖ PDO –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (MySQL.class.php)

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –í—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –∫–ª–∞—Å—Å
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ escape()
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∫–ª–∞—Å—Å–∞—Ö-–æ–±–µ—Ä—Ç–∫–∞—Ö

### 5. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- ‚úÖ –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤
- ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

### 6. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (RssException, MySQLException)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

### ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 1: MySQL.class.php
- [x] FeedStateRepository –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ MySQL.class.php
- [x] –ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è PDO
- [x] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–µ—Ç–æ–¥—ã: query(), execute(), escape()

### ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 2: Logger.class.php
- [x] –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç Logger —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
- [x] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–µ—Ç–æ–¥—ã: info(), error(), debug(), warning()
- [x] –ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –≤—ã–≤–æ–¥–∞ —á–µ—Ä–µ–∑ echo/print

### ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 3: Rss.class.php
- [x] FetchRunner –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Rss::parseXml()
- [x] –ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SimplePie
- [x] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SimplePie –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

### ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 4: Http.class.php
- [x] FetchRunner –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Http::get()
- [x] –ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Guzzle
- [x] Conditional GET —á–µ—Ä–µ–∑ Http

---

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

### RawItem::fromRssArray()

–ú–µ—Ç–æ–¥ `fromRssArray()` —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤—ã—Ö–æ–¥–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –∫–ª–∞—Å—Å–∞ Rss:

```php
// –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ Rss.class.php
$feedData = [
    'type' => 'rss',
    'title' => '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –ª–µ–Ω—Ç—ã',
    'items' => [
        [
            'id' => 'guid',
            'link' => 'url',
            'title' => '–ó–∞–≥–æ–ª–æ–≤–æ–∫',
            'description' => '–û–ø–∏—Å–∞–Ω–∏–µ',
            'content' => '–ö–æ–Ω—Ç–µ–Ω—Ç',
            'author' => '–ê–≤—Ç–æ—Ä',
            'categories' => [],
            'enclosures' => [],
            'published_at' => DateTimeImmutable,
        ],
        // ...
    ],
];

// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ RawItem
foreach ($feedData['items'] as $item) {
    $rawItem = RawItem::fromRssArray($item);
}
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã (—Ä–∞–Ω–µ–µ)
- ‚úÖ 3 RSS –ª–µ–Ω—Ç—ã (–†–ò–ê, Ars Technica, TechCrunch)
- ‚úÖ 30 –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ–ª—É—á–µ–Ω–æ
- ‚úÖ 0 –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞
- ‚úÖ MySQL –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Telegram –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
–í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Ç–∞–∫ –∫–∞–∫:
- API –º–µ—Ç–æ–¥–æ–≤ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
- –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞–ª–∞—Å—å –ø—Ä–µ–∂–Ω–µ–π
- –ò–∑–º–µ–Ω–∏–ª–∞—Å—å —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è HTTP**
   - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä Http –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–∂–¥—ã–π —Ä–∞–∑
   - –î–æ–±–∞–≤–∏—Ç—å –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ Rss**
   - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä Rss —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
   - –°–Ω–∏–∑–∏—Ç—å overhead –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ SimplePie

3. **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏**
   - –î–æ–±–∞–≤–∏—Ç—å –º–∞—Å—Å–æ–≤—É—é –≤—Å—Ç–∞–≤–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ –ë–î
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –≥—Ä—É–ø–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω!**

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ Rss2Tlg —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–¢–û–õ–¨–ö–û –≥–æ—Ç–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã**:
- MySQL.class.php ‚úÖ
- Logger.class.php ‚úÖ
- Rss.class.php ‚úÖ
- Http.class.php ‚úÖ

–ö–æ–¥ —Å—Ç–∞–ª:
- üéØ –ë–æ–ª–µ–µ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º
- üõ°Ô∏è –ë–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º
- üß™ –õ–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–º
- üìä –õ—É—á—à–µ –ª–æ–≥–∏—Ä—É–µ–º—ã–º
- üîß –ü—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º

**–ì–æ—Ç–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –¥–æ–ø–æ–ª–Ω–µ–Ω—ã**:
- `MySQL::escape()` - –¥–ª—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫
- `Rss::parseXml()` - –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –≥–æ—Ç–æ–≤–æ–≥–æ XML

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production!**
