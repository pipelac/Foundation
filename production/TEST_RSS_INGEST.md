# –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è RSS Ingest Script

## –î–∞—Ç–∞: 2025-01-13

---

## –¶–µ–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ `rss_ingest.php`:
1. ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç Telegram
2. ‚úÖ –ê–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î –∏–∑ feeds.json
3. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–ª–∞–≥–∞ `enabled: false`

---

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 1. –ó–∞–ø—É—Å–∫ MariaDB —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
docker run --name rss2tlg-test-db \
  -e MYSQL_ROOT_PASSWORD=root123 \
  -e MYSQL_DATABASE=rss2tlg_test \
  -e MYSQL_USER=rss2tlg \
  -e MYSQL_PASSWORD=rss2tlg123 \
  -p 3306:3306 \
  -d mariadb:10.11

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞
docker ps | grep rss2tlg-test-db

# –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
sleep 10
```

### 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã –ë–î

```bash
# –ò–º–ø–æ—Ä—Ç —Å—Ö–µ–º—ã
docker exec -i rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test < production/sql/init_schema.sql

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü
docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -e "SHOW TABLES;"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
+-------------------------------+
| Tables_in_rss2tlg_test        |
+-------------------------------+
| openrouter_metrics            |
| rss2tlg_deduplication         |
| rss2tlg_feed_state            |
| rss2tlg_feeds                 |
| rss2tlg_items                 |
| rss2tlg_publications          |
| rss2tlg_summarization         |
+-------------------------------+
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ë–î

–§–∞–π–ª: `production/configs/database.json`

```json
{
    "host": "localhost",
    "port": 3306,
    "database": "rss2tlg_test",
    "username": "rss2tlg",
    "password": "rss2tlg123",
    "charset": "utf8mb4"
}
```

### 4. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö feeds.json

–§–∞–π–ª: `production/configs/feeds.json`

```json
{
    "feeds": [
        {
            "name": "–†–ò–ê –ù–æ–≤–æ—Å—Ç–∏",
            "feed_url": "https://ria.ru/export/rss2/index.xml",
            "website_url": "https://ria.ru",
            "enabled": true
        },
        {
            "name": "–ö–æ–º–º–µ—Ä—Å–∞–Ω—Ç—ä (–û–¢–ö–õ–Æ–ß–ï–ù)",
            "feed_url": "https://www.kommersant.ru/rss/news.xml",
            "website_url": "https://www.kommersant.ru",
            "enabled": false
        },
        {
            "name": "–ò–Ω—Ç–µ—Ä—Ñ–∞–∫—Å",
            "feed_url": "https://www.interfax.ru/rss",
            "website_url": "https://www.interfax.ru",
            "enabled": true
        },
        {
            "name": "TechCrunch (–û–¢–ö–õ–Æ–ß–ï–ù)",
            "feed_url": "https://techcrunch.com/feed/",
            "website_url": "https://techcrunch.com",
            "enabled": false
        }
    ]
}
```

---

## –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –¢–µ—Å—Ç 1: –ê–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É feeds.json –≤ –ø—É—Å—Ç—É—é –ë–î

**–®–∞–≥–∏:**
1. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `rss2tlg_feeds` –ø—É—Å—Ç–∞
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ë–î

```bash
# 1. –û—á–∏—Å—Ç–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -e "TRUNCATE TABLE rss2tlg_feeds;"

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –ø—É—Å—Ç–∞
docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -e "SELECT COUNT(*) FROM rss2tlg_feeds;"

# 3. –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞
php production/rss_ingest.php

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -e "SELECT id, name, enabled FROM rss2tlg_feeds ORDER BY id;"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏:**
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë           RSS INGEST PRODUCTION SCRIPT v1.0.0                 ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
üïê Start: 2025-01-13 12:00:00

üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ª–µ–Ω—Ç –∏–∑ feeds.json...
   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω: –†–ò–ê –ù–æ–≤–æ—Å—Ç–∏ (enabled: 1)
   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω: –ö–æ–º–º–µ—Ä—Å–∞–Ω—Ç—ä (–û–¢–ö–õ–Æ–ß–ï–ù) (enabled: 0)
   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω: –ò–Ω—Ç–µ—Ä—Ñ–∞–∫—Å (enabled: 1)
   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω: TechCrunch (–û–¢–ö–õ–Æ–ß–ï–ù) (enabled: 0)
‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ 4, –ø—Ä–æ–ø—É—â–µ–Ω–æ 0

üìä –ù–∞–π–¥–µ–Ω–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤: 2
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ë–î:**
```
+----+---------------------------+---------+
| id | name                      | enabled |
+----+---------------------------+---------+
|  1 | –†–ò–ê –ù–æ–≤–æ—Å—Ç–∏               |       1 |
|  2 | –ö–æ–º–º–µ—Ä—Å–∞–Ω—Ç—ä (–û–¢–ö–õ–Æ–ß–ï–ù)    |       0 |
|  3 | –ò–Ω—Ç–µ—Ä—Ñ–∞–∫—Å                 |       1 |
|  4 | TechCrunch (–û–¢–ö–õ–Æ–ß–ï–ù)     |       0 |
+----+---------------------------+---------+
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ PASSED / ‚ùå FAILED

---

### –¢–µ—Å—Ç 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ª–µ–Ω—Ç (enabled=1)

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ª–µ–Ω—Ç—ã —Å `enabled=0` –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

**–®–∞–≥–∏:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ (–±–µ–∑ –æ—á–∏—Å—Ç–∫–∏ –ë–î)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ç–æ–ª—å–∫–æ 2 –∏—Å—Ç–æ—á–Ω–∏–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞
php production/rss_ingest.php | grep "üìä –ù–∞–π–¥–µ–Ω–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–∏—Å–µ–π –≤ rss2tlg_items
docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -e "
SELECT 
    f.id,
    f.name,
    f.enabled,
    COUNT(i.id) as items_count
FROM rss2tlg_feeds f
LEFT JOIN rss2tlg_items i ON i.feed_id = f.id
GROUP BY f.id
ORDER BY f.id;
"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìä –ù–∞–π–¥–µ–Ω–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤: 2

+----+---------------------------+---------+-------------+
| id | name                      | enabled | items_count |
+----+---------------------------+---------+-------------+
|  1 | –†–ò–ê –ù–æ–≤–æ—Å—Ç–∏               |       1 |          30 |
|  2 | –ö–æ–º–º–µ—Ä—Å–∞–Ω—Ç—ä (–û–¢–ö–õ–Æ–ß–ï–ù)    |       0 |           0 |
|  3 | –ò–Ω—Ç–µ—Ä—Ñ–∞–∫—Å                 |       1 |          25 |
|  4 | TechCrunch (–û–¢–ö–õ–Æ–ß–ï–ù)     |       0 |           0 |
+----+---------------------------+---------+-------------+
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ç–æ–ª—å–∫–æ 2 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–†–ò–ê –∏ –ò–Ω—Ç–µ—Ä—Ñ–∞–∫—Å)
- ‚úÖ –ö–æ–º–º–µ—Ä—Å–∞–Ω—Ç—ä –∏ TechCrunch –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è (items_count = 0)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ PASSED / ‚ùå FAILED

---

### –¢–µ—Å—Ç 3: –ü—Ä–æ–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –µ—Å–ª–∏ –ª–µ–Ω—Ç—ã —É–∂–µ –µ—Å—Ç—å

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –µ—Å–ª–∏ –≤ –ë–î –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –ª–µ–Ω—Ç—ã

**–®–∞–≥–∏:**
```bash
# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞
php production/rss_ingest.php | head -10
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë           RSS INGEST PRODUCTION SCRIPT v1.0.0                 ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
üïê Start: 2025-01-13 12:00:00

‚úÖ –ê–∫—Ç–∏–≤–Ω—ã—Ö –ª–µ–Ω—Ç –≤ –ë–î: 2

üìä –ù–∞–π–¥–µ–Ω–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤: 2
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ "–ê–∫—Ç–∏–≤–Ω—ã—Ö –ª–µ–Ω—Ç –≤ –ë–î: 2"
- ‚úÖ –ù–ï–¢ —Å–æ–æ–±—â–µ–Ω–∏—è "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ª–µ–Ω—Ç –∏–∑ feeds.json..."

**–°—Ç–∞—Ç—É—Å:** ‚úÖ PASSED / ‚ùå FAILED

---

### –¢–µ—Å—Ç 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ª–µ–Ω—Ç

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ feeds.json

**–®–∞–≥–∏:**
1. –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ª–µ–Ω—Ç—ã –≤ feeds.json
2. –û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ

```bash
# 1. –ò–∑–º–µ–Ω–∏—Ç—å feeds.json (–≤—Ä—É—á–Ω—É—é)
# –ò–∑–º–µ–Ω–∏—Ç—å "–†–ò–ê –ù–æ–≤–æ—Å—Ç–∏" –Ω–∞ "–†–ò–ê –ù–æ–≤–æ—Å—Ç–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)"

# 2. –û—á–∏—Å—Ç–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -e "TRUNCATE TABLE rss2tlg_feeds;"

# 3. –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞
php production/rss_ingest.php

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞
docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -e "SELECT id, name, enabled FROM rss2tlg_feeds WHERE id = 1;"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
+----+---------------------------+---------+
| id | name                      | enabled |
+----+---------------------------+---------+
|  1 | –†–ò–ê –ù–æ–≤–æ—Å—Ç–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)   |       1 |
+----+---------------------------+---------+
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ PASSED / ‚ùå FAILED

---

### –¢–µ—Å—Ç 5: –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ë–î

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ enabled —á–µ—Ä–µ–∑ –ë–î

**–®–∞–≥–∏:**
```bash
# 1. –û—Ç–∫–ª—é—á–∏—Ç—å –†–ò–ê –ù–æ–≤–æ—Å—Ç–∏
docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -e "UPDATE rss2tlg_feeds SET enabled = 0 WHERE id = 1;"

# 2. –í–∫–ª—é—á–∏—Ç—å –ö–æ–º–º–µ—Ä—Å–∞–Ω—Ç—ä
docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -e "UPDATE rss2tlg_feeds SET enabled = 1 WHERE id = 2;"

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ª–µ–Ω—Ç
docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -e "SELECT id, name, enabled FROM rss2tlg_feeds WHERE enabled = 1;"

# 4. –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞
php production/rss_ingest.php | grep "üìä –ù–∞–π–¥–µ–Ω–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
+----+---------------------------+---------+
| id | name                      | enabled |
+----+---------------------------+---------+
|  2 | –ö–æ–º–º–µ—Ä—Å–∞–Ω—Ç—ä (–û–¢–ö–õ–Æ–ß–ï–ù)    |       1 |
|  3 | –ò–Ω—Ç–µ—Ä—Ñ–∞–∫—Å                 |       1 |
+----+---------------------------+---------+

üìä –ù–∞–π–¥–µ–Ω–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤: 2
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –†–ò–ê –ù–æ–≤–æ—Å—Ç–∏ –æ—Ç–∫–ª—é—á–µ–Ω (–Ω–µ –≤ —Å–ø–∏—Å–∫–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö)
- ‚úÖ –ö–æ–º–º–µ—Ä—Å–∞–Ω—Ç—ä –≤–∫–ª—é—á–µ–Ω (–ø–æ—è–≤–∏–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ 2 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–ö–æ–º–º–µ—Ä—Å–∞–Ω—Ç—ä + –ò–Ω—Ç–µ—Ä—Ñ–∞–∫—Å)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ PASSED / ‚ùå FAILED

---

### –¢–µ—Å—Ç 6: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç Telegram

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –Ω–µ –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Telegram

**–®–∞–≥–∏:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤ –∫–æ–¥–µ –Ω–µ—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏–π Telegram
grep -i telegram production/rss_ingest.php

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –Ω–µ –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ Telegram
rm -f production/configs/telegram.json

# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ (–¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫)
php production/rss_ingest.php 2>&1 | grep -i "telegram\|error\|exception"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ `grep -i telegram` –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç
- ‚úÖ –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ –¥–∞–∂–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ telegram.json
- ‚úÖ –ù–µ—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏–π "telegram" –≤ –≤—ã–≤–æ–¥–µ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ PASSED / ‚ùå FAILED

---

### –¢–µ—Å—Ç 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

**–®–∞–≥–∏:**
```bash
# –û—á–∏—Å—Ç–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -e "TRUNCATE TABLE rss2tlg_feeds;"

# –ó–∞–ø—É—Å–∫ —Å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –≤ –ª–æ–≥
php production/rss_ingest.php > /tmp/rss_ingest_test.log 2>&1

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∞
cat logs/rss_ingest.log | tail -20 | jq .
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥–µ:**
```json
{"level":"info","message":"[RSS_INGEST] Script started","context":{"version":"1.0.0","pid":12345}}
{"level":"info","message":"[RSS_INGEST] Starting feeds synchronization from config","context":{"feeds_count":4}}
{"level":"info","message":"[RSS_INGEST] Feed inserted","context":{"id":1,"name":"–†–ò–ê –ù–æ–≤–æ—Å—Ç–∏","enabled":1}}
{"level":"info","message":"[RSS_INGEST] Feed inserted","context":{"id":2,"name":"–ö–æ–º–º–µ—Ä—Å–∞–Ω—Ç—ä (–û–¢–ö–õ–Æ–ß–ï–ù)","enabled":0}}
{"level":"info","message":"[RSS_INGEST] Feeds synchronization completed","context":{"synced":4,"skipped":0}}
{"level":"info","message":"[RSS_INGEST] Active feeds loaded","context":{"count":2}}
{"level":"info","message":"[RSS_INGEST] Feed processed successfully","context":{"feed_id":1,"feed_name":"–†–ò–ê –ù–æ–≤–æ—Å—Ç–∏",...}}
{"level":"info","message":"[RSS_INGEST] Script completed","context":{"stats":{...},"execution_time":2.34}}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å—Ç–∞—Ä—Ç —Å–∫—Ä–∏–ø—Ç–∞
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥–∞—è –≤—Å—Ç–∞–≤–∫–∞/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–µ–Ω—Ç—ã
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ PASSED / ‚ùå FAILED

---

### –¢–µ—Å—Ç 8: –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –¥—É–±–ª–∏–∫–∞—Ç—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è

**–®–∞–≥–∏:**
```bash
# 1. –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –ø–µ—Ä–≤—ã–π —Ä–∞–∑
php production/rss_ingest.php

# –ü–æ–¥—Å—á–µ—Ç –∑–∞–ø–∏—Å–µ–π
FIRST_COUNT=$(docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -se "SELECT COUNT(*) FROM rss2tlg_items;")

# 2. –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –≤—Ç–æ—Ä–æ–π —Ä–∞–∑ (—á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É)
sleep 60
php production/rss_ingest.php

# –ü–æ–¥—Å—á–µ—Ç –∑–∞–ø–∏—Å–µ–π
SECOND_COUNT=$(docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -se "SELECT COUNT(*) FROM rss2tlg_items;")

echo "First run: $FIRST_COUNT items"
echo "Second run: $SECOND_COUNT items"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -e "
SELECT content_hash, COUNT(*) as cnt 
FROM rss2tlg_items 
GROUP BY content_hash 
HAVING cnt > 1;
"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü—Ä–∏ –≤—Ç–æ—Ä–æ–º –∑–∞–ø—É—Å–∫–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ù–û–í–´–ï –∑–∞–ø–∏—Å–∏
- ‚úÖ –ó–∞–ø—Ä–æ—Å –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: "üîÅ –î—É–±–ª–∏–∫–∞—Ç–æ–≤: X"

**–°—Ç–∞—Ç—É—Å:** ‚úÖ PASSED / ‚ùå FAILED

---

## –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
# 1. –ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -e "
SELECT 
    'rss2tlg_feeds' as table_name,
    COUNT(*) as total_count,
    SUM(CASE WHEN enabled = 1 THEN 1 ELSE 0 END) as enabled_count
FROM rss2tlg_feeds
UNION ALL
SELECT 
    'rss2tlg_items',
    COUNT(*),
    COUNT(DISTINCT feed_id)
FROM rss2tlg_items
UNION ALL
SELECT 
    'rss2tlg_feed_state',
    COUNT(*),
    SUM(CASE WHEN last_status = 200 THEN 1 ELSE 0 END)
FROM rss2tlg_feed_state;
"

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—à–∏–±–æ–∫
docker exec rss2tlg-test-db mysql -urss2tlg -prss2tlg123 rss2tlg_test -e "
SELECT feed_id, last_status, last_error 
FROM rss2tlg_feed_state 
WHERE last_status != 200;
"
```

---

## –û—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker stop rss2tlg-test-db
docker rm rss2tlg-test-db

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ production –∫–æ–Ω—Ñ–∏–≥–æ–≤
git checkout production/configs/feeds.json
git checkout production/configs/database.json
```

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------|----------|--------|-------------|
| 1 | –ê–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î | ‚¨ú | |
| 2 | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–ª—å–∫–æ enabled=1 | ‚¨ú | |
| 3 | –ü—Ä–æ–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ | ‚¨ú | |
| 4 | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ª–µ–Ω—Ç | ‚¨ú | |
| 5 | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ enabled | ‚¨ú | |
| 6 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Telegram –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π | ‚¨ú | |
| 7 | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚¨ú | |
| 8 | –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è | ‚¨ú | |

**–õ–µ–≥–µ–Ω–¥–∞:**
- ‚¨ú - –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- ‚úÖ - –£—Å–ø–µ—à–Ω–æ
- ‚ùå - –ü—Ä–æ–≤–∞–ª–µ–Ω–æ
- ‚ö†Ô∏è - –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: _______________

–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫: _______________

–û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ‚¨ú –í–°–ï –¢–ï–°–¢–´ PASSED / ‚¨ú –ï–°–¢–¨ FAILED

–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:
_______________________________________________
_______________________________________________
_______________________________________________
