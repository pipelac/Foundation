# üìÇ –ò–Ω–¥–µ–∫—Å —Ñ–∞–π–ª–æ–≤ production/sql

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã

### ‚≠ê init_schema.sql
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª–Ω–∞—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î –¥–ª—è production  
**–í–µ—Ä—Å–∏—è**: 2.0 (2025-11-13)  
**–¢–∞–±–ª–∏—Ü**: 7  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: `mysql -u root -p rss2tlg_production < init_schema.sql`

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- rss2tlg_feeds - –ò—Å—Ç–æ—á–Ω–∏–∫–∏ RSS
- rss2tlg_feed_state - –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- rss2tlg_items - –ù–æ–≤–æ—Å—Ç–∏ —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- rss2tlg_summarization - AI —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è
- rss2tlg_deduplication - –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
- rss2tlg_publications - –ñ—É—Ä–Ω–∞–ª –ø—É–±–ª–∏–∫–∞—Ü–∏–π
- openrouter_metrics - –ú–µ—Ç—Ä–∏–∫–∏ API

---

## üîç –£—Ç–∏–ª–∏—Ç—ã

### check_schema_version.sql
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ —Å—Ö–µ–º—ã –ë–î  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: `mysql -u root -p rss2tlg_production < check_schema_version.sql`

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –ù–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- –ù–∞–ª–∏—á–∏–µ –ø–æ–ª–µ–π v2.0 (5 –ø–æ–ª–µ–π)
- –ù–∞–ª–∏—á–∏–µ –Ω–æ–≤—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ (3 –∏–Ω–¥–µ–∫—Å–∞)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–∞–±–ª–∏—Ü
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥**: ‚úÖ Schema Version 2.0 - All fields present

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### README.md
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏  
**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (—Å–æ–∑–¥–∞–Ω–∏–µ –ë–î)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü
- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (–∫—Ä–∞—Ç–∫–∞—è)
- –°–ø–∏—Å–æ–∫ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### CHANGELOG.md
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π  
**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –í–µ—Ä—Å–∏—è 2.0: –≤—Å–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—è –∏ –∏–Ω–¥–µ–∫—Å—ã
- –í–µ—Ä—Å–∏—è 1.0: –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ v1.0 ‚Üí v2.0

### MIGRATION_GUIDE.md
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –ë–î  
**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π v2.0 —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ SQL
- 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ (A, B, C)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏
- –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
- –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫

### SUMMARY.md
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á  
**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –°–ø–∏—Å–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### .index.md (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë—ã—Å—Ç—Ä—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –î–ª—è –±—ã—Å—Ç—Ä–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

---

## üì¶ –ê—Ä—Ö–∏–≤ –º–∏–≥—Ä–∞—Ü–∏–π

> ‚ö†Ô∏è –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —É–∂–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ `init_schema.sql` v2.0  
> –ü—Ä–∏–º–µ–Ω—è—Ç—å –∏—Ö –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ë–î v1.0

### migration_openrouter_metrics.sql
**–î–∞—Ç–∞**: 2025-11-11  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã openrouter_metrics  
**–î–æ–±–∞–≤–ª—è–µ—Ç**: generation_id, provider_name, native_tokens_*, usage_*, pipeline_module

### migration_add_en_fields.sql
**–î–∞—Ç–∞**: 2025-11-10  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ –ø–æ–ª—è –¥–ª—è –∫—Ä–æ—Å—Å-—è–∑—ã–∫–æ–≤–æ–π –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏  
**–î–æ–±–∞–≤–ª—è–µ—Ç**: category_primary_en, category_secondary_en, keywords_en, dedup_canonical_entities_en, dedup_core_event_en  
**–ò–Ω–¥–µ–∫—Å—ã**: idx_category_primary_en

### migration_dedup_v3.sql
**–î–∞—Ç–∞**: 2025-11-10  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è (preliminary + AI)  
**–î–æ–±–∞–≤–ª—è–µ—Ç**: preliminary_similarity_score, preliminary_method, ai_analysis_triggered  
**–ò–Ω–¥–µ–∫—Å—ã**: idx_preliminary_score, idx_ai_triggered

### migration_dedup_v2.2.sql
**–î–∞—Ç–∞**: –ë–æ–ª–µ–µ —Ä–∞–Ω–Ω—è—è –≤–µ—Ä—Å–∏—è  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–µ–¥—ã–¥—É—â–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏  
**–°—Ç–∞—Ç—É—Å**: –ê—Ä—Ö–∏–≤ (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤–∫–ª—é—á–µ–Ω–∞ –≤ v3)

### migration_add_usage_web.sql
**–î–∞—Ç–∞**: 2025-11-11  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è usage_web –≤ openrouter_metrics  
**–î–æ–±–∞–≤–ª—è–µ—Ç**: usage_web DECIMAL(10, 8)

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ —Ç–∏–ø–∞–º

### SQL —Å—Ö–µ–º—ã
```
init_schema.sql              - ‚≠ê –ì–ª–∞–≤–Ω–∞—è —Å—Ö–µ–º–∞ v2.0
check_schema_version.sql     - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏
```

### SQL –º–∏–≥—Ä–∞—Ü–∏–∏ (–∞—Ä—Ö–∏–≤)
```
migration_openrouter_metrics.sql
migration_add_en_fields.sql
migration_dedup_v3.sql
migration_dedup_v2.2.sql
migration_add_usage_web.sql
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```
README.md              - –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
CHANGELOG.md           - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
MIGRATION_GUIDE.md     - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏
SUMMARY.md             - –°–≤–æ–¥–∫–∞ –∑–∞–¥–∞—á
.index.md              - –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –§–∞–π–ª–æ–≤ | –°—Ç—Ä–æ–∫ |
|-----------|--------|-------|
| SQL —Å—Ö–µ–º—ã | 2 | 452 |
| SQL –º–∏–≥—Ä–∞—Ü–∏–∏ | 5 | 181 |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 5 | 617 |
| **–í—Å–µ–≥–æ** | **12** | **1,250** |

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ù–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
cd production/sql
mysql -u root -p rss2tlg_production < init_schema.sql
mysql -u root -p rss2tlg_production < check_schema_version.sql
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ v1.0 ‚Üí v2.0
```bash
cd production/sql
mysqldump -u root -p rss2tlg_production > backup.sql
mysql -u root -p rss2tlg_production < migration_add_en_fields.sql
mysql -u root -p rss2tlg_production < migration_dedup_v3.sql
mysql -u root -p rss2tlg_production < migration_add_usage_web.sql
mysql -u root -p rss2tlg_production < check_schema_version.sql
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏
```bash
mysql -u root -p rss2tlg_production < check_schema_version.sql
```

–û–∂–∏–¥–∞–µ—Ç—Å—è: ‚úÖ Schema Version 2.0 - All fields present

---

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö:
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü ‚Üí [README.md](README.md)
- –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å ‚Üí [CHANGELOG.md](CHANGELOG.md)
- –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å ‚Üí [MIGRATION_GUIDE.md](MIGRATION_GUIDE.md)
- –°–≤–æ–¥–∫–∞ –∑–∞–¥–∞—á ‚Üí [SUMMARY.md](SUMMARY.md)
