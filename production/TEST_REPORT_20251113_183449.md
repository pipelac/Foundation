# –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ RSS Ingest Production Script

**–î–∞—Ç–∞:** 2025-11-13  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–¢–µ—Å—Ç:** –û–±—Ä–∞–±–æ—Ç–∫–∞ RSS –ª–µ–Ω—Ç —Å –ø—Ä–æ–∫—Å–∏ htmlweb.ru –¥–ª—è TechCrunch

---

## üéØ –ó–∞–¥–∞—á–∏

1. ‚úÖ –†–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å `main.json` —Å —Å–µ–∫—Ü–∏—è–º–∏ –ø–æ –∫–ª–∞—Å—Å–∞–º/—Å–µ—Ä–≤–∏—Å–∞–º
2. ‚úÖ –£–¥–∞–ª–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`cron_interval_minutes`, `content_extraction_delay`)
3. ‚úÖ –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ `extract_content_from_link` –≤ `feeds.json`
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `use_htmlweb_proxy` –≤ `feeds.json`
5. ‚úÖ –í—ã–Ω–µ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ProxyPool –∏ htmlWebProxyList –≤ `main.json`
6. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç —Å TechCrunch —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
7. ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å SQL –¥–∞–º–ø—ã –≤ `/production/sql_dumps`
8. ‚úÖ –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–º–ø—ã –∏–∑ –¥—Ä—É–≥–∏—Ö –∫–∞—Ç–∞–ª–æ–≥–æ–≤

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- **MariaDB:** 10.11.6-MariaDB-0ubuntu0.24.04.1
- **PHP:** 8.2.29
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** rss2tlg_test
- **Composer –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### main.json (–Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)

```json
{
    "Logger": {...},
    "RSSIngest": {
        "test_mode": true,
        "test_mode_items_limit": 10,
        ...
    },
    "WebtExtractor": {...},
    "ProxyPool": {
        "auto_health_check": false,
        "health_check_timeout": 15,
        ...
    },
    "htmlWebProxyList": {
        "api_key": "...",
        "country": "",
        "perpage": 10,
        "type": "HTTP"
    }
}
```

#### feeds.json (–Ω–æ–≤—ã–µ –ø–æ–ª—è)

–ö–∞–∂–¥—ã–π feed —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç:
- `extraction_delay` - –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (—Å–µ–∫)
- `extract_content_from_link` - –∏–∑–≤–ª–µ–∫–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ link
- `use_htmlweb_proxy` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏ htmlweb.ru

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

| –ò—Å—Ç–æ—á–Ω–∏–∫ | Items | –ù–æ–≤—ã—Ö | –î—É–±–ª–∏–∫–∞—Ç–æ–≤ | –ò–∑–≤–ª–µ—á–µ–Ω–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ | –ü—Ä–æ–∫—Å–∏ |
|----------|-------|-------|------------|-------------------|--------|
| –†–ò–ê –ù–æ–≤–æ—Å—Ç–∏ | 10 | 10 | 0 | 0 | ‚ùå |
| –ö–æ–º–º–µ—Ä—Å–∞–Ω—Ç—ä | 10 | 10 | 0 | 0 | ‚ùå |
| –ò–Ω—Ç–µ—Ä—Ñ–∞–∫—Å | 10 | 10 | 0 | 0 | ‚ùå |
| **TechCrunch** | **10** | **10** | **0** | **10** | **‚úÖ** |
| **–ò–¢–û–ì–û** | **40** | **40** | **0** | **10** | - |

### –ü—Ä–æ–∫—Å–∏

- **–ò—Å—Ç–æ—á–Ω–∏–∫:** htmlweb.ru API
- **–ü–æ–ª—É—á–µ–Ω–æ –ø—Ä–æ–∫—Å–∏:** 10
- **–î–æ—Å—Ç—É–ø–Ω–æ:** 10/10
- **–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–æ—Ç–∞—Ü–∏–∏:** round_robin
- **Health check:** –æ—Ç–∫–ª—é—á–µ–Ω (–¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤)

**–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–∫—Å–∏:**
- http://165.22.71.191:80
- http://4.149.153.123:3128
- http://38.49.138.198:999

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 24.77 —Å–µ–∫
- **–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:** 4
- **–£—Å–ø–µ—à–Ω–æ:** 4 (100%)
- **–û—à–∏–±–æ–∫:** 0

---

## üìÅ SQL –î–∞–º–ø—ã

–°–æ–∑–¥–∞–Ω—ã –¥–∞–º–ø—ã –≤ `/production/sql_dumps/`:

- `full_dump_20251113_183348.sql` - –ø–æ–ª–Ω—ã–π –¥–∞–º–ø –ë–î (224 KB)
- `rss2tlg_items_20251113_183348.sql` - –¥–∞–º–ø —Ç–∞–±–ª–∏—Ü—ã items (205 KB)
- `rss2tlg_feeds_20251113_183348.sql` - –¥–∞–º–ø —Ç–∞–±–ª–∏—Ü—ã feeds (3.3 KB)
- `rss2tlg_feed_state_20251113_183348.sql` - –¥–∞–º–ø —Ç–∞–±–ª–∏—Ü—ã feed_state (4.0 KB)
- `rss2tlg_deduplication_20251113_183348.sql` - –¥–∞–º–ø —Ç–∞–±–ª–∏—Ü—ã deduplication
- `rss2tlg_summarization_20251113_183348.sql` - –¥–∞–º–ø —Ç–∞–±–ª–∏—Ü—ã summarization
- `rss2tlg_publications_20251113_183348.sql` - –¥–∞–º–ø —Ç–∞–±–ª–∏—Ü—ã publications
- `openrouter_metrics_20251113_183348.sql` - –¥–∞–º–ø —Ç–∞–±–ª–∏—Ü—ã metrics

**–°—Ç–∞—Ä—ã–µ –¥–∞–º–ø—ã —É–¥–∞–ª–µ–Ω—ã:**
- ‚ùå `/logs/dump_rss_ingest_test_final_20251113_160528.sql`
- ‚ùå `/production/sql/dump_rss_ingest_test_20251113_133929.sql`
- ‚ùå `/production/sql/test_extraction_20251113_144849.sql`

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ rss2tlg_items

```
| –ò—Å—Ç–æ—á–Ω–∏–∫         | –ö–æ–ª-–≤–æ items | –ò–∑–≤–ª–µ—á–µ–Ω –∫–æ–Ω—Ç–µ–Ω—Ç |
|------------------|-------------|------------------|
| –†–ò–ê –ù–æ–≤–æ—Å—Ç–∏      | 10          | 0                |
| –ö–æ–º–º–µ—Ä—Å–∞–Ω—Ç—ä      | 10          | 0                |
| –ò–Ω—Ç–µ—Ä—Ñ–∞–∫—Å        | 10          | 0                |
| TechCrunch       | 10          | 10               |
```

### –¢–∞–±–ª–∏—Ü–∞ rss2tlg_feeds

–í—Å–µ 4 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏ –∞–∫—Ç–∏–≤–Ω—ã (enabled=1).

### –¢–∞–±–ª–∏—Ü–∞ rss2tlg_feed_state

–í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–º–µ—é—Ç —Å—Ç–∞—Ç—É—Å `last_status=200` (—É—Å–ø–µ—à–Ω–æ).

---

## üîç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `/logs/rss_ingest.log`:
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏ —Å htmlweb.ru API
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏ –≤ –ø—É–ª
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑ TechCrunch
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î

---

## üéâ –í—ã–≤–æ–¥—ã

1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ —Å–µ–∫—Ü–∏—è–º –∫–ª–∞—Å—Å–æ–≤
2. **–ü—Ä–æ–∫—Å–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç** - TechCrunch –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ htmlweb.ru
3. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è TechCrunch (10/10 —É—Å–ø–µ—à–Ω–æ)
4. **–ë–î –≤ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏** - –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
5. **SQL –¥–∞–º–ø—ã —Å–æ–∑–¥–∞–Ω—ã** - –ø–æ–ª–Ω—ã–π –¥–∞–º–ø –∏ –¥–∞–º–ø—ã –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
6. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç–ª–∏—á–Ω–∞—è** - 24.77 —Å–µ–∫ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ 40 —ç–ª–µ–º–µ–Ω—Ç–æ–≤

### –ó–∞–º–µ—á–∞–Ω–∏—è

- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞ `country=US` –≤ htmlweb.ru API –Ω–µ –±—ã–ª–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏
- –†–µ—à–µ–Ω–∏–µ: —É–±—Ä–∞–Ω —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç—Ä–∞–Ω–µ, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª—é–±—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–∫—Å–∏
- `auto_health_check` –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã (–º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û**
