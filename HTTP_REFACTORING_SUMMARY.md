# –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–ª–∞—Å—Å–∞ Http.class.php - Production Ready

## üéØ –¶–µ–ª—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
–£–ª—É—á—à–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ `Http.class.php` –¥–æ production —É—Ä–æ–≤–Ω—è —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ PHP 8.1+, –ø–æ–≤—ã—à–µ–Ω–∏–µ–º –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. **–î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã HTTP –º–µ—Ç–æ–¥–æ–≤**
```php
public const METHOD_GET = 'GET';
public const METHOD_POST = 'POST';
public const METHOD_PUT = 'PUT';
public const METHOD_PATCH = 'PATCH';
public const METHOD_DELETE = 'DELETE';
public const METHOD_HEAD = 'HEAD';
public const METHOD_OPTIONS = 'OPTIONS';
```
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ó–∞—â–∏—Ç–∞ –æ—Ç –æ–ø–µ—á–∞—Ç–æ–∫ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –º–µ—Ç–æ–¥–æ–≤
- –£–ª—É—á—à–µ–Ω–Ω–∞—è IDE –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ best practices

### 2. **–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã-—Ö–µ–ª–ø–µ—Ä—ã –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤**
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —É–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
- `get(string $uri, array $options = [])`
- `post(string $uri, array $options = [])`
- `put(string $uri, array $options = [])`
- `patch(string $uri, array $options = [])`
- `delete(string $uri, array $options = [])`
- `head(string $uri, array $options = [])`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞ –¥–ª—è —Ç–∏–ø–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –£–ª—É—á—à–µ–Ω–Ω–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞

### 3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `validateRequest()` –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- HTTP –º–µ—Ç–æ–¥ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º
- URI –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- Fail-fast –ø—Ä–∏–Ω—Ü–∏–ø: –æ—à–∏–±–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è –Ω–∞ —Ä–∞–Ω–Ω–µ–º —ç—Ç–∞–ø–µ
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ undefined behavior
- –ß–µ—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —á–µ—Ä–µ–∑ `InvalidArgumentException`

### 4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ retry –ª–æ–≥–∏–∫–∏**
–†–∞—Å—à–∏—Ä–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫:
- ‚úÖ –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (ConnectException)
- ‚úÖ –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –æ—à–∏–±–∫–∏ 5xx
- ‚úÖ Rate limiting (429 Too Many Requests)

–î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏:
```php
private const RETRY_MIN_DELAY_MS = 100;    // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
private const RETRY_MAX_DELAY_MS = 30000;  // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (30 —Å–µ–∫)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ–µ–≤
- –ó–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö retry –ø—Ä–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
- Exponential backoff —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏

### 5. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö**
–£–ª—É—á—à–µ–Ω –º–µ—Ç–æ–¥ `requestStream()`:
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞ —á–∞–Ω–∫–∞: `STREAM_CHUNK_SIZE = 8192` (8 –ö–ë)
- –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö —á–∏—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ preview (1024 –±–∞–π—Ç–∞) –≤–º–µ—Å—Ç–æ –≤—Å–µ–≥–æ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ó–∞—â–∏—Ç–∞ –æ—Ç Out of Memory –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å –±–æ–ª—å—à–∏–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ë–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 6. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è PHPDoc**
–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ:
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö exceptions
- –¢–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –õ–µ–≥–∫–æ—Å—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –∫–æ–¥–∞
- –õ—É—á—à–∞—è IDE –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- –°–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º—ã–π –∫–æ–¥

### 7. **–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ getClient()**
–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–∏—Ç—å –±–∞–∑–æ–≤—ã–π Guzzle –∫–ª–∏–µ–Ω—Ç:
```php
public function getClient(): Client
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –∫–ª–∞—Å—Å–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
- –î–æ—Å—Ç—É–ø –∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º Guzzle
- Flexibility –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### 8. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `sprintf()` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–¥—ã –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –º–µ—Ç–æ–¥–∞ –∏ URI
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `InvalidArgumentException`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–∫–∏
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ PSR —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

### 9. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–ª–∏—è–Ω–∏—è –æ–ø—Ü–∏–π**
–ó–∞–º–µ–Ω–∞ `array_replace_recursive()` –Ω–∞ `array_merge_recursive()`:
- –ë–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –º–∞—Å—Å–∏–≤–∞–º–∏
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–∏—Å–ª–æ–≤—ã—Ö –∫–ª—é—á–µ–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—É—Å—Ç—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ edge cases
- –ù–µ–±–æ–ª—å—à–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 10. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∞–π–º–∞—É—Ç–æ–≤**
–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:
```php
$clientConfig['timeout'] = max(0.0, (float)$config['timeout']);
$clientConfig['connect_timeout'] = max(0.0, (float)$config['connect_timeout']);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- –ó–∞—â–∏—Ç–∞ –æ—Ç undefined behavior

### 11. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ retry –ø–æ–ø—ã—Ç–æ–∫**
–£–ª—É—á—à–µ–Ω –º–µ—Ç–æ–¥ `logRetry()`:
- –î–æ–±–∞–≤–ª–µ–Ω HTTP status code –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
- –ë–æ–ª–µ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º
- –õ—É—á—à–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –≤ production

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|------|-------|-----------|
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | 248 | 477 | +92% (–∑–∞ —Å—á–µ—Ç –º–µ—Ç–æ–¥–æ–≤-—Ö–µ–ª–ø–µ—Ä–æ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏) |
| –ü—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ | 2 | 9 | +350% |
| –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã | 0 | 10 | ‚úÖ |
| –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ | ‚ùå | ‚úÖ | ‚úÖ |
| Retry –ø—Ä–∏ 5xx/429 | ‚ùå | ‚úÖ | ‚úÖ |
| –ú–µ—Ç–æ–¥—ã-—Ö–µ–ª–ø–µ—Ä—ã | ‚ùå | ‚úÖ | ‚úÖ |
| PHPDoc –ø–æ–∫—Ä—ã—Ç–∏–µ | 80% | 100% | +25% |

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å

1. **–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** - –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π** - –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
4. **–ó–∞—â–∏—Ç–∞ –æ—Ç OOM** - –ø—Ä–∏ –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–µ –¥–∞–Ω–Ω—ã—Ö
5. **Fail-fast** - —Ä–∞–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

1. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–ª–∏—è–Ω–∏–µ –æ–ø—Ü–∏–π** - –±—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã
2. **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤–º–µ—Å—Ç–æ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª** - –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –º–æ–∂–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
3. **–£–º–Ω—ã–π retry** - –Ω–µ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä—è—Ç—å –ø—Ä–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ retry** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∞–Ω–∏—è

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
```php
$http = new Http(['base_uri' => 'https://api.example.com']);
$response = $http->request('GET', '/users');
```

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
```php
$http = new Http([
    'base_uri' => 'https://api.example.com',
    'timeout' => 30,
    'retries' => 3,
]);

// –°–ø–æ—Å–æ–± 1: —á–µ—Ä–µ–∑ —Ö–µ–ª–ø–µ—Ä
$response = $http->get('/users');

// –°–ø–æ—Å–æ–± 2: —á–µ—Ä–µ–∑ request —Å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏
$response = $http->request(Http::METHOD_GET, '/users');

// –°–ø–æ—Å–æ–± 3: —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
try {
    $response = $http->post('/users', ['json' => $data]);
} catch (InvalidArgumentException $e) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
} catch (RuntimeException $e) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –æ—à–∏–±–æ–∫
}
```

## ‚ú® –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

- ‚úÖ **–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤** —á–µ—Ä–µ–∑ PHPDoc –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- ‚úÖ **–û–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞** –∫–ª–∞—Å—Å–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π** –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ
- ‚úÖ **–ù–∞–¥–µ–∂–Ω—ã–π –∫–æ–¥** —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é
- ‚úÖ **Production ready** - –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

## üéì Best Practices

–ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º best practices:
- PSR-12 (Code Style)
- SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã
- Clean Code
- Defensive Programming
- Fail-Fast Pattern
- Exponential Backoff –¥–ª—è retry –ª–æ–≥–∏–∫–∏

## üìã –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ö–ª–∞—Å—Å `Http.class.php` –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production —Å—Ä–µ–¥–µ. –í—Å–µ —É–ª—É—á—à–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ:
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç–∏** - –≤–∞–ª–∏–¥–∞—Ü–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, retry –ª–æ–≥–∏–∫–∞
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π, –∑–∞—â–∏—Ç–∞ –æ—Ç OOM
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –º–µ—Ç–æ–¥—ã-—Ö–µ–ª–ø–µ—Ä—ã
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è, fail-fast

–ö–æ–¥ —Ç–µ–ø–µ—Ä—å –ª–µ–≥–∫–æ —á–∏—Ç–∞–µ—Ç—Å—è, –ø–æ–Ω—è—Ç–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–µ.
