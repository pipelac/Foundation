2025-11-08T21:00:23+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.458,"body_size":512,"content_type":"application/json"}
2025-11-08T21:00:23+00:00 DEBUG Версия MySQL проверена {"version":"10.11.13-MariaDB-0ubuntu0.24.04.1","major":10,"minor":11,"patch":13}
2025-11-08T21:00:23+00:00 DEBUG Успешное подключение к БД {"host":"localhost","database":"rss2tlg","persistent":false,"charset":"utf8mb4"}
2025-11-08T21:00:24+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.137,"body_size":490,"content_type":"application/json"}
2025-11-08T21:00:24+00:00 DEBUG Выполнена SQL команда {"query":"DELETE FROM rss2tlg_publication_rules","affected_rows":0}
2025-11-08T21:00:24+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:00:24+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:00:24+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:00:24+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:00:24+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.138,"body_size":396,"content_type":"application/json"}
2025-11-08T21:00:24+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.141,"body_size":540,"content_type":"application/json"}
2025-11-08T21:00:42+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.422,"body_size":512,"content_type":"application/json"}
2025-11-08T21:00:42+00:00 DEBUG Версия MySQL проверена {"version":"10.11.13-MariaDB-0ubuntu0.24.04.1","major":10,"minor":11,"patch":13}
2025-11-08T21:00:42+00:00 DEBUG Успешное подключение к БД {"host":"localhost","database":"rss2tlg","persistent":false,"charset":"utf8mb4"}
2025-11-08T21:00:42+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.181,"body_size":490,"content_type":"application/json"}
2025-11-08T21:00:42+00:00 DEBUG Выполнена SQL команда {"query":"DELETE FROM rss2tlg_publication_rules","affected_rows":4}
2025-11-08T21:00:42+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:00:42+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:00:42+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:00:42+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:00:42+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.226,"body_size":396,"content_type":"application/json"}
2025-11-08T21:00:42+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.278,"body_size":540,"content_type":"application/json"}
2025-11-08T21:00:42+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT COUNT(*) as count FROM information_schema.TABLES WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = ?","found":true}
2025-11-08T21:01:16+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.405,"body_size":512,"content_type":"application/json"}
2025-11-08T21:01:16+00:00 DEBUG Версия MySQL проверена {"version":"10.11.13-MariaDB-0ubuntu0.24.04.1","major":10,"minor":11,"patch":13}
2025-11-08T21:01:16+00:00 DEBUG Успешное подключение к БД {"host":"localhost","database":"rss2tlg","persistent":false,"charset":"utf8mb4"}
2025-11-08T21:01:17+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.175,"body_size":490,"content_type":"application/json"}
2025-11-08T21:01:17+00:00 DEBUG Выполнена SQL команда {"query":"DELETE FROM rss2tlg_publication_rules","affected_rows":4}
2025-11-08T21:01:17+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:01:17+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:01:17+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:01:17+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:01:17+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.157,"body_size":396,"content_type":"application/json"}
2025-11-08T21:01:17+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.139,"body_size":564,"content_type":"application/json"}
2025-11-08T21:01:17+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT id, feed_id FROM rss2tlg_items LIMIT :limit","rows":0}
2025-11-08T21:01:17+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_items ( feed_id, content_hash, title, link, description, content, pub_date, is_published, extraction_status ) VALUES ( :feed_id, :content_hash, :title, :link, :description, :conten...","affected_rows":1}
2025-11-08T21:01:17+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_items ( feed_id, content_hash, title, link, description, content, pub_date, is_published, extraction_status ) VALUES ( :feed_id, :content_hash, :title, :link, :description, :conten...","affected_rows":1}
2025-11-08T21:01:17+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_items ( feed_id, content_hash, title, link, description, content, pub_date, is_published, extraction_status ) VALUES ( :feed_id, :content_hash, :title, :link, :description, :conten...","affected_rows":1}
2025-11-08T21:01:17+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT id, feed_id FROM rss2tlg_items ORDER BY id DESC LIMIT :limit","rows":3}
2025-11-08T21:01:17+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.137,"body_size":402,"content_type":"application/json"}
2025-11-08T21:01:17+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:01:17+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT id, feed_id, title, description, content, extracted_content, link, pub_date FROM rss2tlg_items WHERE id = :item_id LIMIT 1","found":true}
2025-11-08T21:01:17+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_summarization (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, updated_at = NO...","affected_rows":1}
2025-11-08T21:01:17+00:00 DEBUG [Summarization] Попытка анализа с моделью {"item_id":3,"model":"anthropic/claude-3.5-sonnet"}
2025-11-08T21:01:23+00:00 INFO HTTP запрос выполнен [POST chat/completions] код 200 {"method":"POST","uri":"chat/completions","status_code":200,"duration":6.185,"body_size":1724,"content_type":"application/json"}
2025-11-08T21:01:23+00:00 DEBUG Выполнена SQL команда {"query":"UPDATE rss2tlg_summarization SET status = 'success', article_language = :article_language, category_primary = :category_primary, category_secondary = :category_secondary, headline = :headline, summary...","affected_rows":1}
2025-11-08T21:01:23+00:00 INFO [Summarization] Новость успешно обработана {"item_id":3,"processing_time_ms":6196}
2025-11-08T21:01:23+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:01:23+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT id, feed_id, title, description, content, extracted_content, link, pub_date FROM rss2tlg_items WHERE id = :item_id LIMIT 1","found":true}
2025-11-08T21:01:23+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_summarization (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, updated_at = NO...","affected_rows":1}
2025-11-08T21:01:23+00:00 DEBUG [Summarization] Попытка анализа с моделью {"item_id":2,"model":"anthropic/claude-3.5-sonnet"}
2025-11-08T21:01:28+00:00 INFO HTTP запрос выполнен [POST chat/completions] код 200 {"method":"POST","uri":"chat/completions","status_code":200,"duration":4.777,"body_size":1599,"content_type":"application/json"}
2025-11-08T21:01:28+00:00 DEBUG Выполнена SQL команда {"query":"UPDATE rss2tlg_summarization SET status = 'success', article_language = :article_language, category_primary = :category_primary, category_secondary = :category_secondary, headline = :headline, summary...","affected_rows":1}
2025-11-08T21:01:28+00:00 INFO [Summarization] Новость успешно обработана {"item_id":2,"processing_time_ms":4785}
2025-11-08T21:01:28+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:01:28+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT id, feed_id, title, description, content, extracted_content, link, pub_date FROM rss2tlg_items WHERE id = :item_id LIMIT 1","found":true}
2025-11-08T21:01:28+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_summarization (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, updated_at = NO...","affected_rows":1}
2025-11-08T21:01:28+00:00 DEBUG [Summarization] Попытка анализа с моделью {"item_id":1,"model":"anthropic/claude-3.5-sonnet"}
2025-11-08T21:01:33+00:00 INFO HTTP запрос выполнен [POST chat/completions] код 200 {"method":"POST","uri":"chat/completions","status_code":200,"duration":5.384,"body_size":1670,"content_type":"application/json"}
2025-11-08T21:01:33+00:00 DEBUG Выполнена SQL команда {"query":"UPDATE rss2tlg_summarization SET status = 'success', article_language = :article_language, category_primary = :category_primary, category_secondary = :category_secondary, headline = :headline, summary...","affected_rows":1}
2025-11-08T21:01:33+00:00 INFO [Summarization] Новость успешно обработана {"item_id":1,"processing_time_ms":5391}
2025-11-08T21:01:34+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.142,"body_size":340,"content_type":"application/json"}
2025-11-08T21:01:34+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:01:34+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT s.item_id, s.feed_id, s.status as summarization_status, s.headline, s.summary, s.article_language, s.category_primary, s.importance_rating, s.dedup_canonical_entities, s.dedup_core_event, s.ded...","found":true}
2025-11-08T21:01:34+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_deduplication (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, updated_at = NO...","affected_rows":1}
2025-11-08T21:01:34+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT s.item_id, s.headline, s.summary, s.article_language, s.category_primary, s.dedup_canonical_entities, s.dedup_core_event, s.dedup_numeric_facts, i.pub_date FROM rss2tlg_summarization s INNER JO...","rows":2}
2025-11-08T21:01:34+00:00 DEBUG [DeduplicationService] Найдено похожих новостей для сравнения {"item_id":3,"count":2}
2025-11-08T21:01:34+00:00 DEBUG [DeduplicationService] Попытка дедупликации с моделью {"item_id":3,"model":"anthropic/claude-3.5-sonnet"}
2025-11-08T21:01:41+00:00 INFO HTTP запрос выполнен [POST chat/completions] код 200 {"method":"POST","uri":"chat/completions","status_code":200,"duration":7.546,"body_size":2099,"content_type":"application/json"}
2025-11-08T21:01:41+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_deduplication ( item_id, feed_id, status, is_duplicate, duplicate_of_item_id, similarity_score, similarity_method, can_be_published, matched_entities, matched_events, matched_facts...","affected_rows":2}
2025-11-08T21:01:41+00:00 INFO [DeduplicationService] Дедупликация завершена {"item_id":3,"is_duplicate":true,"similarity_score":98.5,"processing_time_ms":7561}
2025-11-08T21:01:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:01:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT s.item_id, s.feed_id, s.status as summarization_status, s.headline, s.summary, s.article_language, s.category_primary, s.importance_rating, s.dedup_canonical_entities, s.dedup_core_event, s.ded...","found":true}
2025-11-08T21:01:41+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_deduplication (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, updated_at = NO...","affected_rows":1}
2025-11-08T21:01:41+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT s.item_id, s.headline, s.summary, s.article_language, s.category_primary, s.dedup_canonical_entities, s.dedup_core_event, s.dedup_numeric_facts, i.pub_date FROM rss2tlg_summarization s INNER JO...","rows":2}
2025-11-08T21:01:41+00:00 DEBUG [DeduplicationService] Найдено похожих новостей для сравнения {"item_id":2,"count":2}
2025-11-08T21:01:41+00:00 DEBUG [DeduplicationService] Попытка дедупликации с моделью {"item_id":2,"model":"anthropic/claude-3.5-sonnet"}
2025-11-08T21:01:49+00:00 INFO HTTP запрос выполнен [POST chat/completions] код 200 {"method":"POST","uri":"chat/completions","status_code":200,"duration":8.112,"body_size":2081,"content_type":"application/json"}
2025-11-08T21:01:49+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_deduplication ( item_id, feed_id, status, is_duplicate, duplicate_of_item_id, similarity_score, similarity_method, can_be_published, matched_entities, matched_events, matched_facts...","affected_rows":2}
2025-11-08T21:01:49+00:00 INFO [DeduplicationService] Дедупликация завершена {"item_id":2,"is_duplicate":true,"similarity_score":98.5,"processing_time_ms":8131}
2025-11-08T21:01:49+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:01:49+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT s.item_id, s.feed_id, s.status as summarization_status, s.headline, s.summary, s.article_language, s.category_primary, s.importance_rating, s.dedup_canonical_entities, s.dedup_core_event, s.ded...","found":true}
2025-11-08T21:01:49+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_deduplication (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, updated_at = NO...","affected_rows":1}
2025-11-08T21:01:49+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT s.item_id, s.headline, s.summary, s.article_language, s.category_primary, s.dedup_canonical_entities, s.dedup_core_event, s.dedup_numeric_facts, i.pub_date FROM rss2tlg_summarization s INNER JO...","rows":2}
2025-11-08T21:01:49+00:00 DEBUG [DeduplicationService] Найдено похожих новостей для сравнения {"item_id":1,"count":2}
2025-11-08T21:01:49+00:00 DEBUG [DeduplicationService] Попытка дедупликации с моделью {"item_id":1,"model":"anthropic/claude-3.5-sonnet"}
2025-11-08T21:01:57+00:00 INFO HTTP запрос выполнен [POST chat/completions] код 200 {"method":"POST","uri":"chat/completions","status_code":200,"duration":7.793,"body_size":2117,"content_type":"application/json"}
2025-11-08T21:01:57+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_deduplication ( item_id, feed_id, status, is_duplicate, duplicate_of_item_id, similarity_score, similarity_method, can_be_published, matched_entities, matched_events, matched_facts...","affected_rows":2}
2025-11-08T21:01:57+00:00 INFO [DeduplicationService] Дедупликация завершена {"item_id":1,"is_duplicate":true,"similarity_score":98.5,"processing_time_ms":7807}
2025-11-08T21:01:57+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.144,"body_size":384,"content_type":"application/json"}
2025-11-08T21:01:57+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:01:57+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:01:57+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":3}
2025-11-08T21:01:57+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:01:57+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:01:57+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":2}
2025-11-08T21:01:57+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:01:57+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:01:57+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":1}
2025-11-08T21:01:57+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.139,"body_size":322,"content_type":"application/json"}
2025-11-08T21:01:58+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.149,"body_size":579,"content_type":"application/json"}
2025-11-08T21:02:19+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.41,"body_size":512,"content_type":"application/json"}
2025-11-08T21:02:19+00:00 DEBUG Версия MySQL проверена {"version":"10.11.13-MariaDB-0ubuntu0.24.04.1","major":10,"minor":11,"patch":13}
2025-11-08T21:02:19+00:00 DEBUG Успешное подключение к БД {"host":"localhost","database":"rss2tlg","persistent":false,"charset":"utf8mb4"}
2025-11-08T21:02:19+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.136,"body_size":490,"content_type":"application/json"}
2025-11-08T21:02:19+00:00 DEBUG Выполнена SQL команда {"query":"DELETE FROM rss2tlg_publication_rules","affected_rows":4}
2025-11-08T21:02:19+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:02:19+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:02:19+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:02:19+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:02:19+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.145,"body_size":396,"content_type":"application/json"}
2025-11-08T21:02:19+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.137,"body_size":564,"content_type":"application/json"}
2025-11-08T21:02:19+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT id, feed_id FROM rss2tlg_items LIMIT :limit","rows":3}
2025-11-08T21:02:19+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.139,"body_size":353,"content_type":"application/json"}
2025-11-08T21:02:19+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:19+00:00 INFO [Summarization] Новость уже обработана {"item_id":3}
2025-11-08T21:02:19+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:19+00:00 INFO [Summarization] Новость уже обработана {"item_id":1}
2025-11-08T21:02:19+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:19+00:00 INFO [Summarization] Новость уже обработана {"item_id":2}
2025-11-08T21:02:19+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.137,"body_size":340,"content_type":"application/json"}
2025-11-08T21:02:19+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:19+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":3}
2025-11-08T21:02:19+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:19+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":1}
2025-11-08T21:02:20+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:20+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":2}
2025-11-08T21:02:20+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.136,"body_size":384,"content_type":"application/json"}
2025-11-08T21:02:20+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:02:20+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:20+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":3}
2025-11-08T21:02:20+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:02:20+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:20+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":1}
2025-11-08T21:02:20+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:02:20+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:20+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":2}
2025-11-08T21:02:20+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.158,"body_size":322,"content_type":"application/json"}
2025-11-08T21:02:20+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.136,"body_size":579,"content_type":"application/json"}
2025-11-08T21:02:40+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.425,"body_size":512,"content_type":"application/json"}
2025-11-08T21:02:40+00:00 DEBUG Версия MySQL проверена {"version":"10.11.13-MariaDB-0ubuntu0.24.04.1","major":10,"minor":11,"patch":13}
2025-11-08T21:02:40+00:00 DEBUG Успешное подключение к БД {"host":"localhost","database":"rss2tlg","persistent":false,"charset":"utf8mb4"}
2025-11-08T21:02:40+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.144,"body_size":490,"content_type":"application/json"}
2025-11-08T21:02:40+00:00 DEBUG Выполнена SQL команда {"query":"DELETE FROM rss2tlg_publication_rules","affected_rows":4}
2025-11-08T21:02:40+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:02:40+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:02:40+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:02:40+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:02:40+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.144,"body_size":396,"content_type":"application/json"}
2025-11-08T21:02:40+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.14,"body_size":564,"content_type":"application/json"}
2025-11-08T21:02:40+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT id, feed_id FROM rss2tlg_items LIMIT :limit","rows":3}
2025-11-08T21:02:40+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.151,"body_size":353,"content_type":"application/json"}
2025-11-08T21:02:40+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:40+00:00 INFO [Summarization] Новость уже обработана {"item_id":3}
2025-11-08T21:02:40+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:40+00:00 INFO [Summarization] Новость уже обработана {"item_id":1}
2025-11-08T21:02:40+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:40+00:00 INFO [Summarization] Новость уже обработана {"item_id":2}
2025-11-08T21:02:41+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.16,"body_size":340,"content_type":"application/json"}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:41+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":3}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:41+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":1}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:41+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":2}
2025-11-08T21:02:41+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.156,"body_size":384,"content_type":"application/json"}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:41+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":3}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:41+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":1}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:02:41+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":2}
2025-11-08T21:02:41+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.18,"body_size":322,"content_type":"application/json"}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT i.id, i.feed_id, i.title, i.link, s.headline, s.summary, s.category_primary, s.importance_rating, s.article_language FROM rss2tlg_items i INNER JOIN rss2tlg_summarization s ON i.id = s.item_id ...","found":true}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id AND status = 'checked' LIMIT 1","found":true}
2025-11-08T21:02:41+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_illustration (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, error_message = ...","affected_rows":1}
2025-11-08T21:02:41+00:00 INFO [IllustrationService] Новость пропущена (дубликат или запрещена к публикации) {"item_id":3}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT i.id, i.feed_id, i.title, i.link, s.headline, s.summary, s.category_primary, s.importance_rating, s.article_language FROM rss2tlg_items i INNER JOIN rss2tlg_summarization s ON i.id = s.item_id ...","found":true}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id AND status = 'checked' LIMIT 1","found":true}
2025-11-08T21:02:41+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_illustration (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, error_message = ...","affected_rows":1}
2025-11-08T21:02:41+00:00 INFO [IllustrationService] Новость пропущена (дубликат или запрещена к публикации) {"item_id":1}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT i.id, i.feed_id, i.title, i.link, s.headline, s.summary, s.category_primary, s.importance_rating, s.article_language FROM rss2tlg_items i INNER JOIN rss2tlg_summarization s ON i.id = s.item_id ...","found":true}
2025-11-08T21:02:41+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id AND status = 'checked' LIMIT 1","found":true}
2025-11-08T21:02:41+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_illustration (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, error_message = ...","affected_rows":1}
2025-11-08T21:02:41+00:00 INFO [IllustrationService] Новость пропущена (дубликат или запрещена к публикации) {"item_id":2}
2025-11-08T21:02:41+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.201,"body_size":371,"content_type":"application/json"}
2025-11-08T21:02:41+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.165,"body_size":535,"content_type":"application/json"}
2025-11-08T21:03:11+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.423,"body_size":512,"content_type":"application/json"}
2025-11-08T21:03:11+00:00 DEBUG Версия MySQL проверена {"version":"10.11.13-MariaDB-0ubuntu0.24.04.1","major":10,"minor":11,"patch":13}
2025-11-08T21:03:11+00:00 DEBUG Успешное подключение к БД {"host":"localhost","database":"rss2tlg","persistent":false,"charset":"utf8mb4"}
2025-11-08T21:03:11+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.14,"body_size":490,"content_type":"application/json"}
2025-11-08T21:03:11+00:00 DEBUG Выполнена SQL команда {"query":"DELETE FROM rss2tlg_publication_rules","affected_rows":4}
2025-11-08T21:03:11+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:03:11+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:03:11+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:03:11+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:03:11+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.145,"body_size":396,"content_type":"application/json"}
2025-11-08T21:03:11+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.142,"body_size":564,"content_type":"application/json"}
2025-11-08T21:03:11+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT id, feed_id FROM rss2tlg_items LIMIT :limit","rows":3}
2025-11-08T21:03:12+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.139,"body_size":353,"content_type":"application/json"}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 INFO [Summarization] Новость уже обработана {"item_id":3}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 INFO [Summarization] Новость уже обработана {"item_id":1}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 INFO [Summarization] Новость уже обработана {"item_id":2}
2025-11-08T21:03:12+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.145,"body_size":340,"content_type":"application/json"}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":3}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":1}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":2}
2025-11-08T21:03:12+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.138,"body_size":384,"content_type":"application/json"}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":3}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":1}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":2}
2025-11-08T21:03:12+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.137,"body_size":322,"content_type":"application/json"}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT i.id, i.feed_id, i.title, i.link, s.headline, s.summary, s.category_primary, s.importance_rating, s.article_language FROM rss2tlg_items i INNER JOIN rss2tlg_summarization s ON i.id = s.item_id ...","found":true}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id AND status = 'checked' LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_illustration (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, error_message = ...","affected_rows":2}
2025-11-08T21:03:12+00:00 INFO [IllustrationService] Новость пропущена (дубликат или запрещена к публикации) {"item_id":3}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT i.id, i.feed_id, i.title, i.link, s.headline, s.summary, s.category_primary, s.importance_rating, s.article_language FROM rss2tlg_items i INNER JOIN rss2tlg_summarization s ON i.id = s.item_id ...","found":true}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id AND status = 'checked' LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_illustration (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, error_message = ...","affected_rows":2}
2025-11-08T21:03:12+00:00 INFO [IllustrationService] Новость пропущена (дубликат или запрещена к публикации) {"item_id":1}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT i.id, i.feed_id, i.title, i.link, s.headline, s.summary, s.category_primary, s.importance_rating, s.article_language FROM rss2tlg_items i INNER JOIN rss2tlg_summarization s ON i.id = s.item_id ...","found":true}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id AND status = 'checked' LIMIT 1","found":true}
2025-11-08T21:03:12+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_illustration (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, error_message = ...","affected_rows":2}
2025-11-08T21:03:12+00:00 INFO [IllustrationService] Новость пропущена (дубликат или запрещена к публикации) {"item_id":2}
2025-11-08T21:03:12+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.143,"body_size":371,"content_type":"application/json"}
2025-11-08T21:03:12+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.164,"body_size":535,"content_type":"application/json"}
2025-11-08T21:03:12+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:03:12+00:00 WARNING [PublicationService] Новость не готова к публикации {"item_id":3}
2025-11-08T21:03:13+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:03:13+00:00 WARNING [PublicationService] Новость не готова к публикации {"item_id":1}
2025-11-08T21:03:13+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:03:13+00:00 WARNING [PublicationService] Новость не готова к публикации {"item_id":2}
2025-11-08T21:03:14+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.169,"body_size":473,"content_type":"application/json"}
2025-11-08T21:03:14+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_publication_stats LIMIT 1","found":false}
2025-11-08T21:03:14+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT * FROM rss2tlg_publications WHERE publication_status = \"published\" ORDER BY published_at DESC LIMIT 5","rows":0}
2025-11-08T21:03:14+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.181,"body_size":928,"content_type":"application/json"}
2025-11-08T21:03:42+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.396,"body_size":512,"content_type":"application/json"}
2025-11-08T21:03:42+00:00 DEBUG Версия MySQL проверена {"version":"10.11.13-MariaDB-0ubuntu0.24.04.1","major":10,"minor":11,"patch":13}
2025-11-08T21:03:42+00:00 DEBUG Успешное подключение к БД {"host":"localhost","database":"rss2tlg","persistent":false,"charset":"utf8mb4"}
2025-11-08T21:03:42+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.14,"body_size":490,"content_type":"application/json"}
2025-11-08T21:03:42+00:00 DEBUG Выполнена SQL команда {"query":"DELETE FROM rss2tlg_publication_rules","affected_rows":4}
2025-11-08T21:03:42+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:03:42+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:03:42+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:03:42+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:03:42+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.138,"body_size":396,"content_type":"application/json"}
2025-11-08T21:03:42+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.139,"body_size":564,"content_type":"application/json"}
2025-11-08T21:03:42+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT id, feed_id FROM rss2tlg_items LIMIT :limit","rows":3}
2025-11-08T21:03:42+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.143,"body_size":353,"content_type":"application/json"}
2025-11-08T21:03:42+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:42+00:00 INFO [Summarization] Новость уже обработана {"item_id":3}
2025-11-08T21:03:42+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:42+00:00 INFO [Summarization] Новость уже обработана {"item_id":1}
2025-11-08T21:03:42+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:42+00:00 INFO [Summarization] Новость уже обработана {"item_id":2}
2025-11-08T21:03:43+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.138,"body_size":340,"content_type":"application/json"}
2025-11-08T21:03:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:43+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":3}
2025-11-08T21:03:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:43+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":1}
2025-11-08T21:03:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:43+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":2}
2025-11-08T21:03:43+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.136,"body_size":384,"content_type":"application/json"}
2025-11-08T21:03:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:03:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_translation WHERE item_id = :item_id AND target_language = :target_language LIMIT 1","found":false}
2025-11-08T21:03:43+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_translation ( item_id, feed_id, source_language, target_language, status, created_at, updated_at ) VALUES ( :item_id, :feed_id, :source_language, :target_language, :status, NOW(), ...","affected_rows":1}
2025-11-08T21:03:43+00:00 DEBUG [TranslationService] Попытка перевода с моделью {"item_id":3,"model":"anthropic/claude-3.5-sonnet","target_language":"ru"}
2025-11-08T21:03:49+00:00 INFO HTTP запрос выполнен [POST chat/completions] код 200 {"method":"POST","uri":"chat/completions","status_code":200,"duration":6.575,"body_size":2031,"content_type":"application/json"}
2025-11-08T21:03:49+00:00 DEBUG Выполнена SQL команда {"query":"UPDATE rss2tlg_translation SET status = 'success', translated_headline = :translated_headline, translated_summary = :translated_summary, quality_score = :quality_score, quality_issues = :quality_issue...","affected_rows":1}
2025-11-08T21:03:49+00:00 INFO [TranslationService] Перевод успешно выполнен {"item_id":3,"source_language":"en","target_language":"ru"}
2025-11-08T21:03:49+00:00 INFO [TranslationService] Новость успешно переведена на все языки {"item_id":3,"languages":["ru"],"processing_time_ms":6590}
2025-11-08T21:03:49+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:03:49+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:49+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":1}
2025-11-08T21:03:49+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:03:49+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:49+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_translation WHERE item_id = :item_id AND target_language = :target_language LIMIT 1","found":false}
2025-11-08T21:03:49+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_translation ( item_id, feed_id, source_language, target_language, status, created_at, updated_at ) VALUES ( :item_id, :feed_id, :source_language, :target_language, :status, NOW(), ...","affected_rows":1}
2025-11-08T21:03:49+00:00 DEBUG [TranslationService] Попытка перевода с моделью {"item_id":2,"model":"anthropic/claude-3.5-sonnet","target_language":"ru"}
2025-11-08T21:03:56+00:00 INFO HTTP запрос выполнен [POST chat/completions] код 200 {"method":"POST","uri":"chat/completions","status_code":200,"duration":6.194,"body_size":1927,"content_type":"application/json"}
2025-11-08T21:03:56+00:00 DEBUG Выполнена SQL команда {"query":"UPDATE rss2tlg_translation SET status = 'success', translated_headline = :translated_headline, translated_summary = :translated_summary, quality_score = :quality_score, quality_issues = :quality_issue...","affected_rows":1}
2025-11-08T21:03:56+00:00 INFO [TranslationService] Перевод успешно выполнен {"item_id":2,"source_language":"en","target_language":"ru"}
2025-11-08T21:03:56+00:00 INFO [TranslationService] Новость успешно переведена на все языки {"item_id":2,"languages":["ru"],"processing_time_ms":6209}
2025-11-08T21:03:56+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.168,"body_size":322,"content_type":"application/json"}
2025-11-08T21:03:56+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:03:56+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT i.id, i.feed_id, i.title, i.link, s.headline, s.summary, s.category_primary, s.importance_rating, s.article_language FROM rss2tlg_items i INNER JOIN rss2tlg_summarization s ON i.id = s.item_id ...","found":true}
2025-11-08T21:03:56+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id AND status = 'checked' LIMIT 1","found":true}
2025-11-08T21:03:56+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_illustration (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, updated_at = NOW...","affected_rows":2}
2025-11-08T21:04:07+00:00 INFO HTTP запрос выполнен [POST chat/completions] код 200 {"method":"POST","uri":"chat/completions","status_code":200,"duration":11.011,"body_size":3189,"content_type":"application/json"}
2025-11-08T21:04:07+00:00 DEBUG [IllustrationService] Попытка генерации с моделью {"item_id":3,"model":"anthropic/claude-3.5-sonnet"}
2025-11-08T21:04:07+00:00 WARNING [IllustrationService] Генерация через OpenRouter недоступна, используем placeholder {"item_id":3,"model":"anthropic/claude-3.5-sonnet"}
2025-11-08T21:04:32+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.479,"body_size":512,"content_type":"application/json"}
2025-11-08T21:04:32+00:00 DEBUG Версия MySQL проверена {"version":"10.11.13-MariaDB-0ubuntu0.24.04.1","major":10,"minor":11,"patch":13}
2025-11-08T21:04:32+00:00 DEBUG Успешное подключение к БД {"host":"localhost","database":"rss2tlg","persistent":false,"charset":"utf8mb4"}
2025-11-08T21:04:32+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.215,"body_size":490,"content_type":"application/json"}
2025-11-08T21:04:32+00:00 DEBUG Выполнена SQL команда {"query":"DELETE FROM rss2tlg_publication_rules","affected_rows":4}
2025-11-08T21:04:32+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:04:32+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:04:32+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:04:32+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:04:32+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.236,"body_size":396,"content_type":"application/json"}
2025-11-08T21:04:32+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.277,"body_size":564,"content_type":"application/json"}
2025-11-08T21:04:32+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT id, feed_id FROM rss2tlg_items LIMIT :limit","rows":3}
2025-11-08T21:04:33+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.25,"body_size":353,"content_type":"application/json"}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 INFO [Summarization] Новость уже обработана {"item_id":3}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 INFO [Summarization] Новость уже обработана {"item_id":1}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 INFO [Summarization] Новость уже обработана {"item_id":2}
2025-11-08T21:04:33+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.181,"body_size":340,"content_type":"application/json"}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":3}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":1}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":2}
2025-11-08T21:04:33+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.137,"body_size":384,"content_type":"application/json"}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_translation WHERE item_id = :item_id AND target_language = :target_language LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 DEBUG [TranslationService] Перевод уже существует {"item_id":3,"language":"ru"}
2025-11-08T21:04:33+00:00 INFO [TranslationService] Новость успешно переведена на все языки {"item_id":3,"languages":["ru"],"processing_time_ms":4}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":1}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_translation WHERE item_id = :item_id AND target_language = :target_language LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 DEBUG [TranslationService] Перевод уже существует {"item_id":2,"language":"ru"}
2025-11-08T21:04:33+00:00 INFO [TranslationService] Новость успешно переведена на все языки {"item_id":2,"languages":["ru"],"processing_time_ms":3}
2025-11-08T21:04:33+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.138,"body_size":322,"content_type":"application/json"}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT i.id, i.feed_id, i.title, i.link, s.headline, s.summary, s.category_primary, s.importance_rating, s.article_language FROM rss2tlg_items i INNER JOIN rss2tlg_summarization s ON i.id = s.item_id ...","found":true}
2025-11-08T21:04:33+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id AND status = 'checked' LIMIT 1","found":true}
2025-11-08T21:04:33+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_illustration (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, updated_at = NOW...","affected_rows":2}
2025-11-08T21:04:44+00:00 INFO HTTP запрос выполнен [POST chat/completions] код 200 {"method":"POST","uri":"chat/completions","status_code":200,"duration":11.215,"body_size":3248,"content_type":"application/json"}
2025-11-08T21:04:44+00:00 DEBUG [IllustrationService] Попытка генерации с моделью {"item_id":3,"model":"anthropic/claude-3.5-sonnet"}
2025-11-08T21:04:44+00:00 WARNING [IllustrationService] Генерация через OpenRouter недоступна, используем placeholder {"item_id":3,"model":"anthropic/claude-3.5-sonnet"}
2025-11-08T21:04:44+00:00 DEBUG [IllustrationService] Обработка изображения {"item_id":3,"data_length":10108,"data_preview":"iVBORw0KGgoAAAANSUhEUgAABQAAAALQCAIAAABAH0oBAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAdT0lEQVR4nO3dO7LbyqGGUeiW"}
2025-11-08T21:04:44+00:00 DEBUG Выполнена SQL команда {"query":"UPDATE rss2tlg_illustration SET status = 'success', image_path = :image_path, image_width = :image_width, image_height = :image_height, image_size_bytes = :image_size_bytes, image_format = :image_form...","affected_rows":1}
2025-11-08T21:04:44+00:00 INFO [IllustrationService] Иллюстрация успешно сгенерирована {"item_id":3,"image_path":"data/images/rss2tlg/rss_feed_1/item_3_20251108_210444.png","processing_time_ms":11262}
2025-11-08T21:04:44+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:04:44+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT i.id, i.feed_id, i.title, i.link, s.headline, s.summary, s.category_primary, s.importance_rating, s.article_language FROM rss2tlg_items i INNER JOIN rss2tlg_summarization s ON i.id = s.item_id ...","found":true}
2025-11-08T21:04:44+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id AND status = 'checked' LIMIT 1","found":true}
2025-11-08T21:04:44+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_illustration (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, error_message = ...","affected_rows":2}
2025-11-08T21:04:44+00:00 INFO [IllustrationService] Новость пропущена (дубликат или запрещена к публикации) {"item_id":1}
2025-11-08T21:04:44+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:04:44+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT i.id, i.feed_id, i.title, i.link, s.headline, s.summary, s.category_primary, s.importance_rating, s.article_language FROM rss2tlg_items i INNER JOIN rss2tlg_summarization s ON i.id = s.item_id ...","found":true}
2025-11-08T21:04:44+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id AND status = 'checked' LIMIT 1","found":true}
2025-11-08T21:04:44+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_illustration (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, updated_at = NOW...","affected_rows":2}
2025-11-08T21:04:57+00:00 INFO HTTP запрос выполнен [POST chat/completions] код 200 {"method":"POST","uri":"chat/completions","status_code":200,"duration":12.799,"body_size":3266,"content_type":"application/json"}
2025-11-08T21:04:57+00:00 DEBUG [IllustrationService] Попытка генерации с моделью {"item_id":2,"model":"anthropic/claude-3.5-sonnet"}
2025-11-08T21:04:57+00:00 WARNING [IllustrationService] Генерация через OpenRouter недоступна, используем placeholder {"item_id":2,"model":"anthropic/claude-3.5-sonnet"}
2025-11-08T21:04:57+00:00 DEBUG [IllustrationService] Обработка изображения {"item_id":2,"data_length":10208,"data_preview":"iVBORw0KGgoAAAANSUhEUgAABQAAAALQCAIAAABAH0oBAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAdmElEQVR4nO3dO5bbRgKGUWiO"}
2025-11-08T21:04:57+00:00 DEBUG Выполнена SQL команда {"query":"UPDATE rss2tlg_illustration SET status = 'success', image_path = :image_path, image_width = :image_width, image_height = :image_height, image_size_bytes = :image_size_bytes, image_format = :image_form...","affected_rows":1}
2025-11-08T21:04:57+00:00 INFO [IllustrationService] Иллюстрация успешно сгенерирована {"item_id":2,"image_path":"data/images/rss2tlg/rss_feed_3/item_2_20251108_210457.png","processing_time_ms":12838}
2025-11-08T21:04:57+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.187,"body_size":371,"content_type":"application/json"}
2025-11-08T21:04:58+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.138,"body_size":535,"content_type":"application/json"}
2025-11-08T21:04:58+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:04:58+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT * FROM rss2tlg_publication_rules WHERE feed_id = :feed_id AND enabled = 1 ORDER BY priority DESC","rows":2}
2025-11-08T21:04:58+00:00 DEBUG [PublicationService] Новость не соответствует min_importance {"item_id":3,"importance":8,"required":12}
2025-11-08T21:04:58+00:00 DEBUG [PublicationService] Новость не соответствует min_importance {"item_id":3,"importance":8,"required":10}
2025-11-08T21:04:58+00:00 WARNING [PublicationService] Новость не соответствует ни одному правилу {"item_id":3}
2025-11-08T21:04:58+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:04:58+00:00 WARNING [PublicationService] Новость не готова к публикации {"item_id":1}
2025-11-08T21:04:59+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:04:59+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT * FROM rss2tlg_publication_rules WHERE feed_id = :feed_id AND enabled = 1 ORDER BY priority DESC","rows":1}
2025-11-08T21:04:59+00:00 DEBUG [PublicationService] Новость не соответствует min_importance {"item_id":2,"importance":8,"required":12}
2025-11-08T21:04:59+00:00 WARNING [PublicationService] Новость не соответствует ни одному правилу {"item_id":2}
2025-11-08T21:04:59+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.145,"body_size":473,"content_type":"application/json"}
2025-11-08T21:04:59+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_publication_stats LIMIT 1","found":false}
2025-11-08T21:04:59+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT * FROM rss2tlg_publications WHERE publication_status = \"published\" ORDER BY published_at DESC LIMIT 5","rows":0}
2025-11-08T21:04:59+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.143,"body_size":928,"content_type":"application/json"}
2025-11-08T21:05:42+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.403,"body_size":512,"content_type":"application/json"}
2025-11-08T21:05:42+00:00 DEBUG Версия MySQL проверена {"version":"10.11.13-MariaDB-0ubuntu0.24.04.1","major":10,"minor":11,"patch":13}
2025-11-08T21:05:42+00:00 DEBUG Успешное подключение к БД {"host":"localhost","database":"rss2tlg","persistent":false,"charset":"utf8mb4"}
2025-11-08T21:05:43+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.16,"body_size":490,"content_type":"application/json"}
2025-11-08T21:05:43+00:00 DEBUG Выполнена SQL команда {"query":"DELETE FROM rss2tlg_publication_rules","affected_rows":4}
2025-11-08T21:05:43+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:05:43+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:05:43+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:05:43+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:05:43+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.158,"body_size":396,"content_type":"application/json"}
2025-11-08T21:05:43+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.147,"body_size":564,"content_type":"application/json"}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT id, feed_id FROM rss2tlg_items LIMIT :limit","rows":3}
2025-11-08T21:05:43+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.147,"body_size":353,"content_type":"application/json"}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:05:43+00:00 INFO [Summarization] Новость уже обработана {"item_id":3}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:05:43+00:00 INFO [Summarization] Новость уже обработана {"item_id":1}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:05:43+00:00 INFO [Summarization] Новость уже обработана {"item_id":2}
2025-11-08T21:05:43+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.138,"body_size":340,"content_type":"application/json"}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:05:43+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":3}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:05:43+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":1}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:05:43+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":2}
2025-11-08T21:05:43+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.137,"body_size":384,"content_type":"application/json"}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_translation WHERE item_id = :item_id AND target_language = :target_language LIMIT 1","found":true}
2025-11-08T21:05:43+00:00 DEBUG [TranslationService] Перевод уже существует {"item_id":3,"language":"ru"}
2025-11-08T21:05:43+00:00 INFO [TranslationService] Новость успешно переведена на все языки {"item_id":3,"languages":["ru"],"processing_time_ms":5}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:05:43+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":1}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:05:43+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_translation WHERE item_id = :item_id AND target_language = :target_language LIMIT 1","found":true}
2025-11-08T21:05:43+00:00 DEBUG [TranslationService] Перевод уже существует {"item_id":2,"language":"ru"}
2025-11-08T21:05:43+00:00 INFO [TranslationService] Новость успешно переведена на все языки {"item_id":2,"languages":["ru"],"processing_time_ms":4}
2025-11-08T21:05:44+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.146,"body_size":322,"content_type":"application/json"}
2025-11-08T21:05:44+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:05:44+00:00 INFO [IllustrationService] Иллюстрация уже сгенерирована {"item_id":3}
2025-11-08T21:05:44+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:05:44+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT i.id, i.feed_id, i.title, i.link, s.headline, s.summary, s.category_primary, s.importance_rating, s.article_language FROM rss2tlg_items i INNER JOIN rss2tlg_summarization s ON i.id = s.item_id ...","found":true}
2025-11-08T21:05:44+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id AND status = 'checked' LIMIT 1","found":true}
2025-11-08T21:05:44+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_illustration (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, error_message = ...","affected_rows":2}
2025-11-08T21:05:44+00:00 INFO [IllustrationService] Новость пропущена (дубликат или запрещена к публикации) {"item_id":1}
2025-11-08T21:05:44+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:05:44+00:00 INFO [IllustrationService] Иллюстрация уже сгенерирована {"item_id":2}
2025-11-08T21:05:44+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.141,"body_size":371,"content_type":"application/json"}
2025-11-08T21:05:44+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.146,"body_size":535,"content_type":"application/json"}
2025-11-08T21:05:44+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:05:44+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT * FROM rss2tlg_publication_rules WHERE feed_id = :feed_id AND enabled = 1 ORDER BY priority DESC","rows":2}
2025-11-08T21:05:44+00:00 DEBUG [PublicationService] Новость не соответствует min_importance {"item_id":3,"importance":8,"required":12}
2025-11-08T21:05:44+00:00 DEBUG [PublicationService] Новость не соответствует min_importance {"item_id":3,"importance":8,"required":10}
2025-11-08T21:05:44+00:00 WARNING [PublicationService] Новость не соответствует ни одному правилу {"item_id":3}
2025-11-08T21:05:44+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:05:44+00:00 WARNING [PublicationService] Новость не готова к публикации {"item_id":1}
2025-11-08T21:05:45+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:05:45+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT * FROM rss2tlg_publication_rules WHERE feed_id = :feed_id AND enabled = 1 ORDER BY priority DESC","rows":1}
2025-11-08T21:05:45+00:00 DEBUG [PublicationService] Новость не соответствует min_importance {"item_id":2,"importance":8,"required":12}
2025-11-08T21:05:45+00:00 WARNING [PublicationService] Новость не соответствует ни одному правилу {"item_id":2}
2025-11-08T21:05:46+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.137,"body_size":473,"content_type":"application/json"}
2025-11-08T21:05:46+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_publication_stats LIMIT 1","found":false}
2025-11-08T21:05:46+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT * FROM rss2tlg_publications WHERE publication_status = \"published\" ORDER BY published_at DESC LIMIT 5","rows":0}
2025-11-08T21:05:46+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.142,"body_size":927,"content_type":"application/json"}
2025-11-08T21:06:13+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.495,"body_size":512,"content_type":"application/json"}
2025-11-08T21:06:13+00:00 DEBUG Версия MySQL проверена {"version":"10.11.13-MariaDB-0ubuntu0.24.04.1","major":10,"minor":11,"patch":13}
2025-11-08T21:06:13+00:00 DEBUG Успешное подключение к БД {"host":"localhost","database":"rss2tlg","persistent":false,"charset":"utf8mb4"}
2025-11-08T21:06:14+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.254,"body_size":490,"content_type":"application/json"}
2025-11-08T21:06:14+00:00 DEBUG Выполнена SQL команда {"query":"DELETE FROM rss2tlg_publication_rules","affected_rows":4}
2025-11-08T21:06:14+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:06:14+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:06:14+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:06:14+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:06:14+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.227,"body_size":396,"content_type":"application/json"}
2025-11-08T21:06:14+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.189,"body_size":564,"content_type":"application/json"}
2025-11-08T21:06:14+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT id, feed_id FROM rss2tlg_items LIMIT :limit","rows":3}
2025-11-08T21:06:14+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.143,"body_size":353,"content_type":"application/json"}
2025-11-08T21:06:14+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:14+00:00 INFO [Summarization] Новость уже обработана {"item_id":3}
2025-11-08T21:06:14+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:14+00:00 INFO [Summarization] Новость уже обработана {"item_id":1}
2025-11-08T21:06:14+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:14+00:00 INFO [Summarization] Новость уже обработана {"item_id":2}
2025-11-08T21:06:14+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.141,"body_size":340,"content_type":"application/json"}
2025-11-08T21:06:14+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:14+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":3}
2025-11-08T21:06:14+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:14+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":1}
2025-11-08T21:06:14+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:14+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":2}
2025-11-08T21:06:14+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.137,"body_size":384,"content_type":"application/json"}
2025-11-08T21:06:14+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:06:14+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:14+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_translation WHERE item_id = :item_id AND target_language = :target_language LIMIT 1","found":true}
2025-11-08T21:06:14+00:00 DEBUG [TranslationService] Перевод уже существует {"item_id":3,"language":"ru"}
2025-11-08T21:06:14+00:00 INFO [TranslationService] Новость успешно переведена на все языки {"item_id":3,"languages":["ru"],"processing_time_ms":6}
2025-11-08T21:06:14+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:06:14+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:14+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":1}
2025-11-08T21:06:14+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:06:15+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:15+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_translation WHERE item_id = :item_id AND target_language = :target_language LIMIT 1","found":true}
2025-11-08T21:06:15+00:00 DEBUG [TranslationService] Перевод уже существует {"item_id":2,"language":"ru"}
2025-11-08T21:06:15+00:00 INFO [TranslationService] Новость успешно переведена на все языки {"item_id":2,"languages":["ru"],"processing_time_ms":4}
2025-11-08T21:06:15+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.144,"body_size":322,"content_type":"application/json"}
2025-11-08T21:06:15+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:15+00:00 INFO [IllustrationService] Иллюстрация уже сгенерирована {"item_id":3}
2025-11-08T21:06:15+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:15+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT i.id, i.feed_id, i.title, i.link, s.headline, s.summary, s.category_primary, s.importance_rating, s.article_language FROM rss2tlg_items i INNER JOIN rss2tlg_summarization s ON i.id = s.item_id ...","found":true}
2025-11-08T21:06:15+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id AND status = 'checked' LIMIT 1","found":true}
2025-11-08T21:06:15+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_illustration (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, error_message = ...","affected_rows":2}
2025-11-08T21:06:15+00:00 INFO [IllustrationService] Новость пропущена (дубликат или запрещена к публикации) {"item_id":1}
2025-11-08T21:06:15+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:15+00:00 INFO [IllustrationService] Иллюстрация уже сгенерирована {"item_id":2}
2025-11-08T21:06:15+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.141,"body_size":371,"content_type":"application/json"}
2025-11-08T21:06:15+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.141,"body_size":535,"content_type":"application/json"}
2025-11-08T21:06:15+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:15+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT * FROM rss2tlg_publication_rules WHERE feed_id = :feed_id AND enabled = 1 ORDER BY priority DESC","rows":2}
2025-11-08T21:06:15+00:00 DEBUG [PublicationService] Новость не соответствует min_importance {"item_id":3,"importance":8,"required":12}
2025-11-08T21:06:15+00:00 DEBUG [PublicationService] Новость не соответствует min_importance {"item_id":3,"importance":8,"required":10}
2025-11-08T21:06:15+00:00 WARNING [PublicationService] Новость не соответствует ни одному правилу {"item_id":3}
2025-11-08T21:06:15+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:06:15+00:00 WARNING [PublicationService] Новость не готова к публикации {"item_id":1}
2025-11-08T21:06:16+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:16+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT * FROM rss2tlg_publication_rules WHERE feed_id = :feed_id AND enabled = 1 ORDER BY priority DESC","rows":1}
2025-11-08T21:06:16+00:00 DEBUG [PublicationService] Новость не соответствует min_importance {"item_id":2,"importance":8,"required":12}
2025-11-08T21:06:16+00:00 WARNING [PublicationService] Новость не соответствует ни одному правилу {"item_id":2}
2025-11-08T21:06:17+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.142,"body_size":473,"content_type":"application/json"}
2025-11-08T21:06:17+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_publication_stats LIMIT 1","found":false}
2025-11-08T21:06:17+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT * FROM rss2tlg_publications WHERE publication_status = \"published\" ORDER BY published_at DESC LIMIT 5","rows":0}
2025-11-08T21:06:17+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.138,"body_size":928,"content_type":"application/json"}
2025-11-08T21:06:45+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.402,"body_size":512,"content_type":"application/json"}
2025-11-08T21:06:45+00:00 DEBUG Версия MySQL проверена {"version":"10.11.13-MariaDB-0ubuntu0.24.04.1","major":10,"minor":11,"patch":13}
2025-11-08T21:06:45+00:00 DEBUG Успешное подключение к БД {"host":"localhost","database":"rss2tlg","persistent":false,"charset":"utf8mb4"}
2025-11-08T21:06:45+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.138,"body_size":490,"content_type":"application/json"}
2025-11-08T21:06:45+00:00 DEBUG Выполнена SQL команда {"query":"DELETE FROM rss2tlg_publication_rules","affected_rows":4}
2025-11-08T21:06:45+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:06:45+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:06:45+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:06:45+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publication_rules ( feed_id, destination_type, destination_id, enabled, categories, min_importance, languages, include_image, include_link, priority ) VALUES ( :feed_id, :destinati...","affected_rows":1}
2025-11-08T21:06:45+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.137,"body_size":396,"content_type":"application/json"}
2025-11-08T21:06:45+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.141,"body_size":564,"content_type":"application/json"}
2025-11-08T21:06:45+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT id, feed_id FROM rss2tlg_items LIMIT :limit","rows":3}
2025-11-08T21:06:45+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.148,"body_size":353,"content_type":"application/json"}
2025-11-08T21:06:45+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:45+00:00 INFO [Summarization] Новость уже обработана {"item_id":3}
2025-11-08T21:06:45+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:45+00:00 INFO [Summarization] Новость уже обработана {"item_id":1}
2025-11-08T21:06:45+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_summarization WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:45+00:00 INFO [Summarization] Новость уже обработана {"item_id":2}
2025-11-08T21:06:45+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.161,"body_size":340,"content_type":"application/json"}
2025-11-08T21:06:45+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:45+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":3}
2025-11-08T21:06:45+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:45+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":1}
2025-11-08T21:06:45+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:45+00:00 INFO [DeduplicationService] Новость уже проверена на дубликаты {"item_id":2}
2025-11-08T21:06:45+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.175,"body_size":384,"content_type":"application/json"}
2025-11-08T21:06:45+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:06:45+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:45+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_translation WHERE item_id = :item_id AND target_language = :target_language LIMIT 1","found":true}
2025-11-08T21:06:45+00:00 DEBUG [TranslationService] Перевод уже существует {"item_id":3,"language":"ru"}
2025-11-08T21:06:45+00:00 INFO [TranslationService] Новость успешно переведена на все языки {"item_id":3,"languages":["ru"],"processing_time_ms":6}
2025-11-08T21:06:46+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:06:46+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:46+00:00 INFO [TranslationService] Новость не прошла дедупликацию, пропускаем перевод {"item_id":1}
2025-11-08T21:06:46+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT feed_id, article_language, headline, summary, status FROM rss2tlg_summarization WHERE item_id = :item_id AND status = 'success' LIMIT 1","found":true}
2025-11-08T21:06:46+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:46+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_translation WHERE item_id = :item_id AND target_language = :target_language LIMIT 1","found":true}
2025-11-08T21:06:46+00:00 DEBUG [TranslationService] Перевод уже существует {"item_id":2,"language":"ru"}
2025-11-08T21:06:46+00:00 INFO [TranslationService] Новость успешно переведена на все языки {"item_id":2,"languages":["ru"],"processing_time_ms":3}
2025-11-08T21:06:46+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.149,"body_size":322,"content_type":"application/json"}
2025-11-08T21:06:46+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:46+00:00 INFO [IllustrationService] Иллюстрация уже сгенерирована {"item_id":3}
2025-11-08T21:06:46+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:46+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT i.id, i.feed_id, i.title, i.link, s.headline, s.summary, s.category_primary, s.importance_rating, s.article_language FROM rss2tlg_items i INNER JOIN rss2tlg_summarization s ON i.id = s.item_id ...","found":true}
2025-11-08T21:06:46+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT can_be_published FROM rss2tlg_deduplication WHERE item_id = :item_id AND status = 'checked' LIMIT 1","found":true}
2025-11-08T21:06:46+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_illustration (item_id, feed_id, status, created_at, updated_at) VALUES (:item_id, :feed_id, :status, NOW(), NOW()) ON DUPLICATE KEY UPDATE status = :status_update, error_message = ...","affected_rows":2}
2025-11-08T21:06:46+00:00 INFO [IllustrationService] Новость пропущена (дубликат или запрещена к публикации) {"item_id":1}
2025-11-08T21:06:46+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT status FROM rss2tlg_illustration WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:46+00:00 INFO [IllustrationService] Иллюстрация уже сгенерирована {"item_id":2}
2025-11-08T21:06:46+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.148,"body_size":371,"content_type":"application/json"}
2025-11-08T21:06:46+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.169,"body_size":535,"content_type":"application/json"}
2025-11-08T21:06:46+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:46+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT * FROM rss2tlg_publication_rules WHERE feed_id = :feed_id AND enabled = 1 ORDER BY priority DESC","rows":2}
2025-11-08T21:06:47+00:00 INFO HTTP запрос выполнен [POST sendPhoto] код 200 {"method":"POST","uri":"sendPhoto","status_code":200,"duration":0.566,"body_size":3802,"content_type":"application/json"}
2025-11-08T21:06:47+00:00 WARNING [PublicationService] Ошибка публикации в destination {"item_id":3,"destination":"channel:@kompasDaily","retry":1,"error":"Не получен message_id от Telegram API"}
2025-11-08T21:06:47+00:00 INFO HTTP запрос выполнен [POST sendPhoto] код 200 {"method":"POST","uri":"sendPhoto","status_code":200,"duration":0.271,"body_size":3802,"content_type":"application/json"}
2025-11-08T21:06:47+00:00 WARNING [PublicationService] Ошибка публикации в destination {"item_id":3,"destination":"channel:@kompasDaily","retry":2,"error":"Не получен message_id от Telegram API"}
2025-11-08T21:06:48+00:00 INFO HTTP запрос выполнен [POST sendPhoto] код 200 {"method":"POST","uri":"sendPhoto","status_code":200,"duration":0.26,"body_size":3802,"content_type":"application/json"}
2025-11-08T21:06:48+00:00 WARNING [PublicationService] Ошибка публикации в destination {"item_id":3,"destination":"channel:@kompasDaily","retry":3,"error":"Не получен message_id от Telegram API"}
2025-11-08T21:06:48+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publications ( item_id, feed_id, destination_type, destination_id, message_id, publication_status, retry_count, error_message, published_at ) VALUES ( :item_id, :feed_id, :destinat...","affected_rows":1}
2025-11-08T21:06:48+00:00 INFO HTTP запрос выполнен [POST sendPhoto] код 200 {"method":"POST","uri":"sendPhoto","status_code":200,"duration":0.248,"body_size":3652,"content_type":"application/json"}
2025-11-08T21:06:48+00:00 WARNING [PublicationService] Ошибка публикации в destination {"item_id":3,"destination":"bot:366442475","retry":1,"error":"Не получен message_id от Telegram API"}
2025-11-08T21:06:48+00:00 INFO HTTP запрос выполнен [POST sendPhoto] код 200 {"method":"POST","uri":"sendPhoto","status_code":200,"duration":0.181,"body_size":3652,"content_type":"application/json"}
2025-11-08T21:06:48+00:00 WARNING [PublicationService] Ошибка публикации в destination {"item_id":3,"destination":"bot:366442475","retry":2,"error":"Не получен message_id от Telegram API"}
2025-11-08T21:06:49+00:00 INFO HTTP запрос выполнен [POST sendPhoto] код 200 {"method":"POST","uri":"sendPhoto","status_code":200,"duration":0.187,"body_size":3652,"content_type":"application/json"}
2025-11-08T21:06:49+00:00 WARNING [PublicationService] Ошибка публикации в destination {"item_id":3,"destination":"bot:366442475","retry":3,"error":"Не получен message_id от Telegram API"}
2025-11-08T21:06:49+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publications ( item_id, feed_id, destination_type, destination_id, message_id, publication_status, retry_count, error_message, published_at ) VALUES ( :item_id, :feed_id, :destinat...","affected_rows":1}
2025-11-08T21:06:49+00:00 WARNING [PublicationService] Новость не соответствует ни одному правилу {"item_id":3}
2025-11-08T21:06:49+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":false}
2025-11-08T21:06:49+00:00 WARNING [PublicationService] Новость не готова к публикации {"item_id":1}
2025-11-08T21:06:50+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_ready_to_publish WHERE item_id = :item_id LIMIT 1","found":true}
2025-11-08T21:06:50+00:00 DEBUG Выполнен SELECT запрос {"query":"SELECT * FROM rss2tlg_publication_rules WHERE feed_id = :feed_id AND enabled = 1 ORDER BY priority DESC","rows":1}
2025-11-08T21:06:50+00:00 INFO HTTP запрос выполнен [POST sendPhoto] код 200 {"method":"POST","uri":"sendPhoto","status_code":200,"duration":0.285,"body_size":3233,"content_type":"application/json"}
2025-11-08T21:06:50+00:00 WARNING [PublicationService] Ошибка публикации в destination {"item_id":2,"destination":"bot:366442475","retry":1,"error":"Не получен message_id от Telegram API"}
2025-11-08T21:06:51+00:00 INFO HTTP запрос выполнен [POST sendPhoto] код 200 {"method":"POST","uri":"sendPhoto","status_code":200,"duration":0.237,"body_size":3233,"content_type":"application/json"}
2025-11-08T21:06:51+00:00 WARNING [PublicationService] Ошибка публикации в destination {"item_id":2,"destination":"bot:366442475","retry":2,"error":"Не получен message_id от Telegram API"}
2025-11-08T21:06:51+00:00 INFO HTTP запрос выполнен [POST sendPhoto] код 200 {"method":"POST","uri":"sendPhoto","status_code":200,"duration":0.293,"body_size":3233,"content_type":"application/json"}
2025-11-08T21:06:51+00:00 WARNING [PublicationService] Ошибка публикации в destination {"item_id":2,"destination":"bot:366442475","retry":3,"error":"Не получен message_id от Telegram API"}
2025-11-08T21:06:51+00:00 DEBUG Выполнена SQL команда {"query":"INSERT INTO rss2tlg_publications ( item_id, feed_id, destination_type, destination_id, message_id, publication_status, retry_count, error_message, published_at ) VALUES ( :item_id, :feed_id, :destinat...","affected_rows":1}
2025-11-08T21:06:51+00:00 WARNING [PublicationService] Новость не соответствует ни одному правилу {"item_id":2}
2025-11-08T21:06:52+00:00 INFO HTTP запрос выполнен [POST sendMessage] код 200 {"method":"POST","uri":"sendMessage","status_code":200,"duration":0.165,"body_size":473,"content_type":"application/json"}
2025-11-08T21:06:52+00:00 DEBUG Выполнен SELECT запрос (одна строка) {"query":"SELECT * FROM v_rss2tlg_publication_stats LIMIT 1","found":true}
