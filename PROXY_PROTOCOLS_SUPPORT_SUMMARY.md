# –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –ø—Ä–æ–∫—Å–∏ - –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

## ‚úÖ –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏

–ó–∞–¥–∞—á–∞ **–í–´–ü–û–õ–ù–ï–ù–ê**: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `ProxyPool.class.php` **–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç** –≤—Å–µ —Ç—Ä–µ–±—É–µ–º—ã–µ —Ç–∏–ø—ã –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–æ–≤.

## üéØ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã

| –ü—Ä–æ—Ç–æ–∫–æ–ª | –°—Ç–∞—Ç—É—Å | –í–∞–ª–∏–¥–∞—Ü–∏—è | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –¢–µ—Å—Ç—ã | –ü—Ä–∏–º–µ—Ä—ã |
|----------|--------|-----------|--------------|-------|---------|
| **HTTP**   | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ |
| **HTTPS**  | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ |
| **SOCKS4** | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ |
| **SOCKS5** | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ |

## üìã –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

**–§–∞–π–ª:** `src/ProxyPool.class.php`  
**–°—Ç—Ä–æ–∫–∞:** 790

```php
if (!preg_match('#^(https?|socks4|socks5)://.*#i', $proxy)) {
    throw new ProxyPoolValidationException(
        sprintf('–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ–∫—Å–∏ URL: %s. –û–∂–∏–¥–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç: protocol://host:port', $proxy)
    );
}
```

‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç: `http`, `https`, `socks4`, `socks5`

### 2. –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

**–§–∞–π–ª:** `tests/Unit/ProxyPoolTest.php`  
**–ú–µ—Ç–æ–¥:** `testSupportsVariousProxyFormats()` (—Å—Ç—Ä–æ–∫–∞ 479)

```php
// HTTP –ø—Ä–æ–∫—Å–∏
$proxyPool->addProxy('http://proxy.example.com:8080');

// HTTPS –ø—Ä–æ–∫—Å–∏
$proxyPool->addProxy('https://proxy.example.com:8443');

// SOCKS4 –ø—Ä–æ–∫—Å–∏
$proxyPool->addProxy('socks4://proxy.example.com:1080');

// SOCKS5 –ø—Ä–æ–∫—Å–∏
$proxyPool->addProxy('socks5://proxy.example.com:1080');

// –ü—Ä–æ–∫—Å–∏ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
$proxyPool->addProxy('http://user:pass@proxy.example.com:8080');
```

‚úÖ –í—Å–µ —Ç–∏–ø—ã –ø—Ä–æ–∫—Å–∏ —É—Å–ø–µ—à–Ω–æ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è

### 3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **`PROXYPOOL_README.md`**
   - –†–∞–∑–¥–µ–ª "–§–æ—Ä–º–∞—Ç—ã –ø—Ä–æ–∫—Å–∏ URL" (—Å—Ç—Ä–æ–∫–∏ 91-101)
   - –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤–∫–ª—é—á–∞—é—Ç –≤—Å–µ 4 —Ç–∏–ø–∞
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

2. **`README.md`**
   - –†–∞–∑–¥–µ–ª "ProxyPool" –æ–±–Ω–æ–≤–ª–µ–Ω —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –æ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –≤—Å–µ—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
   - –ü—Ä–∏–º–µ—Ä—ã –≤–∫–ª—é—á–∞—é—Ç HTTP, HTTPS, SOCKS4, SOCKS5

3. **`docs/PROXY_PROTOCOLS_SUPPORT.md`** ‚≠ê –ù–û–í–´–ô
   - –ü–æ–ª–Ω–∞—è –¥–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

**–§–∞–π–ª:** `config/proxypool.json`

```json
{
    "proxies": [
        "http://proxy1.example.com:8080",
        "http://user:pass@proxy2.example.com:3128",
        "https://secure-proxy.example.com:8443",
        "socks4://socks4-proxy.example.com:1080",
        "socks5://proxy3.example.com:1080",
        "socks5://admin:secret@socks5-auth.example.com:1080"
    ],
    ...
}
```

‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö 4 —Ç–∏–ø–æ–≤

### 5. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä:

**–§–∞–π–ª:** `examples/proxypool_example.php`  
–°–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä—ã —Å HTTP –∏ SOCKS5 –ø—Ä–æ–∫—Å–∏

#### –ù–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä:

**–§–∞–π–ª:** `examples/proxypool_protocols_example.php` ‚≠ê –ù–û–í–´–ô

–î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–æ–∫—Å–∏
- –ü—Ä–æ–∫—Å–∏ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø—É–ª–∞ —Å–æ –≤—Å–µ–º–∏ —Ç–∏–ø–∞–º–∏
- –†–æ—Ç–∞—Ü–∏—é —á–µ—Ä–µ–∑ —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –ø—Ä–æ–∫—Å–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö/–Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ç–∏–ø–∞–º –ø—Ä–æ–∫—Å–∏

–ó–∞–ø—É—Å–∫:
```bash
php examples/proxypool_protocols_example.php
```

## üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤

```php
/**
 * –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç URL –ø—Ä–æ–∫—Å–∏
 * 
 * @param string $proxy URL –ø—Ä–æ–∫—Å–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
 * @throws ProxyPoolValidationException –ï—Å–ª–∏ URL –ø—Ä–æ–∫—Å–∏ –Ω–µ–≤–∞–ª–∏–¥–µ–Ω
 */
private function validateProxyUrl(string $proxy): void
{
    // –ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –ø—Ä–æ–∫—Å–∏
    if (!preg_match('#^(https?|socks4|socks5)://.*#i', $proxy)) {
        throw new ProxyPoolValidationException(
            sprintf('–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ–∫—Å–∏ URL: %s. –û–∂–∏–¥–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç: protocol://host:port', $proxy)
        );
    }
}
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

1. **–ë–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
   ```
   protocol://host:port
   ```

2. **–° –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π:**
   ```
   protocol://username:password@host:port
   ```

3. **–ü—Ä–∏–º–µ—Ä—ã:**
   ```
   http://proxy.example.com:8080
   https://secure-proxy.example.com:8443
   socks4://socks4-proxy.example.com:1080
   socks5://user:pass@socks5-proxy.example.com:1080
   ```

## üìä –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º —Å—Ç–∏–ª—è –∫–æ–¥–∞

### ‚úÖ –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
```php
declare(strict_types=1);
```

### ‚úÖ PHPDoc –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º
```php
/**
 * –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç URL –ø—Ä–æ–∫—Å–∏
 * 
 * @param string $proxy URL –ø—Ä–æ–∫—Å–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
 * @throws ProxyPoolValidationException –ï—Å–ª–∏ URL –ø—Ä–æ–∫—Å–∏ –Ω–µ–≤–∞–ª–∏–¥–µ–Ω
 */
```

### ‚úÖ –û–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞
- `validateProxyUrl()` - –ø–æ–Ω—è—Ç–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞
- `ProxyPoolValidationException` - —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ

### ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
```php
if (!preg_match('#^(https?|socks4|socks5)://.*#i', $proxy)) {
    throw new ProxyPoolValidationException(...);
}
```

### ‚úÖ –ù–∞–¥–µ–∂–Ω—ã–π –∫–æ–¥
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏
- –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ—à–∏–±–æ–∫
- –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
1. ‚ú® `docs/PROXY_PROTOCOLS_SUPPORT.md` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
2. ‚ú® `examples/proxypool_protocols_example.php` - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä
3. ‚ú® `PROXY_PROTOCOLS_SUPPORT_SUMMARY.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª (—Ä–µ–∑—é–º–µ)

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. üìù `config/proxypool.json` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã HTTPS –∏ SOCKS4
2. üìù `PROXYPOOL_README.md` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã
3. üìù `README.md` - –¥–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –≤—Å–µ—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤

## üéì –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:

```php
use App\Component\ProxyPool;

$proxyPool = new ProxyPool([
    'proxies' => [
        'http://proxy.example.com:8080',      // HTTP
        'https://proxy.example.com:8443',     // HTTPS
        'socks4://proxy.example.com:1080',    // SOCKS4
        'socks5://proxy.example.com:1080',    // SOCKS5
    ],
]);

// –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã
$response = $proxyPool->get('https://api.example.com/data');
```

### –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

- üìñ [PROXYPOOL_README.md](PROXYPOOL_README.md) - –æ—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üìñ [docs/PROXY_PROTOCOLS_SUPPORT.md](docs/PROXY_PROTOCOLS_SUPPORT.md) - –¥–µ—Ç–∞–ª–∏ –æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞—Ö
- üíª [examples/proxypool_example.php](examples/proxypool_example.php) - –æ–±—â–∏–µ –ø—Ä–∏–º–µ—Ä—ã
- üíª [examples/proxypool_protocols_example.php](examples/proxypool_protocols_example.php) - –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤

## ‚úÖ –í—ã–≤–æ–¥

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ ProxyPool –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ç—Ä–µ–±—É–µ–º—ã–µ —Ç–∏–ø—ã –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–æ–≤:**

- ‚úÖ HTTP
- ‚úÖ HTTPS
- ‚úÖ SOCKS4
- ‚úÖ SOCKS5

–° –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π, —Ç–µ—Å—Ç–∞–º–∏ –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** $(date)  
**–í–µ—Ä—Å–∏—è PHP:** 8.1+  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ
