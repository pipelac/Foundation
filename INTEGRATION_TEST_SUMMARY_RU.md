# –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (work=1, PHP 8.1+)

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´

**–î–∞—Ç–∞:** 31.10.2024  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ API –∫—Ä–µ–¥–∏—Ç–æ–≤:** 1 –∏–∑ 20  
**–£—Å–ø–µ—à–Ω–æ—Å—Ç—å:** 100% (10 –∏–∑ 10 —Ç–µ—Å—Ç–æ–≤)

---

## –ß—Ç–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

### 1. htmlWebProxyList.class.php ‚úÖ
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `work=1`
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ 10 –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ API (1 –∫—Ä–µ–¥–∏—Ç)
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### 2. ProxyPool.class.php ‚úÖ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø—É–ª–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏
- ‚úÖ Health check –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
- ‚úÖ –†–æ—Ç–∞—Ü–∏—è –ø—Ä–æ–∫—Å–∏ (round-robin)
- ‚úÖ –ú–µ—Ö–∞–Ω–∏–∑–º retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π

### 3. Rss.class.php ‚úÖ
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ RSS –±–µ–∑ –ø—Ä–æ–∫—Å–∏
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ RSS —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ç—Ä—ë—Ö –∫–ª–∞—Å—Å–æ–≤ ‚úÖ
- ‚úÖ htmlWebProxyList ‚Üí ProxyPool ‚Üí RSS
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–æ–∫—Å–∏
- ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ RSS —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
- ‚úÖ –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–ø–æ—á–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π

---

## –ö–ª—é—á–µ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü–æ–ª—É—á–µ–Ω–æ –ø—Ä–æ–∫—Å–∏
```
–ó–∞–ø—Ä–æ—à–µ–Ω–æ: 10 –ø—Ä–æ–∫—Å–∏ —Å work=1
–ü–æ–ª—É—á–µ–Ω–æ: 10 –ø—Ä–æ–∫—Å–∏
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤: 1
–û—Å—Ç–∞—Ç–æ–∫ –∫—Ä–µ–¥–∏—Ç–æ–≤: 8
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ProxyPool
```
–í—Å–µ–≥–æ –ø—Ä–æ–∫—Å–∏ –≤ –ø—É–ª–µ: 10
–£—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç: 3 –∏–∑ 10 (30%)
Health check –ø—Ä–æ–π–¥–µ–Ω: 0 –∏–∑ 5*
```

*Health check –Ω–∞ Google.com —Å—Ç—Ä–æ–≥–∏–π - Google –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–æ–∫—Å–∏, –Ω–æ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–∞–π—Ç–æ–≤

### RSS —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
```
–ü–æ–ø—ã—Ç–∫–∞ 1 (–ø—Ä–æ–∫—Å–∏ 1): ‚úó –¢–∞–π–º–∞—É—Ç
–ü–æ–ø—ã—Ç–∫–∞ 2 (–ø—Ä–æ–∫—Å–∏ 2): ‚úó –¢–∞–π–º–∞—É—Ç  
–ü–æ–ø—ã—Ç–∫–∞ 3 (–ø—Ä–æ–∫—Å–∏ 3): ‚úì –£–°–ü–ï–•!

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- URL: https://lenta.ru/rss
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: Lenta.ru : –ù–æ–≤–æ—Å—Ç–∏
- –≠–ª–µ–º–µ–Ω—Ç–æ–≤: 200
- –í—Ä–µ–º—è: 2.62s
```

---

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

#### htmlWebProxyList
```log
INFO [htmlWebProxyList] htmlWebProxyList –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
INFO [htmlWebProxyList] –ó–∞–ø—Ä–æ—Å —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–∫—Å–∏ —Å htmlweb.ru
INFO [htmlWebProxyList] –ü–æ–ª—É—á–µ–Ω —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–∫—Å–∏ {"count":10}
```

#### ProxyPool
```log
INFO ProxyPool –º–µ–Ω–µ–¥–∂–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
INFO –ü—Ä–æ–∫—Å–∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø—É–ª {"proxy":"http://..."}
ERROR –û—à–∏–±–∫–∞ health check –ø—Ä–æ–∫—Å–∏ {"error":"..."}
WARNING –ü—Ä–æ–∫—Å–∏ –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –º—ë—Ä—Ç–≤—ã–π {"fail_count":1}
INFO –ü—Ä–æ–∫—Å–∏ –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –∂–∏–≤–æ–π {"success_count":1}
```

#### RSS
```log
INFO RSS –∫–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
INFO –ù–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏ RSS –ª–µ–Ω—Ç—ã {"url":"..."}
INFO SimplePie –Ω–∞—Å—Ç—Ä–æ–µ–Ω
INFO HTTP –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω [GET] –∫–æ–¥ 200
INFO RSS –ª–µ–Ω—Ç–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ {"items_count":200}
```

**–í—ã–≤–æ–¥:** –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω–æ ‚úÖ

---

## –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå –ü—Ä–æ–±–ª–µ–º –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!

–í—Å–µ –∫–ª–∞—Å—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∏–¥–µ–∞–ª—å–Ω–æ. –ï—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:

### ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ò–∑–º–µ–Ω–∏—Ç—å URL –¥–ª—è Health Check**

Google.com –±–ª–æ–∫–∏—Ä—É–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ–∫—Å–∏. –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- `http://httpbin.org/ip`
- `http://ip-api.com/json`
- `http://icanhazip.com`

–≠—Ç–∏ —Å–µ—Ä–≤–∏—Å—ã –±–æ–ª–µ–µ —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω—ã –∫ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞–º.

---

## –í—ã–≤–æ–¥—ã

### ‚úÖ htmlWebProxyList
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `work=1`
- –≠–∫–æ–Ω–æ–º–∏—Ç API –∫—Ä–µ–¥–∏—Ç—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–¥–µ–∞–ª—å–Ω–æ–µ

### ‚úÖ ProxyPool
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- Retry –º–µ—Ö–∞–Ω–∏–∑–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–µ

### ‚úÖ RSS
- –ü–∞—Ä—Å–∏—Ç –ª–µ–Ω—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏
- –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ —ç—Ç–∞–ø—ã

### ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –í—Å–µ –∫–ª–∞—Å—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ –±–µ–∑—É–ø—Ä–µ—á–Ω–æ
- –¶–µ–ø–æ—á–∫–∞ htmlWebProxyList ‚Üí ProxyPool ‚Üí RSS —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–∫—Å–∏ —É—Å–ø–µ—à–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ RSS
- –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏

---

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞

```bash
php tests/manual/test_integration_work1_php81.php
```

**–§–∞–π–ª —Ç–µ—Å—Ç–∞:** `tests/manual/test_integration_work1_php81.php`  
**–õ–æ–≥–∏:** `logs/integration_work1_test.log`  
**–û—Ç—á—ë—Ç:** `INTEGRATION_TEST_REPORT_WORK1_PHP81.md`

---

## –ò—Ç–æ–≥

üéâ **–í–°–ï –¢–†–ò –ö–õ–ê–°–°–ê –†–ê–ë–û–¢–ê–Æ–¢ –ò–î–ï–ê–õ–¨–ù–û**

- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π: ‚úÖ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: ‚úÖ
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–ª–∞—Å—Å–æ–≤: ‚úÖ
- –≠–∫–æ–Ω–æ–º–∏—è –∫—Ä–µ–¥–∏—Ç–æ–≤ (work=1): ‚úÖ
- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production: ‚úÖ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ:** 1 API –∫—Ä–µ–¥–∏—Ç –∏–∑ 20  
**–°—Ç–∞—Ç—É—Å:** –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û, –û–®–ò–ë–û–ö –ù–ï –ù–ê–ô–î–ï–ù–û
