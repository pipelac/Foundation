<?php

declare(strict_types=1);

require_once __DIR__ . '/autoload.php';

use App\Component\Logger;
use App\Component\Telegram;
use App\Component\Exception\TelegramApiException;

/**
 * –î–µ—Ç–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç –æ–ø—Ä–æ—Å–æ–≤ –∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π
 * –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—Å–µ —Ç–∏–ø—ã –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ polls
 */

echo "\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n";
echo "‚ïë         –î–ï–¢–ê–õ–¨–ù–´–ô –¢–ï–°–¢ –û–ü–†–û–°–û–í –ò –ì–û–õ–û–°–û–í–ê–ù–ò–ô                   ‚ïë\n";
echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\n";

try {
    $loggerConfig = [
        'directory' => __DIR__ . '/logs',
        'file_name' => 'telegram_polls_detailed.log',
        'max_files' => 3,
        'max_file_size' => 5,
        'enabled' => true,
    ];

    $logger = new Logger($loggerConfig);

    $telegramConfig = [
        'token' => '8327641497:AAFTHb3xSTpP3Q6Peg8-OK4nTWTfF7iMWfI',
        'default_chat_id' => '366442475',
        'timeout' => 30,
        'retries' => 3,
    ];

    $telegram = new Telegram($telegramConfig, $logger);

    echo "‚úì Telegram –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω\n\n";

    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
    echo "  1. –û–ë–´–ß–ù–´–ô –ü–£–ë–õ–ò–ß–ù–´–ô –û–ü–†–û–°\n";
    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";

    $result = $telegram->sendPoll(
        null,
        '–ö–∞–∫–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –¥–ª—è PHP?',
        ['Laravel', 'Symfony', 'Yii2', 'CodeIgniter', 'Pure PHP']
    );

    $pollId1 = $result['result']['message_id'] ?? null;
    $poll = $result['result']['poll'] ?? [];
    
    echo "‚úì –ü—É–±–ª–∏—á–Ω—ã–π –æ–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω\n";
    echo "  ‚Ä¢ ID: {$poll['id']}\n";
    echo "  ‚Ä¢ –ê–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å: " . ($poll['is_anonymous'] ? '–î–ê' : '–ù–ï–¢') . "\n";
    echo "  ‚Ä¢ –¢–∏–ø: {$poll['type']}\n";
    echo "  ‚Ä¢ –í–∞—Ä–∏–∞–Ω—Ç–æ–≤: " . count($poll['options']) . "\n\n";
    sleep(1);

    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
    echo "  2. –ê–ù–û–ù–ò–ú–ù–´–ô –û–ü–†–û–° –° –ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–´–ú –í–´–ë–û–†–û–ú\n";
    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";

    $result = $telegram->sendPoll(
        null,
        '–ö–∞–∫–∏–µ —è–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã –∑–Ω–∞–µ—Ç–µ? (–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)',
        ['PHP', 'JavaScript', 'Python', 'Java', 'C++', 'Go', 'Rust', 'Ruby'],
        [
            'is_anonymous' => true,
            'allows_multiple_answers' => true,
        ]
    );

    $pollId2 = $result['result']['message_id'] ?? null;
    $poll = $result['result']['poll'] ?? [];
    
    echo "‚úì –û–ø—Ä–æ—Å —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≤—ã–±–æ—Ä–æ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω\n";
    echo "  ‚Ä¢ –ê–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å: " . ($poll['is_anonymous'] ? '–î–ê' : '–ù–ï–¢') . "\n";
    echo "  ‚Ä¢ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä: " . ($poll['allows_multiple_answers'] ? '–î–ê' : '–ù–ï–¢') . "\n";
    echo "  ‚Ä¢ –í–∞—Ä–∏–∞–Ω—Ç–æ–≤: " . count($poll['options']) . "\n\n";
    sleep(1);

    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
    echo "  3. –í–ò–ö–¢–û–†–ò–ù–ê –° –ü–†–ê–í–ò–õ–¨–ù–´–ú –û–¢–í–ï–¢–û–ú\n";
    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";

    $result = $telegram->sendPoll(
        null,
        '–ö–∞–∫–æ–π –≥–æ–¥ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≥–æ–¥–æ–º –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏—è PHP?',
        ['1993', '1994', '1995', '1996'],
        [
            'type' => 'quiz',
            'correct_option_id' => 2,
            'explanation' => 'PHP –±—ã–ª —Å–æ–∑–¥–∞–Ω –†–∞—Å–º—É—Å–æ–º –õ–µ—Ä–¥–æ—Ä—Ñ–æ–º –≤ 1994 –≥–æ–¥—É, –Ω–æ –ø—É–±–ª–∏—á–Ω—ã–π —Ä–µ–ª–∏–∑ —Å–æ—Å—Ç–æ—è–ª—Å—è –≤ 1995 –≥–æ–¥—É',
        ]
    );

    $quizId1 = $result['result']['message_id'] ?? null;
    $poll = $result['result']['poll'] ?? [];
    
    echo "‚úì –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞\n";
    echo "  ‚Ä¢ –¢–∏–ø: {$poll['type']}\n";
    echo "  ‚Ä¢ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: #" . ($poll['correct_option_id'] ?? 'N/A') . "\n";
    echo "  ‚Ä¢ –ü–æ—è—Å–Ω–µ–Ω–∏–µ: –µ—Å—Ç—å\n\n";
    sleep(1);

    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
    echo "  4. –í–ò–ö–¢–û–†–ò–ù–ê –° HTML –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–ï–ú –í –ü–û–Ø–°–ù–ï–ù–ò–ò\n";
    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";

    $result = $telegram->sendPoll(
        null,
        '–°–∫–æ–ª—å–∫–æ –±–∏—Ç–æ–≤ –≤ –æ–¥–Ω–æ–º –±–∞–π—Ç–µ?',
        ['4 –±–∏—Ç–∞', '6 –±–∏—Ç–æ–≤', '8 –±–∏—Ç–æ–≤', '10 –±–∏—Ç–æ–≤'],
        [
            'type' => 'quiz',
            'correct_option_id' => 2,
            'explanation' => '<b>1 –±–∞–π—Ç = 8 –±–∏—Ç–æ–≤</b>\n\n–≠—Ç–æ <i>—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è</i> –µ–¥–∏–Ω–∏—Ü–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–µ.',
            'explanation_parse_mode' => Telegram::PARSE_MODE_HTML,
        ]
    );

    echo "‚úì –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ —Å HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞\n";
    echo "  ‚Ä¢ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: HTML\n\n";
    sleep(1);

    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
    echo "  5. –û–ü–†–û–° –° –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ú –ó–ê–ö–†–´–¢–ò–ï–ú (60 —Å–µ–∫—É–Ω–¥)\n";
    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";

    $result = $telegram->sendPoll(
        null,
        '–≠–∫—Å–ø—Ä–µ—Å—Å-–æ–ø—Ä–æ—Å: —á—Ç–æ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ?',
        ['–ö–æ—Ñ–µ', '–ß–∞–π'],
        [
            'open_period' => 60,
        ]
    );

    $timedPollId = $result['result']['message_id'] ?? null;
    
    echo "‚úì –û–ø—Ä–æ—Å —Å —Ç–∞–π–º–µ—Ä–æ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω\n";
    echo "  ‚Ä¢ –í—Ä–µ–º—è –∂–∏–∑–Ω–∏: 60 —Å–µ–∫—É–Ω–¥\n";
    echo "  ‚Ä¢ –ó–∞–∫—Ä–æ–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏\n\n";
    sleep(1);

    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
    echo "  6. –û–ü–†–û–° –° –ö–û–ù–ö–†–ï–¢–ù–û–ô –î–ê–¢–û–ô –ó–ê–ö–†–´–¢–ò–Ø\n";
    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";

    $closeDate = time() + 120;
    
    $result = $telegram->sendPoll(
        null,
        '–û–ø—Ä–æ—Å —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–∞—Ç–æ–π –∑–∞–∫—Ä—ã—Ç–∏—è',
        ['–í–∞—Ä–∏–∞–Ω—Ç –ê', '–í–∞—Ä–∏–∞–Ω—Ç –ë', '–í–∞—Ä–∏–∞–Ω—Ç –í'],
        [
            'close_date' => $closeDate,
        ]
    );

    echo "‚úì –û–ø—Ä–æ—Å —Å –¥–∞—Ç–æ–π –∑–∞–∫—Ä—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω\n";
    echo "  ‚Ä¢ –ó–∞–∫—Ä–æ–µ—Ç—Å—è: " . date('H:i:s', $closeDate) . "\n";
    echo "  ‚Ä¢ –ß–µ—Ä–µ–∑: 120 —Å–µ–∫—É–Ω–¥\n\n";
    sleep(1);

    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
    echo "  7. –ó–ê–ö–†–´–¢–´–ô –û–ü–†–û–° (–ò–ó–ù–ê–ß–ê–õ–¨–ù–û)\n";
    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";

    $result = $telegram->sendPoll(
        null,
        '–≠—Ç–æ—Ç –æ–ø—Ä–æ—Å —É–∂–µ –∑–∞–∫—Ä—ã—Ç',
        ['–í–∞—Ä–∏–∞–Ω—Ç 1', '–í–∞—Ä–∏–∞–Ω—Ç 2'],
        [
            'is_closed' => true,
        ]
    );

    echo "‚úì –ó–∞–∫—Ä—ã—Ç—ã–π –æ–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω\n";
    echo "  ‚Ä¢ –°—Ç–∞—Ç—É—Å: –∑–∞–∫—Ä—ã—Ç –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ\n\n";
    sleep(1);

    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
    echo "  8. –û–ü–†–û–° –° INLINE –ö–õ–ê–í–ò–ê–¢–£–†–û–ô\n";
    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";

    $keyboard = $telegram->buildInlineKeyboard([
        [
            ['text' => 'üìä –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± –æ–ø—Ä–æ—Å–µ', 'callback_data' => 'poll_details'],
        ],
        [
            ['text' => 'üîó –ü–æ–¥–µ–ª–∏—Ç—å—Å—è', 'switch_inline_query' => '–ü—Ä–æ–≥–æ–ª–æ—Å—É–π—Ç–µ –≤ –æ–ø—Ä–æ—Å–µ!'],
        ],
    ]);

    $result = $telegram->sendPoll(
        null,
        '–û–ø—Ä–æ—Å —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏',
        ['–û—Ç–ª–∏—á–Ω–æ', '–•–æ—Ä–æ—à–æ', '–ù–æ—Ä–º–∞–ª—å–Ω–æ', '–ü–ª–æ—Ö–æ'],
        [
            'reply_markup' => $keyboard,
        ]
    );

    echo "‚úì –û–ø—Ä–æ—Å —Å inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω\n";
    echo "  ‚Ä¢ –ö–Ω–æ–ø–æ–∫: 2\n\n";
    sleep(1);

    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
    echo "  9. –ù–ï–ê–ù–û–ù–ò–ú–ù–ê–Ø –í–ò–ö–¢–û–†–ò–ù–ê\n";
    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";

    $result = $telegram->sendPoll(
        null,
        '–ü—É–±–ª–∏—á–Ω–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞: —Å—Ç–æ–ª–∏—Ü–∞ –†–æ—Å—Å–∏–∏?',
        ['–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', '–ú–æ—Å–∫–≤–∞', '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥', '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫'],
        [
            'type' => 'quiz',
            'is_anonymous' => false,
            'correct_option_id' => 1,
            'explanation' => '–ú–æ—Å–∫–≤–∞ - —Å—Ç–æ–ª–∏—Ü–∞ –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏',
        ]
    );

    echo "‚úì –ù–µ–∞–Ω–æ–Ω–∏–º–Ω–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞\n";
    echo "  ‚Ä¢ –ë—É–¥—É—Ç –≤–∏–¥–Ω—ã –æ—Ç–≤–µ—Ç—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤\n\n";
    sleep(1);

    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
    echo "  10. –ü–†–û–í–ï–†–ö–ê –§–£–ù–ö–¶–ò–ò –û–°–¢–ê–ù–û–í–ö–ò –û–ü–†–û–°–ê\n";
    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";

    if ($pollId1) {
        echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ 3 —Å–µ–∫—É–Ω–¥—ã –ø–µ—Ä–µ–¥ –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π...\n";
        sleep(3);

        $result = $telegram->stopPoll(null, $pollId1);
        $stoppedPoll = $result['result'] ?? [];
        
        echo "‚úì –û–ø—Ä–æ—Å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω\n";
        echo "  ‚Ä¢ ID –æ–ø—Ä–æ—Å–∞: {$stoppedPoll['id']}\n";
        echo "  ‚Ä¢ –°—Ç–∞—Ç—É—Å: " . ($stoppedPoll['is_closed'] ? '–∑–∞–∫—Ä—ã—Ç' : '–æ—Ç–∫—Ä—ã—Ç') . "\n";
        echo "  ‚Ä¢ –í—Å–µ–≥–æ –≥–æ–ª–æ—Å–æ–≤: " . ($stoppedPoll['total_voter_count'] ?? 0) . "\n";
        
        if (isset($stoppedPoll['options'])) {
            echo "  ‚Ä¢ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:\n";
            foreach ($stoppedPoll['options'] as $index => $option) {
                $votes = $option['voter_count'] ?? 0;
                echo "    " . ($index + 1) . ". {$option['text']}: {$votes} –≥–æ–ª–æ—Å(–æ–≤)\n";
            }
        }
        echo "\n";
    }

    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
    echo "  11. –û–°–¢–ê–ù–û–í–ö–ê –° –ó–ê–ú–ï–ù–û–ô –ö–õ–ê–í–ò–ê–¢–£–†–´\n";
    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";

    if ($pollId2) {
        sleep(2);

        $newKeyboard = $telegram->buildInlineKeyboard([
            [
                ['text' => '‚úÖ –û–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à–µ–Ω', 'callback_data' => 'poll_closed'],
            ],
            [
                ['text' => 'üìä –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É', 'url' => 'https://t.me'],
            ],
        ]);

        $result = $telegram->stopPoll(null, $pollId2, $newKeyboard);
        
        echo "‚úì –û–ø—Ä–æ—Å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π\n";
        echo "  ‚Ä¢ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∑–∞–º–µ–Ω–µ–Ω–∞\n\n";
    }

    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
    echo "  –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø\n";
    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";

    echo "‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ 11 —Ç–∏–ø–æ–≤ –æ–ø—Ä–æ—Å–æ–≤:\n\n";
    echo "  1. ‚úì –û–±—ã—á–Ω—ã–π –ø—É–±–ª–∏—á–Ω—ã–π –æ–ø—Ä–æ—Å\n";
    echo "  2. ‚úì –ê–Ω–æ–Ω–∏–º–Ω—ã–π —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≤—ã–±–æ—Ä–æ–º\n";
    echo "  3. ‚úì –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º\n";
    echo "  4. ‚úì –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ —Å HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º\n";
    echo "  5. ‚úì –û–ø—Ä–æ—Å —Å –∞–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ–º (60 —Å–µ–∫)\n";
    echo "  6. ‚úì –û–ø—Ä–æ—Å —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–∞—Ç–æ–π –∑–∞–∫—Ä—ã—Ç–∏—è\n";
    echo "  7. ‚úì –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –∑–∞–∫—Ä—ã—Ç—ã–π –æ–ø—Ä–æ—Å\n";
    echo "  8. ‚úì –û–ø—Ä–æ—Å —Å inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π\n";
    echo "  9. ‚úì –ù–µ–∞–Ω–æ–Ω–∏–º–Ω–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞\n";
    echo " 10. ‚úì –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–ø—Ä–æ—Å–∞\n";
    echo " 11. ‚úì –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –∑–∞–º–µ–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã\n\n";

    echo "üí° –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ä–æ—Å–æ–≤:\n";
    echo "  ‚Ä¢ is_anonymous - –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å (true/false)\n";
    echo "  ‚Ä¢ type - —Ç–∏–ø ('regular' –∏–ª–∏ 'quiz')\n";
    echo "  ‚Ä¢ allows_multiple_answers - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä\n";
    echo "  ‚Ä¢ correct_option_id - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç (–¥–ª—è quiz)\n";
    echo "  ‚Ä¢ explanation - –ø–æ—è—Å–Ω–µ–Ω–∏–µ –∫ –æ—Ç–≤–µ—Ç—É\n";
    echo "  ‚Ä¢ explanation_parse_mode - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—è—Å–Ω–µ–Ω–∏—è\n";
    echo "  ‚Ä¢ open_period - –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ (5-600 —Å–µ–∫)\n";
    echo "  ‚Ä¢ close_date - Unix timestamp –∑–∞–∫—Ä—ã—Ç–∏—è\n";
    echo "  ‚Ä¢ is_closed - –∑–∞–∫—Ä—ã—Ç—å —Å—Ä–∞–∑—É\n";
    echo "  ‚Ä¢ reply_markup - inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞\n\n";

} catch (TelegramApiException $e) {
    echo "\n‚úó –û—à–∏–±–∫–∞ API: " . $e->getMessage() . "\n";
    echo "–ö–æ–¥: " . $e->getStatusCode() . "\n\n";
    exit(1);
} catch (Exception $e) {
    echo "\n‚úó –û—à–∏–±–∫–∞: " . $e->getMessage() . "\n";
    echo "–§–∞–π–ª: " . $e->getFile() . "\n";
    echo "–°—Ç—Ä–æ–∫–∞: " . $e->getLine() . "\n\n";
    exit(1);
}

echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n";
echo "‚ïë        –¢–ï–°–¢ –û–ü–†–û–°–û–í –ò –ì–û–õ–û–°–û–í–ê–ù–ò–ô –ó–ê–í–ï–†–®–ï–ù                     ‚ïë\n";
echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\n";
