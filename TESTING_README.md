# ๐งช TelegramBot Testing Guide

ะัะบะพะฒะพะดััะฒะพ ะฟะพ ัะตััะธัะพะฒะฐะฝะธั TelegramBot ะฒ ัะตะถะธะผะต Polling

---

## ๐ ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

### ะะฑัะทะฐัะตะปัะฝะพ
- โ PHP 8.1+
- โ MySQL/MariaDB (ะทะฐะฟััะตะฝ ะธ ะดะพัััะฟะตะฝ)
- โ Composer dependencies ัััะฐะฝะพะฒะปะตะฝั
- โ Telegram Bot Token

### ะัะพะฒะตัะบะฐ
```bash
# ะัะพะฒะตัะบะฐ PHP ะฒะตััะธะธ
php -v

# ะัะพะฒะตัะบะฐ MySQL
mysql -u root -e "SELECT VERSION();"

# ะัะพะฒะตัะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
composer install
```

---

## ๐ ะัััััะน ััะฐัั

### 1. ะะฐะฟััะบ MySQL
```bash
# ะัะปะธ MySQL ะฝะต ะทะฐะฟััะตะฝ
sudo mysqld --user=mysql --datadir=/var/lib/mysql &

# ะะปะธ
sudo service mysql start
```

### 2. ะกะพะทะดะฐะฝะธะต ะฑะฐะทั ะดะฐะฝะฝัั
```bash
mysql -u root -e "CREATE DATABASE IF NOT EXISTS utilities_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"
```

### 3. ะะฐะฟััะบ ะฐะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝะพะณะพ ัะตััะฐ
```bash
cd /home/engine/project
php telegram_bot_automated_test.php
```

**ะะตะทัะปััะฐั:** 36 ะฐะฒัะพะผะฐัะธัะตัะบะธั ัะตััะพะฒ (~3 ะผะธะฝััั)

---

## ๐ ะะพัััะฟะฝัะต ัะตััั

### 1. ะะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝัะน ัะตัั (ัะตะบะพะผะตะฝะดัะตััั)
**ะคะฐะนะป:** `telegram_bot_automated_test.php`

**ะงัะพ ัะตััะธััะตั:**
- MySQL ะฟะพะดะบะปััะตะฝะธะต
- TelegramAPI ะธะฝะธัะธะฐะปะธะทะฐัะธั
- ะัะฟัะฐะฒะบะฐ ัะพะพะฑัะตะฝะธะน (ัะตะบัั, HTML, Markdown, ัะผะพะดะทะธ)
- ะะปะฐะฒะธะฐัััั (Inline, Reply)
- ConversationManager (ะดะธะฐะปะพะณะธ ั ะบะพะฝัะตะบััะพะผ)
- PollingHandler (Long Polling)
- ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะธ ัะดะฐะปะตะฝะธะต ัะพะพะฑัะตะฝะธะน
- ะะพะณะธัะพะฒะฐะฝะธะต
- ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
- ะกะพะทะดะฐะฝะธะต MySQL ะดะฐะผะฟะพะฒ

**ะัะตะธะผััะตััะฒะฐ:**
- โ ะะต ััะตะฑัะตั ะฟะพะปัะทะพะฒะฐัะตะปััะบะพะณะพ ะฒะฒะพะดะฐ
- โ ะััััะพะต ะฒัะฟะพะปะฝะตะฝะธะต (~3 ะผะธะฝััั)
- โ 100% ะฐะฒัะพะผะฐัะธะทะฐัะธั
- โ ะะตัะฐะปัะฝัะต ะพััะตัั

**ะะฐะฟััะบ:**
```bash
php telegram_bot_automated_test.php
```

---

### 2. ะะฝัะตัะฐะบัะธะฒะฝัะน ัะตัั (ะพะฟัะธะพะฝะฐะปัะฝัะน)
**ะคะฐะนะป:** `telegram_bot_comprehensive_test.php`

**ะงัะพ ัะตััะธััะตั:**
- ะัะต 6 ััะพะฒะฝะตะน ััะฝะบัะธะพะฝะฐะปัะฝะพััะธ
- ะะฝัะตัะฐะบัะธะฒะฝะพะต ะฒะทะฐะธะผะพะดะตะนััะฒะธะต ั ะฟะพะปัะทะพะฒะฐัะตะปะตะผ
- ะะตะดะธะฐ ัะฐะนะปั (ัะพัะพ, ะดะพะบัะผะตะฝัั, ะฐัะดะธะพ, ะฒะธะดะตะพ)
- ะะพะผะฟะปะตะบัะฝัะต ะดะธะฐะปะพะณะพะฒัะต ััะตะฝะฐัะธะธ

**ะัะตะธะผััะตััะฒะฐ:**
- โ ะะพะปะฝะฐั ะฟัะพะฒะตัะบะฐ ะฒัะตั ะฒะพะทะผะพะถะฝะพััะตะน
- โ ะะตะฐะปัะฝะพะต ะฒะทะฐะธะผะพะดะตะนััะฒะธะต ั ะฟะพะปัะทะพะฒะฐัะตะปะตะผ
- โ ะขะตััะธัะพะฒะฐะฝะธะต ะผะตะดะธะฐ

**ะะตะดะพััะฐัะบะธ:**
- โ๏ธ ะขัะตะฑัะตั ะฐะบัะธะฒะฝะพะณะพ ััะฐััะธั ะฟะพะปัะทะพะฒะฐัะตะปั
- โ๏ธ ะะปะธัะตะปัะฝะพะต ะฒัะฟะพะปะฝะตะฝะธะต (ะดะพ 30 ะผะธะฝัั)
- โ๏ธ ะขะฐะนะผะฐััั ะพะถะธะดะฐะฝะธั (30 ัะตะบ ะฝะฐ ะดะตะนััะฒะธะต)

**ะะฐะฟััะบ:**
```bash
php telegram_bot_comprehensive_test.php
```

---

## ๐ ะะถะธะดะฐะตะผัะต ัะตะทัะปััะฐัั

### ะฃัะฟะตัะฝะพะต ะฒัะฟะพะปะฝะตะฝะธะต

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะะขะะะะขะะะะะะะะะะะ ะขะะกะขะะะะะะะะ TELEGRAMBOT                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

...36 ัะตััะพะฒ...

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะขะะะะะะฏ ะกะขะะขะะกะขะะะ                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ะัะตะณะพ ัะตััะพะฒ: 36
โ ะัะพะนะดะตะฝะพ: 36
โ ะัะพะฒะฐะปะตะฝะพ: 0
โ๏ธ  ะัะตะดัะฟัะตะถะดะตะฝะธะน: 0
๐ ะัะพัะตะฝั ััะฟะตัะฐ: 100%

โ ะะะขะะะะขะะะะะะะะะะะ ะขะะกะขะะะะะะะะ ะะะะะะจะะะ!
```

---

## ๐ ะกะพะทะดะฐะฒะฐะตะผัะต ัะฐะนะปั

### ะะพัะปะต ัะตััะธัะพะฒะฐะฝะธั ัะพะทะดะฐัััั:

#### 1. MySQL ะดะฐะผะฟั (`/mysql/`)
```
mysql/
โโโ telegram_bot_users_dump.sql (2.6 KB)
โโโ telegram_bot_conversations_dump.sql (2.6 KB)
```

#### 2. ะะพะณะธ (`/logs/`)
```
logs/
โโโ app.log (ัะฐะทะผะตั ะทะฐะฒะธัะธั ะพั ะบะพะปะธัะตััะฒะฐ ะพะฟะตัะฐัะธะน)
```

#### 3. ะััะตัั (ะบะพัะฝะตะฒะฐั ะดะธัะตะบัะพัะธั)
```
/
โโโ TELEGRAM_BOT_TEST_REPORT.md (ะดะตัะฐะปัะฝัะน ะพััะตั)
โโโ TELEGRAM_BOT_TESTING_SUMMARY.md (ะบัะฐัะบะฐั ัะฒะพะดะบะฐ)
```

---

## ๐ ะัะพะฒะตัะบะฐ ัะตะทัะปััะฐัะพะฒ

### 1. ะัะพัะผะพัั MySQL ะดะฐะฝะฝัั
```bash
# ะะพะปัะทะพะฒะฐัะตะปะธ
mysql -u root utilities_db -e "SELECT * FROM telegram_bot_users;"

# ะะธะฐะปะพะณะธ
mysql -u root utilities_db -e "SELECT * FROM telegram_bot_conversations;"

# ะกัััะบัััะฐ ัะฐะฑะปะธั
mysql -u root utilities_db -e "SHOW CREATE TABLE telegram_bot_users\G"
```

### 2. ะัะพัะผะพัั ะปะพะณะพะฒ
```bash
# ะะพัะปะตะดะฝะธะต 50 ัััะพะบ
tail -50 logs/app.log

# ะขะพะปัะบะพ ะพัะธะฑะบะธ
grep ERROR logs/app.log

# ะ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
tail -f logs/app.log
```

### 3. ะัะพัะผะพัั ะดะฐะผะฟะพะฒ
```bash
# ะกะพะดะตัะถะธะผะพะต ะดะฐะผะฟะฐ
cat mysql/telegram_bot_users_dump.sql

# ะะพะปะธัะตััะฒะพ INSERT ัััะพะบ
grep "INSERT INTO" mysql/telegram_bot_users_dump.sql | wc -l
```

---

## ๐ง ะฃัััะฐะฝะตะฝะธะต ะฟัะพะฑะปะตะผ

### ะัะพะฑะปะตะผะฐ: MySQL ะฝะต ะทะฐะฟััะตะฝ
```bash
# ะัะธะฑะบะฐ: "Can't connect to MySQL server"
# ะะตัะตะฝะธะต:
sudo mysqld --user=mysql --datadir=/var/lib/mysql &
```

### ะัะพะฑะปะตะผะฐ: ะะฐะทะฐ ะดะฐะฝะฝัั ะฝะต ัััะตััะฒัะตั
```bash
# ะัะธะฑะบะฐ: "Unknown database 'utilities_db'"
# ะะตัะตะฝะธะต:
mysql -u root -e "CREATE DATABASE utilities_db;"
```

### ะัะพะฑะปะตะผะฐ: ะะตั ะฟัะฐะฒ ะฝะฐ ะทะฐะฟะธัั ะปะพะณะพะฒ
```bash
# ะัะธะฑะบะฐ: "Permission denied: logs/app.log"
# ะะตัะตะฝะธะต:
chmod 755 logs/
```

### ะัะพะฑะปะตะผะฐ: Telegram API ะพัะธะฑะบะธ
```bash
# ะัะธะฑะบะฐ: "Unauthorized" ะธะปะธ "Bad Gateway"
# ะะตัะตะฝะธะต:
# 1. ะัะพะฒะตัััะต ัะพะบะตะฝ ะฑะพัะฐ
# 2. ะัะพะฒะตัััะต ะธะฝัะตัะฝะตั ัะพะตะดะธะฝะตะฝะธะต
# 3. ะัะพะฒะตัััะต ะดะพัััะฟะฝะพััั api.telegram.org
```

---

## ๐ ะะพะฝัะธะณััะฐัะธั

### ะขะตััะพะฒัะต ะดะฐะฝะฝัะต (ะฒ ะบะพะดะต ัะตััะพะฒ)

```php
// Bot Token
$BOT_TOKEN = '8327641497:AAFTHb3xSTpP3Q6Peg8-OK4nTWTfF7iMWfI';

// Test Chat IDs
$CHAT_IDS = [366442475, 311619417];

// Timeout ะดะปั ะธะฝัะตัะฐะบัะธะฒะฝัั ัะตััะพะฒ
$TEST_TIMEOUT = 30; // ัะตะบัะฝะด
```

### MySQL ะบะพะฝัะธะณััะฐัะธั (`config/mysql.json`)

```json
{
    "databases": {
        "main": {
            "host": "localhost",
            "port": 3306,
            "database": "utilities_db",
            "username": "root",
            "password": "",
            "charset": "utf8mb4"
        }
    }
}
```

### ConversationManager (`config/telegram_bot_conversations.json`)

```json
{
    "conversations": {
        "enabled": true,
        "timeout": 3600,
        "auto_create_tables": true
    }
}
```

---

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะธะฝัะพัะผะฐัะธั

### ะฃัะพะฒะฝะธ ัะตััะธัะพะฒะฐะฝะธั

| ะฃัะพะฒะตะฝั | ะะฟะธัะฐะฝะธะต | ะะฒัะพัะตัั | ะะฝัะตัะฐะบัะธะฒะฝัะน |
|---------|----------|----------|---------------|
| 1 | ะะฐัะฐะปัะฝัะต ะพะฟะตัะฐัะธะธ (ัะตะบัั, ัะผะพะดะทะธ) | โ | โ |
| 2 | ะะฐะทะพะฒัะต ะพะฟะตัะฐัะธะธ (ะผะตะดะธะฐ) | โ๏ธ | โ |
| 3 | ะะปะฐะฒะธะฐัััั | โ | โ |
| 4 | ะะธะฐะปะพะณะธ ั ะบะพะฝัะตะบััะพะผ | โ | โ |
| 5 | ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ | โ | โ |
| 6 | ะะพะผะฟะปะตะบัะฝัะต ััะตะฝะฐัะธะธ | โ๏ธ | โ |

**ะะตะณะตะฝะดะฐ:**
- โ ะะพะปะฝะพัััั ะฟะพะดะดะตัะถะธะฒะฐะตััั
- โ๏ธ ะงะฐััะธัะฝะพ (ะฑะตะท ะฟะพะปัะทะพะฒะฐัะตะปััะบะพะณะพ ะฒะฒะพะดะฐ)

---

## ๐ ะขะตััะพะฒัะน ะฑะพั

### ะะฝัะพัะผะฐัะธั
- **Username:** @PipelacTest_bot
- **Bot ID:** 8327641497
- **ะะตะถะธะผ:** Polling (Long Polling)

### ะะพะผะฐะฝะดั
- `/start` - ะะฐัะฐัั ัะฐะฑะพัั ั ะฑะพัะพะผ
- `/info` - ะะฝัะพัะผะฐัะธั ะพ ะฑะพัะต
- `/stat` - ะกัะฐัะธััะธะบะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธั
- `/edit` - ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฝะฐัััะพะตะบ

---

## โ ะงะตะบ-ะปะธัั ะฟะตัะตะด ัะตััะธัะพะฒะฐะฝะธะตะผ

- [ ] MySQL ะทะฐะฟััะตะฝ ะธ ะดะพัััะฟะตะฝ
- [ ] ะะฐะทะฐ ะดะฐะฝะฝัั `utilities_db` ัะพะทะดะฐะฝะฐ
- [ ] Composer ะทะฐะฒะธัะธะผะพััะธ ัััะฐะฝะพะฒะปะตะฝั
- [ ] ะขะพะบะตะฝ ะฑะพัะฐ ะบะพััะตะบัะฝัะน
- [ ] ะะฐะฟะบะธ `logs/` ะธ `mysql/` ัััะตััะฒััั ะธ ะดะพัััะฟะฝั ะดะปั ะทะฐะฟะธัะธ
- [ ] PHP ะฒะตััะธั 8.1 ะธะปะธ ะฒััะต

---

## ๐ฏ ะกะปะตะดัััะธะต ัะฐะณะธ ะฟะพัะปะต ัะตััะธัะพะฒะฐะฝะธั

1. โ ะัะพัะผะพััะธัะต ะพััะตั: `TELEGRAM_BOT_TEST_REPORT.md`
2. โ ะัะพะฒะตัััะต ะปะพะณะธ ะฝะฐ ะฝะฐะปะธัะธะต ะพัะธะฑะพะบ
3. โ ะะทััะธัะต ัะพะทะดะฐะฝะฝัะต MySQL ะดะฐะผะฟั
4. โ ะัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ ะทะฐะฟัััะธัะต ะธะฝัะตัะฐะบัะธะฒะฝัะต ัะตััั
5. โ ะะดะฐะฟัะธััะนัะต ะบะพะฝัะธะณััะฐัะธั ะฟะพะด ะฒะฐัะธ ะฝัะถะดั

---

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั

- `README.md` - ะพัะฝะพะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ
- `TELEGRAM_BOT_TEST_REPORT.md` - ะดะตัะฐะปัะฝัะน ะพััะตั ะพ ัะตััะธัะพะฒะฐะฝะธะธ
- `TELEGRAM_BOT_TESTING_SUMMARY.md` - ะบัะฐัะบะฐั ัะฒะพะดะบะฐ ัะตะทัะปััะฐัะพะฒ
- `POLLING_QUICK_START.md` - ะฑัััััะน ััะฐัั ั Polling
- `TELEGRAM_BOT_CONVERSATIONS.md` - ััะบะพะฒะพะดััะฒะพ ะฟะพ ะดะธะฐะปะพะณะฐะผ

---

**ะฃะดะฐัะฝะพะณะพ ัะตััะธัะพะฒะฐะฝะธั! ๐**

*ะะพะบัะผะตะฝัะฐัะธั ะพะฑะฝะพะฒะปะตะฝะฐ: 2025-11-01*
