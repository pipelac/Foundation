# Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Logger

## –í–µ—Ä—Å–∏—è: 2.1 (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)

–ö–ª–∞—Å—Å Logger —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫).

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úâÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö (CRITICAL)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–ª—è –ª—é–±—ã—Ö —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
- –ö—Ä–∞—Å–∏–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã–µ HTML –ø–∏—Å—å–º–∞ —Å –¥–µ—Ç–∞–ª—è–º–∏ —Å–æ–±—ã—Ç–∏—è

### üîí –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- –û—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ email –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- Email –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–∂–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ SMTP
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### üé® –ö—Ä–∞—Å–∏–≤—ã–µ HTML –ø–∏—Å—å–º–∞
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è —Å–æ–±—ã—Ç–∏—è
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –¥–µ—Ç–∞–ª—è–º–∏
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON –∫–æ–Ω—Ç–µ–∫—Å—Ç
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ –∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–±—ã—Ç–∏—è

---

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

```php
$config = [
    // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–æ–≥–≥–µ—Ä–∞
    'directory' => '/var/log/app',
    'file_name' => 'app.log',
    'max_files' => 5,
    'max_file_size' => 10,
    'enabled' => true,
    
    // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    'admin_email' => 'admin@example.com', // –∏–ª–∏ –º–∞—Å—Å–∏–≤ ['admin1@example.com', 'admin2@example.com']
    'email_config' => [
        'from_email' => 'noreply@example.com',
        'from_name' => 'Logger System',
        'reply_to' => 'support@example.com',
        'reply_name' => 'Support Team',
        'charset' => 'UTF-8',
        // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        'smtp' => [
            'host' => 'smtp.gmail.com',
            'port' => 587,
            'encryption' => 'tls',
            'username' => 'your-email@gmail.com',
            'password' => 'your-app-password',
        ],
        'delivery' => [
            'retry_attempts' => 3,
            'retry_delay' => 5,
            'timeout' => 30,
        ],
    ],
    'email_on_levels' => ['CRITICAL'], // –£—Ä–æ–≤–Ω–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email
];

$logger = new Logger($config);
```

---

## üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### admin_email
**–¢–∏–ø:** `string` –∏–ª–∏ `array<string>`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** Email –∞–¥—Ä–µ—Å(–∞) –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π  
**–ü—Ä–∏–º–µ—Ä—ã:**
```php
'admin_email' => 'admin@example.com'
// –∏–ª–∏
'admin_email' => ['admin1@example.com', 'admin2@example.com', 'admin3@example.com']
```

### email_config
**–¢–∏–ø:** `array` –∏–ª–∏ `null`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∫–ª–∞—Å—Å–∞ Email  
**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `from_email` - –∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
- `from_name` - –∏–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `reply_to` - –∞–¥—Ä–µ—Å –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤
- `reply_name` - –∏–º—è –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤
- `charset` - –∫–æ–¥–∏—Ä–æ–≤–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é UTF-8)
- `smtp` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMTP —Å–µ—Ä–≤–µ—Ä–∞
- `delivery` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ (retry, timeout)

–ï—Å–ª–∏ `email_config` —Ä–∞–≤–µ–Ω `null`, email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –æ—Ç–∫–ª—é—á–µ–Ω—ã.

### email_on_levels
**–¢–∏–ø:** `array<string>`  
**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `['CRITICAL']`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–∞—Å—Å–∏–≤ —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å email  
**–î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:** `DEBUG`, `INFO`, `WARNING`, `ERROR`, `CRITICAL`

**–ü—Ä–∏–º–µ—Ä—ã:**
```php
'email_on_levels' => ['CRITICAL']                    // –¢–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
'email_on_levels' => ['ERROR', 'CRITICAL']           // –û—à–∏–±–∫–∏ –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
'email_on_levels' => ['WARNING', 'ERROR', 'CRITICAL'] // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –≤—ã—à–µ
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```php
$logger = new Logger([
    'directory' => '/var/log',
    'file_name' => 'app.log',
    'admin_email' => 'admin@example.com',
    'email_config' => [
        'from_email' => 'noreply@example.com',
        'from_name' => 'My Application',
    ],
]);

// –û–±—ã—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ - email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
$logger->info('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à–µ–ª –≤ —Å–∏—Å—Ç–µ–º—É');
$logger->warning('–ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å');

// –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ - email –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
$logger->critical('–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', [
    'host' => 'localhost',
    'error' => 'Connection refused',
]);
```

### –ü—Ä–∏–º–µ—Ä 2: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã

```php
$logger = new Logger([
    'directory' => '/var/log',
    'file_name' => 'app.log',
    'admin_email' => [
        'admin1@example.com',
        'admin2@example.com',
        'devops@example.com',
    ],
    'email_config' => [
        'from_email' => 'alerts@example.com',
        'from_name' => 'Alert System',
    ],
]);

// Email –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤—Å–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
$logger->critical('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ–π —Å–∏—Å—Ç–µ–º—ã');
```

### –ü—Ä–∏–º–µ—Ä 3: Email –¥–ª—è ERROR –∏ CRITICAL

```php
$logger = new Logger([
    'directory' => '/var/log',
    'file_name' => 'app.log',
    'admin_email' => 'admin@example.com',
    'email_config' => [
        'from_email' => 'noreply@example.com',
        'from_name' => 'Application',
    ],
    'email_on_levels' => ['ERROR', 'CRITICAL'],
]);

$logger->info('–ó–∞–ø—Ä–æ—Å –æ–±—Ä–∞–±–æ—Ç–∞–Ω');          // Email –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
$logger->warning('–ö–µ—à –æ—á–∏—â–µ–Ω');             // Email –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
$logger->error('–û—à–∏–±–∫–∞ API');               // Email –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
$logger->critical('–°–∏—Å—Ç–µ–º–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');     // Email –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
```

### –ü—Ä–∏–º–µ—Ä 4: –° SMTP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

```php
$logger = new Logger([
    'directory' => '/var/log',
    'file_name' => 'app.log',
    'admin_email' => 'admin@example.com',
    'email_config' => [
        'from_email' => 'noreply@example.com',
        'from_name' => 'Production Server',
        'smtp' => [
            'host' => 'smtp.gmail.com',
            'port' => 587,
            'encryption' => 'tls',
            'username' => 'your-email@gmail.com',
            'password' => 'your-app-password',
        ],
        'delivery' => [
            'retry_attempts' => 5,
            'retry_delay' => 3,
            'timeout' => 60,
        ],
    ],
]);
```

### –ü—Ä–∏–º–µ—Ä 5: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```php
// –°–ø–æ—Å–æ–± 1: –ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
$logger = new Logger([
    'directory' => '/var/log',
    'file_name' => 'app.log',
]);

// –°–ø–æ—Å–æ–± 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å email_config –≤ null
$logger = new Logger([
    'directory' => '/var/log',
    'file_name' => 'app.log',
    'admin_email' => 'admin@example.com',
    'email_config' => null, // Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–∫–ª—é—á–µ–Ω—ã
]);
```

---

## üìß –§–æ—Ä–º–∞—Ç email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –¢–µ–º–∞ –ø–∏—Å—å–º–∞
```
[CRITICAL] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```

### –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∏—Å—å–º–∞

Email —Å–æ–¥–µ—Ä–∂–∏—Ç –∫—Ä–∞—Å–∏–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—É—é HTML —Ç–∞–±–ª–∏—Ü—É —Å:

1. **–í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è** - timestamp –≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
2. **–£—Ä–æ–≤–µ–Ω—å** - —Ü–≤–µ—Ç–Ω–∞—è –º–µ—Ç–∫–∞ (CRITICAL = —Ç–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π)
3. **–°–æ–æ–±—â–µ–Ω–∏–µ** - —Ç–µ–∫—Å—Ç —Å–æ–±—ã—Ç–∏—è
4. **–ö–æ–Ω—Ç–µ–∫—Å—Ç** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
5. **–°–µ—Ä–≤–µ—Ä** - hostname —Å–µ—Ä–≤–µ—Ä–∞
6. **–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ª–æ–≥–æ–≤** - –ø—É—Ç—å –∫ —Ñ–∞–π–ª–∞–º –ª–æ–≥–æ–≤

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

| –£—Ä–æ–≤–µ–Ω—å | –¶–≤–µ—Ç | Hex |
|---------|------|-----|
| DEBUG | –°–µ—Ä—ã–π | #6c757d |
| INFO | –ì–æ–ª—É–±–æ–π | #0dcaf0 |
| WARNING | –ñ–µ–ª—Ç—ã–π | #ffc107 |
| ERROR | –ö—Ä–∞—Å–Ω—ã–π | #dc3545 |
| CRITICAL | –¢–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π | #8b0000 |

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å

### –ò–∑–æ–ª—è—Ü–∏—è –æ—à–∏–±–æ–∫
```php
// –î–∞–∂–µ –µ—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ email –Ω–µ —É–¥–∞–µ—Ç—Å—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
$logger->critical('–û—à–∏–±–∫–∞'); // –ó–∞–ø–∏—à–µ—Ç—Å—è –≤ —Ñ–∞–π–ª –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ
```

–í—Å–µ –æ—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ email:
- –ü–æ–¥–∞–≤–ª—è—é—Ç—Å—è (try-catch)
- –õ–æ–≥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `error_log()`
- –ù–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

Email –∫–ª–∞—Å—Å —Å–æ–∑–¥–∞–µ—Ç—Å—è **–±–µ–∑** Logger –∏–Ω—Å—Ç–∞–Ω—Å–∞:
```php
// –í Logger.php
$this->emailInstance = new Email($this->emailConfig);
// Logger –ù–ï –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ Email, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è email –∞–¥—Ä–µ—Å–æ–≤

–í—Å–µ email –∞–¥—Ä–µ—Å–∞ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:
```php
// –í—ã–±—Ä–æ—Å–∏—Ç Exception –µ—Å–ª–∏ email –Ω–µ–≤–∞–ª–∏–¥–µ–Ω
$logger = new Logger([
    'admin_email' => 'invalid-email', // Exception!
    'email_config' => [...],
]);
```

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Email –∫–ª–∞—Å—Å–∞

Email –∏–Ω—Å—Ç–∞–Ω—Å —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ:
```php
$logger = new Logger([
    'admin_email' => 'admin@example.com',
    'email_config' => [...],
]);

// Email –æ–±—ä–µ–∫—Ç –µ—â–µ –ù–ï —Å–æ–∑–¥–∞–Ω

$logger->info('–õ–æ–≥');     // Email –æ–±—ä–µ–∫—Ç –µ—â–µ –ù–ï —Å–æ–∑–¥–∞–Ω
$logger->warning('–õ–æ–≥');  // Email –æ–±—ä–µ–∫—Ç –µ—â–µ –ù–ï —Å–æ–∑–¥–∞–Ω

$logger->critical('–û—à–∏–±–∫–∞'); // –ó–¥–µ—Å—å —Å–æ–∑–¥–∞–µ—Ç—Å—è Email –∏–Ω—Å—Ç–∞–Ω—Å
```

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã

- –ü—Ä–æ–≤–µ—Ä–∫–∞ `shouldSendEmailNotification()` - O(1)
- Email –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Ñ–æ–Ω–µ —á–µ—Ä–µ–∑ `error_log()` –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ Email –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```php
// –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π logger
$logger = new Logger([
    'directory' => '/tmp/test_logs',
    'file_name' => 'test.log',
    'admin_email' => 'your-email@example.com',
    'email_config' => [
        'from_email' => 'test@example.com',
        'from_name' => 'Test Logger',
        // –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∞
        'smtp' => [
            'host' => 'smtp.gmail.com',
            'port' => 587,
            'encryption' => 'tls',
            'username' => 'your-gmail@gmail.com',
            'password' => 'your-app-password',
        ],
    ],
]);

// –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ
$logger->critical('–¢–µ—Å—Ç–æ–≤–æ–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ', [
    'test' => true,
    'timestamp' => time(),
]);

echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à email: your-email@example.com\n";
```

---

## üö® –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ù–µ —É–∫–∞–∑–∞–Ω `admin_email` –∏–ª–∏ `email_config`
2. SMTP —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
3. –ù–µ–≤–µ—Ä–Ω—ã–µ SMTP —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
4. –§—É–Ω–∫—Ü–∏—è `mail()` –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ (–µ—Å–ª–∏ SMTP –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ error_log —Å–∏—Å—Ç–µ–º—ã
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Gmail App Password –¥–ª—è Gmail SMTP

### Email –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –¥—É–±–ª—è–º–∏

**–ü—Ä–∏—á–∏–Ω–∞:** Logger –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω Singleton –¥–ª—è Logger

### Email –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ JSON

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–ª—è —Ä–∞–±–æ—Ç—ã email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ç—Ä–µ–±—É–µ—Ç—Å—è:
- PHP 8.1+
- –ö–ª–∞—Å—Å `Email` –∏–∑ `App\Component\Email`
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `json`
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `filter` (–¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ email)

---

## üéì –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ email —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

```php
// ‚ùå –ü–ª–æ—Ö–æ - —Å–ø–∞–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
'email_on_levels' => ['DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL']

// ‚úÖ –•–æ—Ä–æ—à–æ - —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
'email_on_levels' => ['CRITICAL']

// ‚úÖ –•–æ—Ä–æ—à–æ - –æ—à–∏–±–∫–∏ –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
'email_on_levels' => ['ERROR', 'CRITICAL']
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ SMTP –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```php
// ‚ùå –ü–ª–æ—Ö–æ - –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å
'email_config' => [
    'from_email' => 'noreply@example.com',
    'from_name' => 'App',
]

// ‚úÖ –•–æ—Ä–æ—à–æ - —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º SMTP
'email_config' => [
    'from_email' => 'noreply@yourdomain.com',
    'from_name' => 'Production Alert',
    'smtp' => [
        'host' => 'smtp.yourdomain.com',
        'port' => 587,
        'encryption' => 'tls',
        'username' => 'alerts@yourdomain.com',
        'password' => getenv('SMTP_PASSWORD'),
    ],
]
```

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º

```php
'admin_email' => [
    'primary-admin@example.com',
    'backup-admin@example.com',
    'devops-team@example.com',
]
```

### 4. –•—Ä–∞–Ω–∏—Ç–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```php
'email_config' => [
    'from_email' => getenv('LOGGER_FROM_EMAIL'),
    'smtp' => [
        'host' => getenv('SMTP_HOST'),
        'username' => getenv('SMTP_USERNAME'),
        'password' => getenv('SMTP_PASSWORD'),
    ],
]
```

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏

### –í–µ—Ä—Å–∏—è 2.0 ‚Üí 2.1

–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è **–ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞**. –°—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:

```php
// –°—Ç–∞—Ä—ã–π –∫–æ–¥ (–≤–µ—Ä—Å–∏—è 2.0) - –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
$logger = new Logger([
    'directory' => '/var/log',
    'file_name' => 'app.log',
]);

// –ù–æ–≤—ã–π –∫–æ–¥ (–≤–µ—Ä—Å–∏—è 2.1) - —Å email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
$logger = new Logger([
    'directory' => '/var/log',
    'file_name' => 'app.log',
    'admin_email' => 'admin@example.com',
    'email_config' => [...],
]);
```

---

## üìà Roadmap

–í–æ–∑–º–æ–∂–Ω—ã–µ –±—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–ê–≥—Ä–µ–≥–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π** - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–æ–±—ã—Ç–∏–π
2. **Throttling** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –æ—Ç–ø—Ä–∞–≤–∫–∏
3. **–®–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º** - –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è HTML —à–∞–±–ª–æ–Ω–æ–≤
4. **Webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Slack/Telegram
5. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞** - —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥–∏

---

**–ê–≤—Ç–æ—Ä —É–ª—É—á—à–µ–Ω–∏–π**: AI Expert —Å 20+ –ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º PHP —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏  
**–î–∞—Ç–∞**: 2024  
**–í–µ—Ä—Å–∏—è**: 2.1.0
